!function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=2)}([function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o={purple:"component",green:"data",default:"default",grey:"default"};Noodl.defineNode=function(t){var e={};for(var r in e.name=t.name,e.displayNodeName=t.displayName,e.usePortAsLabel=t.useInputAsLabel,e.color=o[t.color||"default"],e.category=t.category||"Modules",e.getInspectInfo=t.getInspectInfo,e.docs=t.docs,e.initialize=function(){this.inputs={};var e=this.outputs={},n=this;this.setOutputs=function(t){for(var o in t)e[o]=t[o],n.flagOutputDirty(o)},this.clearWarnings=function(){this.context.editorConnection&&this.nodeScope&&this.nodeScope.componentOwner&&this.context.editorConnection.clearWarnings(this.nodeScope.componentOwner.name,this.id)}.bind(this),this.sendWarning=function(t,e){this.context.editorConnection&&this.nodeScope&&this.nodeScope.componentOwner&&this.context.editorConnection.sendWarning(this.nodeScope.componentOwner.name,this.id,t,{message:e})}.bind(this),"function"==typeof t.initialize&&t.initialize.apply(this)},e.inputs={},e.outputs={},t.inputs)e.inputs[r]={type:"object"===n(t.inputs[r])?t.inputs[r].type:t.inputs[r],displayName:"object"===n(t.inputs[r])?t.inputs[r].displayName:void 0,group:"object"===n(t.inputs[r])?t.inputs[r].group:void 0,default:"object"===n(t.inputs[r])?t.inputs[r].default:void 0,set:function(){var e=r;return function(n){this.inputs[e]=n,t.changed&&"function"==typeof t.changed[e]&&t.changed[e].apply(this,[n])}}()};for(var r in t.signals)e.inputs[r]={type:"signal",displayName:"object"===n(t.signals[r])?t.signals[r].displayName:void 0,group:"object"===n(t.signals[r])?t.signals[r].group:void 0,valueChangedToTrue:function(){var e=r;return function(){var o=this,r="object"===n(t.signals[e])?t.signals[e].signal:t.signals[e];"function"==typeof r&&this.scheduleAfterInputsHaveUpdated((function(){r.apply(o)}))}}()};for(var r in t.outputs)"signal"===t.outputs[r]?e.outputs[r]={type:"signal"}:e.outputs[r]={type:"object"===n(t.outputs[r])?t.outputs[r].type:t.outputs[r],displayName:"object"===n(t.outputs[r])?t.outputs[r].displayName:void 0,group:"object"===n(t.outputs[r])?t.outputs[r].group:void 0,getter:function(){var t=r;return function(){return this.outputs[t]}}()};for(var r in e.methods=e.prototypeExtensions={},t.methods)e.prototypeExtensions[r]=t.methods[r];return e.methods.onNodeDeleted&&(e.methods._onNodeDeleted=function(){this.__proto__.__proto__._onNodeDeleted.call(this),e.methods.onNodeDeleted.value.call(this)}),{node:e,setup:t.setup}},Noodl.defineCollectionNode=function(t){var e={name:t.name,category:t.category,color:"data",inputs:t.inputs,outputs:Object.assign({Items:"array","Fetch Started":"signal","Fetch Completed":"signal"},t.outputs||{}),signals:Object.assign({Fetch:function(){var e=this;this.sendSignalOnOutput("Fetch Started");var n=t.fetch.call(this,(function(){e.sendSignalOnOutput("Fetch Completed")}));this.setOutputs({Items:n})}},t.signals||{})};return Noodl.defineNode(e)},Noodl.defineModelNode=function(t){var e={name:t.name,category:t.category,color:"data",inputs:{Id:"string"},outputs:{Fetched:"signal"},changed:{Id:function(t){var e=this;this._object&&this._changeListener&&this._object.off("change",this._changeListener),this._object=Noodl.Object.get(t),this._changeListener=function(t,n){var o={};o[t]=n,e.setOutputs(o)},this._object.on("change",this._changeListener),this.setOutputs(this._object.data),this.sendSignalOnOutput("Fetched")}},initialize:function(){}};for(var n in t.properties)e.inputs[n]=t.properties[n],e.outputs[n]=t.properties[n],e.changed[n]=function(){var t=n;return function(e){this._object&&this._object.set(t,e)}}();return Noodl.defineNode(e)},Noodl.defineReactNode=function(t){var e=Noodl.defineNode(t);return e.node.getReactComponent=t.getReactComponent,e.node.inputProps=t.inputProps,e.node.inputCss=t.inputCss,e.node.outputProps=t.outputProps,e.node.setup=t.setup,e.node.frame=t.frame,e.node},t.exports=Noodl},function(t,e,n){"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var r=function(t){var e,n=new Set,r=function(t,r){var i="function"==typeof t?t(e):t;if(!Object.is(i,e)){var a=e;e=(null!=r?r:"object"!==o(i))?i:Object.assign({},e,i),n.forEach((function(t){return t(e,a)}))}},i=function(){return e},a={setState:r,getState:i,subscribe:function(t){return n.add(t),function(){return n.delete(t)}},destroy:function(){return n.clear()}};return e=t(r,i,a),a};t.exports=function(t){return t?r(t):r}},function(t,e,n){"use strict";n.r(e);var o=n(0),r=[{value:"string",label:"String"},{value:"boolean",label:"Boolean"},{value:"number",label:"Number"},{value:"object",label:"Object"},{value:"date",label:"Date"},{value:"array",label:"Array"},{value:"color",label:"Color"}];function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(){var t=new WeakSet;return function(e,n){if("object"===i(n)&&null!==n){if(t.has(n))return"[Circular]";t.add(n)}return n}}function u(t){return"object"===i(t)?Object.keys(t).reduce((function(e,n){var o=t[n];switch(i(o)){case"object":Object.keys(o).length>5?e[n]="[Object]":e[n]=function(t){return JSON.stringify(t||{},a())}(o);break;case"function":e[n]="[Function]";break;case"bigint":case"number":e[n]=o;break;case"string":case"symbol":case"undefined":e[n]=o;break;default:e[n]="[Unknown]"}return e}),{}):JSON.stringify(t||{},a())}function s(t,e){return t.filter((function(t){return t.parameters.contextName===e})).reduce((function(t,e){return e.parameters.contextInputs.forEach((function(n){t[n.label]={id:n.id,type:e["intype-"+n.label]||"*"}})),t}),{})}function c(t,e){return t.filter((function(t){return t.parameters.contextName===e})).reduce((function(t,e){return e.parameters.contextInputs.forEach((function(n){t[n.label]={id:n.id,type:e["proptype-"+n.label]||"*"}})),t}),{})}var p=n(1),l=n.n(p);function d(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return f(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var o=0,r=function(){};return{s:r,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}var m={store:null,componentId:null,componentName:null};function y(t,e){if(!window.data_context_context||!window.data_context_context[t])return m;var n=e.componentOwner.id;if(window.data_context_context[t][n])return window.data_context_context[t][n];var o=e.componentOwner.popupParent;return o?window.data_context_context[t][o.id]?window.data_context_context[t][o.id]:y(t,o.nodeScope):e.componentOwner.parentNodeScope?y(t,e.componentOwner.parentNodeScope):e.componentOwner.parent?y(t,e.componentOwner.parent.nodeScope):m}var g=Object(o.defineNode)({name:"data_context.context",displayName:"Context",useInputAsLabel:"contextName",color:"green",initialize:function(){var t=this;this.scheduleAfterInputsHaveUpdated((function(){var e=t._inputValues.contextName,n=t._inputValues.contextInputs,o=n?n.reduce((function(e,n){return e[n.label]=t.model.parameters["in-"+n.label],e}),{}):{};!function(t,e,n){window.data_context_context||(window.data_context_context={}),window.data_context_context[t]||(window.data_context_context[t]={});var o=e.componentOwner.id;window.data_context_context[t][o]={store:l()((function(){return n})),componentId:e.componentOwner.id,componentName:e.componentOwner.name}}(e,t.nodeScope,o)}))},inputs:{contextName:{type:{name:"string",identifierOf:"data_context.context",identifierDisplayName:"Contexts"},displayName:"Context Name",group:"General"},contextInputs:{type:{name:"proplist",allowEditOnly:!0},group:"Properties",set:function(t){}}},getInspectInfo:function(){var t=y(this._inputValues.contextName,this.nodeScope).store;return t?[{type:"value",value:"Current values:"},{type:"value",value:u(t.getState())}]:"[No value set]"},setup:function(t,e){t.editorConnection&&t.editorConnection.isRunningLocally()&&e.on("editorImportComplete",(function(){e.on("nodeAdded.data_context.context",(function(e){h(t,e)}));var n,o=d(e.getNodesWithType("data_context.context"));try{for(o.s();!(n=o.n()).done;){var r=n.value;h(t,r)}}catch(t){o.e(t)}finally{o.f()}}))}});function h(t,e){function n(){var n=[];e.parameters.contextInputs&&e.parameters.contextInputs.length>0&&e.parameters.contextInputs.forEach((function(t){n.push({name:"intype-"+t.label,displayName:"Type",editorName:t.label+" | Type",plug:"input",type:{name:"enum",enums:r,allowEditOnly:!0},default:"string",parent:"contextInputs",parentItemId:t.id}),n.push({name:"in-"+t.label,displayName:t.label,plug:"input",type:e.parameters["intype-"+t.label]||"string",group:"Inputs"})})),t.editorConnection.sendDynamicPorts(e.id,n)}n(),e.on("parameterUpdated",(function(t){n()}))}var b=Object(o.defineNode)({name:"data_context.getState",displayName:"Get State",useInputAsLabel:"contextName",color:"green",inputs:{contextName:{type:{name:"string",identifierOf:"data_context.context",identifierDisplayName:"Contexts"},displayName:"Context Name",group:"General"}},outputs:{success:{type:"signal",displayName:"Success",group:"Events"},failure:{type:"signal",displayName:"Failure",group:"Events"}},initialize:function(){this._internal={outputValues:{}}},signals:{Fetch:function(){var t=this;try{var e=y(this._inputValues.contextName,this.nodeScope),n=e.store,o=e.componentId,r=e.componentName;this._internal.context={componentId:o,componentName:r},!function(e){Object.keys(e).forEach((function(n){t.registerOutputIfNeeded("prop-"+n),t._internal.outputValues[n]=e[n],t.flagOutputDirty("prop-"+n)}))}(n.getState()),this.sendSignalOnOutput("success")}catch(t){console.error(t),this.sendSignalOnOutput("failure")}}},methods:{registerOutputIfNeeded:function(t){if(!this.hasOutput(t))return this.registerOutput(t,{getter:function(t){return this._internal.outputValues[t]}.bind(this,t.substring("prop-".length))})}},getInspectInfo:function(){return[{type:"value",value:"Using context:"},{type:"value",value:this._internal.context||{}},{type:"value",value:"Current values:"},{type:"value",value:u(this._internal.outputValues)}]},setup:function(t,e){t.editorConnection&&t.editorConnection.isRunningLocally()&&e.on("editorImportComplete",(function(){function n(n,o){var r=o.name,i=o.value;o.state;"contextName"===r&&v(n,c(e.getNodesWithType("data_context.context"),i),t)}function o(n){var o=n.parameters.contextName,r=c(e.getNodesWithType("data_context.context"),o);e.getNodesWithType("data_context.getState").filter((function(t){return t.parameters.contextName===o})).forEach((function(e){v(e,r,t)}))}e.on("nodeAdded.data_context.getState",(function(o){var r=e.getNodesWithType("data_context.context");if(o.parameters.contextName){var i=c(r,o.parameters.contextName);v(o,i,t)}o.on("parameterUpdated",(function(t){return n(o,t)}))})),e.on("nodeAdded.data_context.context",(function(t){t.on("parameterUpdated",(function(){return o(t)})),t.on("nodeRemoved",(function(){return o(t)}))})),e.getNodesWithType("data_context.getState").forEach((function(t){o(t),t.on("parameterUpdated",(function(e){return n(t,e)}))}))}))}});function v(t,e,n){var o=[];for(var i in e)o.push({name:"proptype-"+i,displayName:"Type",editorName:i+" | Type",plug:"input",type:{name:"enum",enums:r,allowEditOnly:!0},default:"string",parent:"contextInputs",parentItemId:e[i].id}),o.push({name:"prop-"+i,displayName:i,plug:"output",type:e[i].type,group:"Properties"});n.editorConnection.sendDynamicPorts(t.id,o,{detectRenamed:{plug:"output"}})}function x(t){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function N(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function _(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==x(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!==x(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===x(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var O=Object(o.defineNode)({name:"data_context.setState",displayName:"Set State",useInputAsLabel:"contextName",color:"green",inputs:{contextName:{type:{name:"string",identifierOf:"data_context.context",identifierDisplayName:"Contexts"},displayName:"Context Name",group:"General"}},outputs:{success:{type:"signal",displayName:"Success",group:"Events"},failure:{type:"signal",displayName:"Failure",group:"Events"}},signals:{Do:function(){var t=this._internal,e=y(this._inputValues.contextName,this.nodeScope).store;e?(e.setState((function(e){return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?N(Object(n),!0).forEach((function(e){_(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},t)})),this.sendSignalOnOutput("success")):this.sendSignalOnOutput("failure")}},methods:{registerInputIfNeeded:function(t){this.hasInput(t)||t.startsWith("prop-")&&this.registerInput(t,{set:function(e){var n=t.substring("prop-".length);this._internal[n]=e}})}},getInspectInfo:function(){var t=y(this._inputValues.contextName,this.nodeScope);return[{type:"value",value:"Will update:"},{type:"value",value:{componentId:t.componentId,componentName:t.componentName}}]},setup:function(t,e){t.editorConnection&&t.editorConnection.isRunningLocally()&&e.on("editorImportComplete",(function(){function n(n,o){var r=o.name,i=o.value;o.state;"contextName"===r&&S(n,s(e.getNodesWithType("data_context.context"),i),t)}function o(n){var o=n.parameters.contextName,r=s(e.getNodesWithType("data_context.context"),o);e.getNodesWithType("data_context.setState").filter((function(t){return t.parameters.contextName===o})).forEach((function(e){S(e,r,t)}))}e.on("nodeAdded.data_context.setState",(function(o){var r=e.getNodesWithType("data_context.context");if(o.parameters.contextName){var i=s(r,o.parameters.contextName);S(o,i,t)}o.on("parameterUpdated",(function(t){return n(o,t)}))})),e.on("nodeAdded.data_context.context",(function(t){t.on("parameterUpdated",(function(){return o(t)})),t.on("nodeRemoved",(function(){return o(t)}))})),e.getNodesWithType("data_context.setState").forEach((function(t){o(t),t.on("parameterUpdated",(function(e){return n(t,e)}))}))}))}});function S(t,e,n){var o=[];for(var r in e)o.push({name:"prop-"+r,displayName:r,plug:"input",type:{name:e[r].type,allowConnectionsOnly:!0},group:"Properties"});n.editorConnection.sendDynamicPorts(t.id,o,{detectRenamed:{plug:"input/output"}})}var I=Object(o.defineNode)({name:"data_context.subscriber",displayName:"Subscriber",useInputAsLabel:"contextName",color:"green",inputs:{contextName:{type:{name:"string",identifierOf:"data_context.context",identifierDisplayName:"Contexts"},displayName:"Context Name",group:"General"}},outputs:{contextName:{type:"string",displayName:"Context Name",group:"Subscriber"},isSubscribed:{type:"boolean",displayName:"Is Subscribed",group:"Subscriber"},subscribed:{type:"signal",displayName:"Subscribed",group:"Events"},changed:{type:"signal",displayName:"Changed",group:"Events"}},initialize:function(){this._internal={outputValues:{}},this.setOutputs({isSubscribed:!1});var t=this;this._internal.updateState=function(e){Object.keys(e).forEach((function(n){t.registerOutputIfNeeded("prop-"+n),t._internal.outputValues[n]=e[n],t.flagOutputDirty("prop-"+n)})),t.sendSignalOnOutput("changed")},this.scheduleAfterInputsHaveUpdated((function(){t.subscribe()}))},signals:{Resubscribe:function(){this.unsubscribe(),this.subscribe()}},changed:{contextName:function(){this.setOutputs({contextName:this._inputValues.contextName}),this.unsubscribe(),this.subscribe()}},methods:{unsubscribe:function(){this._internal.store&&(this._internal.store.unsubscribe(this._internal.updateState),this._internal.store=null,this._internal.context={componentId:null,componentName:null},this._internal.outputValues={},this.flagDirty(),this.setOutputs({isSubscribed:!1}))},subscribe:function(){var t=y(this._inputValues.contextName,this.nodeScope),e=t.store,n=t.componentId,o=t.componentName;if(e){this._internal.store=e,this._internal.context={componentId:n,componentName:o},e.subscribe(this._internal.updateState);var r=e.getState();this._internal.updateState(r),this.setOutputs({isSubscribed:!0}),this.sendSignalOnOutput("subscribed")}},registerOutputIfNeeded:function(t){if(!this.hasOutput(t))return this.registerOutput(t,{getter:function(t){return this._internal.outputValues[t]}.bind(this,t.substring("prop-".length))})}},getInspectInfo:function(){return[{type:"value",value:"Using context:"},{type:"value",value:this._internal.context},{type:"value",value:"Current values:"},{type:"value",value:u(this._internal.outputValues)}]},setup:function(t,e){t.editorConnection&&t.editorConnection.isRunningLocally()&&e.on("editorImportComplete",(function(){function n(n,o){var r=o.name,i=o.value;o.state;"contextName"===r&&j(n,c(e.getNodesWithType("data_context.context"),i),t)}function o(n){var o=n.parameters.contextName,r=c(e.getNodesWithType("data_context.context"),o);e.getNodesWithType("data_context.subscriber").filter((function(t){return t.parameters.contextName===o})).forEach((function(e){j(e,r,t)}))}e.on("nodeAdded.data_context.subscriber",(function(o){var r=e.getNodesWithType("data_context.context");if(o.parameters.contextName){var i=c(r,o.parameters.contextName);j(o,i,t)}o.on("parameterUpdated",(function(t){return n(o,t)}))})),e.on("nodeAdded.data_context.context",(function(t){t.on("parameterUpdated",(function(){return o(t)})),t.on("nodeRemoved",(function(){return o(t)}))})),e.getNodesWithType("data_context.subscriber").forEach((function(t){o(t),t.on("parameterUpdated",(function(e){return n(t,e)}))}))}))}});function j(t,e,n){var o=[];for(var i in e)o.push({name:"proptype-"+i,displayName:"Type",editorName:i+" | Type",plug:"input",type:{name:"enum",enums:r,allowEditOnly:!0},default:"string",parent:"contextInputs",parentItemId:e[i].id}),o.push({name:"prop-"+i,displayName:i,plug:"output",type:e[i].type,group:"Properties"});n.editorConnection.sendDynamicPorts(t.id,o,{detectRenamed:{plug:"output"}})}Object(o.defineModule)({nodes:[g,b,O,I]})}]);
//# sourceMappingURL=index.js.map