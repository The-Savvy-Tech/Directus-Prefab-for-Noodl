{"name":"Directus Prefab Reference","components":[{"name":"/#Directus/Directus Prefab/Components/Admin/Directus - Get Collections","id":"5f692427-d474-69fb-7eb8-54a40551b2de","graph":{"connections":[{"fromId":"7bb1cdbf-93fc-51a0-8338-e4a9f515a77a","fromProperty":"Collection","toId":"368676fd-c35d-e16f-c30f-9e3a1932eb79","toProperty":"value"},{"fromId":"368676fd-c35d-e16f-c30f-9e3a1932eb79","fromProperty":"savedValue","toId":"d696e9b3-ca45-c20b-e149-5c17ab08e478","toProperty":"in-collection"},{"fromId":"7bb1cdbf-93fc-51a0-8338-e4a9f515a77a","fromProperty":"SDK Client to use","toId":"5474d1a9-1c52-26c1-1cad-16776dc15662","toProperty":"currentState"},{"fromId":"5474d1a9-1c52-26c1-1cad-16776dc15662","fromProperty":"currentState","toId":"7e20ba03-e226-eefe-171e-8b2de2a064fa","toProperty":"in-SDKClient"},{"fromId":"7e20ba03-e226-eefe-171e-8b2de2a064fa","fromProperty":"out-Done","toId":"d696e9b3-ca45-c20b-e149-5c17ab08e478","toProperty":"run"},{"fromId":"d696e9b3-ca45-c20b-e149-5c17ab08e478","fromProperty":"out-Done","toId":"85121c14-4db9-3c6c-9575-aae405327eb2","toProperty":"start"},{"fromId":"7bb1cdbf-93fc-51a0-8338-e4a9f515a77a","fromProperty":"Do","toId":"82d14272-e17e-01a0-13ba-7a691b759f0c","toProperty":"start"},{"fromId":"82d14272-e17e-01a0-13ba-7a691b759f0c","fromProperty":"timerFinished","toId":"7e20ba03-e226-eefe-171e-8b2de2a064fa","toProperty":"run"},{"fromId":"85121c14-4db9-3c6c-9575-aae405327eb2","fromProperty":"timerFinished","toId":"9898d7cb-c156-e740-c11f-111acf5d751c","toProperty":"GetData"},{"fromId":"9898d7cb-c156-e740-c11f-111acf5d751c","fromProperty":"Success","toId":"c3a127ee-e2f0-a1f7-6175-28c767991831","toProperty":"Success"},{"fromId":"9898d7cb-c156-e740-c11f-111acf5d751c","fromProperty":"Failure","toId":"c3a127ee-e2f0-a1f7-6175-28c767991831","toProperty":"Failure"},{"fromId":"9898d7cb-c156-e740-c11f-111acf5d751c","fromProperty":"result","toId":"c3a127ee-e2f0-a1f7-6175-28c767991831","toProperty":"result"},{"fromId":"9898d7cb-c156-e740-c11f-111acf5d751c","fromProperty":"error","toId":"c3a127ee-e2f0-a1f7-6175-28c767991831","toProperty":"error"},{"fromId":"d696e9b3-ca45-c20b-e149-5c17ab08e478","fromProperty":"out-collection","toId":"9898d7cb-c156-e740-c11f-111acf5d751c","toProperty":"collection"},{"fromId":"5474d1a9-1c52-26c1-1cad-16776dc15662","fromProperty":"currentState","toId":"9898d7cb-c156-e740-c11f-111acf5d751c","toProperty":"client"},{"fromId":"7bb1cdbf-93fc-51a0-8338-e4a9f515a77a","fromProperty":"Collections to get","toId":"90fc873c-e01b-c690-5d03-0dfe4b88e745","toProperty":"currentState"},{"fromId":"90fc873c-e01b-c690-5d03-0dfe4b88e745","fromProperty":"currentState","toId":"d696e9b3-ca45-c20b-e149-5c17ab08e478","toProperty":"in-what_to_get"},{"fromId":"d696e9b3-ca45-c20b-e149-5c17ab08e478","fromProperty":"out-operation","toId":"9898d7cb-c156-e740-c11f-111acf5d751c","toProperty":"operation"}],"roots":[{"id":"7bb1cdbf-93fc-51a0-8338-e4a9f515a77a","type":"Component Inputs","x":-1079.0081231748763,"y":100.90636972116886,"parameters":{},"ports":[{"name":"Do","plug":"output","type":"*","index":0},{"name":"Collection","plug":"output","type":{"name":"*"},"group":"Config","index":3},{"name":"SDK Client to use","plug":"output","type":{"name":"*"},"group":"Config","index":1},{"name":"Collections to get","plug":"output","type":{"name":"*"},"group":"Config","index":2}],"dynamicports":[],"children":[]},{"id":"c3a127ee-e2f0-a1f7-6175-28c767991831","type":"Component Outputs","x":515.0278684333703,"y":281.160111934135,"parameters":{},"ports":[{"name":"Success","plug":"input","type":"*","index":0},{"name":"Failure","plug":"input","type":"*","index":1},{"name":"error","plug":"input","type":{"name":"*"},"index":3},{"name":"result","plug":"input","type":{"name":"*"},"index":2}],"dynamicports":[],"children":[]},{"id":"368676fd-c35d-e16f-c30f-9e3a1932eb79","type":"String","label":"Collection","x":-722.0332761000394,"y":361.13167799207196,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"d696e9b3-ca45-c20b-e149-5c17ab08e478","type":"JavaScriptFunction","x":-254.86883361498792,"y":41.91530084178885,"parameters":{"functionScript":"const what_to_get = Inputs.what_to_get || null;\r\nconst collection = Inputs.collection || null;\r\n\r\nlet operation = \"all\";\r\n\r\nif (what_to_get) {\r\n    switch (what_to_get) {\r\n        case 'All':\r\n            break;\r\n        case 'Single':\r\n            operation = \"single\";\r\n            if (!collection) throw new Error(\"Collection is required!\")\r\n            break;\r\n    }\r\n\r\n    Outputs.operation = operation;\r\n    Outputs.collection = collection;\r\n    Outputs.Done();\r\n}\r\n"},"ports":[],"dynamicports":[{"name":"in-what_to_get","displayName":"what_to_get","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-collection","displayName":"collection","plug":"input","type":"*","group":"Inputs","index":5},{"name":"out-Done","displayName":"Done","plug":"output","type":"signal","group":"Outputs","index":6},{"name":"out-operation","displayName":"operation","plug":"output","type":"*","group":"Outputs","index":7},{"name":"out-collection","displayName":"collection","plug":"output","type":"*","group":"Outputs","index":8}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"5474d1a9-1c52-26c1-1cad-16776dc15662","type":"States","label":"Client type","x":-718.8506931928334,"y":37.23896749460039,"parameters":{"states":"User SDK Client,Site SDK Client","useTransitions":false},"ports":[],"dynamicports":[{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To User SDK Client","name":"to-User SDK Client","group":"Go to state","index":6},{"plug":"output","type":"boolean","displayName":"At User SDK Client","name":"at-User SDK Client","group":"Current state","index":7},{"plug":"output","type":"signal","displayName":"Has Reached User SDK Client","name":"reached-User SDK Client","group":"Current state","index":8},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To Site SDK Client","name":"to-Site SDK Client","group":"Go to state","index":9},{"plug":"output","type":"boolean","displayName":"At Site SDK Client","name":"at-Site SDK Client","group":"Current state","index":10},{"plug":"output","type":"signal","displayName":"Has Reached Site SDK Client","name":"reached-Site SDK Client","group":"Current state","index":11},{"plug":"input","type":{"name":"enum","enums":["User SDK Client","Site SDK Client"]},"group":"States","displayName":"State","name":"currentState","default":"User SDK Client","index":12}],"children":[]},{"id":"7e20ba03-e226-eefe-171e-8b2de2a064fa","type":"JavaScriptFunction","x":-480.61664838642173,"y":-21.01383290325157,"parameters":{"functionScript":"const state = Inputs.SDKClient ?? null;\r\n\r\nlet res = true;\r\n\r\nif(state == \"Site SDK Client\"){\r\n    const client = Noodl.Objects.DirectusSDK.SiteClient || null;\r\n    if(!client){\r\n        res = false;\r\n        throw new Error(\"Directus Site Client has not yet been set up!\");\r\n    }\r\n}\r\n\r\nif(state == \"User SDK Client\"){\r\n    const client = Noodl.Objects.DirectusSDK.Client || null;\r\n    if(!client){ \r\n        res = false;\r\n        throw new Error(\"Directus User Client has not yet been set up!\");\r\n    }\r\n}\r\n\r\nif(res){\r\n    Outputs.Done();\r\n}"},"ports":[],"dynamicports":[{"name":"in-SDKClient","displayName":"SDKClient","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-Done","displayName":"Done","plug":"output","type":"signal","group":"Outputs","index":5}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"85121c14-4db9-3c6c-9575-aae405327eb2","type":"Timer","x":-19.475742653395628,"y":81.6607931070576,"parameters":{"duration":100},"ports":[],"dynamicports":[],"children":[]},{"id":"82d14272-e17e-01a0-13ba-7a691b759f0c","type":"Timer","x":-718,"y":-48,"parameters":{"duration":100},"ports":[],"dynamicports":[],"children":[]},{"id":"9898d7cb-c156-e740-c11f-111acf5d751c","type":"Javascript2","x":281.42005339425987,"y":280.5398400765414,"parameters":{"code":"Script.Inputs = {\r\n    client: \"string\",\r\n    collection: \"string\",\r\n    operation: \"string\"\r\n}\r\n\r\n\r\nScript.Signals.GetData = async function () {\r\n\r\n    const client_selection = Script.Inputs.client || null;\r\n    const sdk_client = (client_selection == \"User SDK Client\") ? Noodl.Objects.DirectusSDK.Client : Noodl.Objects.DirectusSDK.SiteClient;\r\n\r\n    const collection = Script.Inputs.collection || null;\r\n    const operation = Script.Inputs.operation || null;\r\n\r\n    try {\r\n        if (sdk_client && operation) {\r\n            let result;\r\n            switch (operation) {\r\n                case \"single\":\r\n                    if(!collection) throw new Error(\"Provide valid Collection!\");\r\n                    result = await sdk_client.request(Directus.readCollection(collection));\r\n                    break;\r\n                case \"all\":\r\n                    result = await sdk_client.request(Directus.readCollections());\r\n                    break;\r\n            }\r\n            \r\n            Script.Outputs.result = result;\r\n            if (result) {\r\n                Script.Outputs.Success();\r\n            } else {\r\n                Script.Outputs.Failure();\r\n            }\r\n        } else {\r\n            console.error(err);\r\n\r\n            Script.Outputs.error = \"Invalid configuration!\";\r\n            Script.Outputs.Failure();\r\n        }\r\n\r\n    } catch (err) {\r\n        console.error(err);\r\n\r\n        Script.Outputs.error = err?.errors.map(i => i.message).join(\"\\n\") ?? JSON.stringify(err);\r\n        Script.Outputs.Failure();\r\n    }\r\n}\r\n"},"ports":[],"dynamicports":[{"name":"client","plug":"input","type":{"name":"string"},"group":"Inputs","index":5},{"name":"collection","plug":"input","type":{"name":"string"},"group":"Inputs","index":6},{"name":"operation","plug":"input","type":{"name":"string"},"group":"Inputs","index":7},{"name":"GetData","plug":"input","type":{"name":"signal"},"group":"Inputs","index":8},{"name":"Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":9},{"name":"Failure","displayName":"Failure","plug":"output","type":"signal","group":"Outputs","index":10},{"name":"result","displayName":"result","plug":"output","type":"*","group":"Outputs","index":11},{"name":"error","displayName":"error","plug":"output","type":"*","group":"Outputs","index":12}],"children":[],"metadata":{"merge":{"soureCodePorts":["code"]}}},{"id":"90fc873c-e01b-c690-5d03-0dfe4b88e745","type":"States","x":-720.1412957667296,"y":249.48123674814588,"parameters":{"states":"All,Single","useTransitions":false},"ports":[],"dynamicports":[{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To All","name":"to-All","group":"Go to state","index":6},{"plug":"output","type":"boolean","displayName":"At All","name":"at-All","group":"Current state","index":7},{"plug":"output","type":"signal","displayName":"Has Reached All","name":"reached-All","group":"Current state","index":8},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To Single","name":"to-Single","group":"Go to state","index":9},{"plug":"output","type":"boolean","displayName":"At Single","name":"at-Single","group":"Current state","index":10},{"plug":"output","type":"signal","displayName":"Has Reached Single","name":"reached-Single","group":"Current state","index":11},{"plug":"input","type":{"name":"enum","enums":["All","Single"]},"group":"States","displayName":"State","name":"currentState","default":"All","index":12}],"children":[]}],"visualRoots":[]}},{"name":"/#Directus/Directus Prefab/Components/Admin/Directus - Get Fields","id":"cc50f344-7469-60ef-437c-ab971a72fd82","graph":{"connections":[{"fromId":"e1572e04-11eb-56e3-8468-9129ff8a07d4","fromProperty":"Collection","toId":"c8336485-be50-cd97-8bad-255e36ddeda9","toProperty":"value"},{"fromId":"c8336485-be50-cd97-8bad-255e36ddeda9","fromProperty":"savedValue","toId":"18365d54-3062-b13e-fd06-7b15e96d9a1e","toProperty":"in-collection"},{"fromId":"e1572e04-11eb-56e3-8468-9129ff8a07d4","fromProperty":"SDK Client to use","toId":"27bcdf1a-9b99-4ffd-ba2f-a573384de9b8","toProperty":"currentState"},{"fromId":"27bcdf1a-9b99-4ffd-ba2f-a573384de9b8","fromProperty":"currentState","toId":"03769b27-2a18-9710-6aaf-224bb3fdd09d","toProperty":"in-SDKClient"},{"fromId":"03769b27-2a18-9710-6aaf-224bb3fdd09d","fromProperty":"out-Done","toId":"18365d54-3062-b13e-fd06-7b15e96d9a1e","toProperty":"run"},{"fromId":"18365d54-3062-b13e-fd06-7b15e96d9a1e","fromProperty":"out-Done","toId":"2291fa73-1181-6214-13f9-99a705195140","toProperty":"start"},{"fromId":"e1572e04-11eb-56e3-8468-9129ff8a07d4","fromProperty":"Do","toId":"6e753f0d-1c79-eb4b-be15-2ba72d737d81","toProperty":"start"},{"fromId":"6e753f0d-1c79-eb4b-be15-2ba72d737d81","fromProperty":"timerFinished","toId":"03769b27-2a18-9710-6aaf-224bb3fdd09d","toProperty":"run"},{"fromId":"2291fa73-1181-6214-13f9-99a705195140","fromProperty":"timerFinished","toId":"0f0d6a10-082c-0b00-27fa-ea4415150859","toProperty":"GetData"},{"fromId":"0f0d6a10-082c-0b00-27fa-ea4415150859","fromProperty":"Success","toId":"04191019-289b-68d8-1f6a-8fcad94f6c1b","toProperty":"Success"},{"fromId":"0f0d6a10-082c-0b00-27fa-ea4415150859","fromProperty":"Failure","toId":"04191019-289b-68d8-1f6a-8fcad94f6c1b","toProperty":"Failure"},{"fromId":"0f0d6a10-082c-0b00-27fa-ea4415150859","fromProperty":"result","toId":"04191019-289b-68d8-1f6a-8fcad94f6c1b","toProperty":"result"},{"fromId":"0f0d6a10-082c-0b00-27fa-ea4415150859","fromProperty":"error","toId":"04191019-289b-68d8-1f6a-8fcad94f6c1b","toProperty":"error"},{"fromId":"18365d54-3062-b13e-fd06-7b15e96d9a1e","fromProperty":"out-collection","toId":"0f0d6a10-082c-0b00-27fa-ea4415150859","toProperty":"collection"},{"fromId":"27bcdf1a-9b99-4ffd-ba2f-a573384de9b8","fromProperty":"currentState","toId":"0f0d6a10-082c-0b00-27fa-ea4415150859","toProperty":"client"},{"fromId":"e1572e04-11eb-56e3-8468-9129ff8a07d4","fromProperty":"Fields to get","toId":"47d30c04-f252-5d75-4d46-c74b03b2f0a9","toProperty":"currentState"},{"fromId":"47d30c04-f252-5d75-4d46-c74b03b2f0a9","fromProperty":"currentState","toId":"18365d54-3062-b13e-fd06-7b15e96d9a1e","toProperty":"in-what_to_get"},{"fromId":"18365d54-3062-b13e-fd06-7b15e96d9a1e","fromProperty":"out-operation","toId":"0f0d6a10-082c-0b00-27fa-ea4415150859","toProperty":"operation"},{"fromId":"e1572e04-11eb-56e3-8468-9129ff8a07d4","fromProperty":"Field","toId":"330654a3-f6db-05ea-511b-f47dd7a794d8","toProperty":"value"},{"fromId":"330654a3-f6db-05ea-511b-f47dd7a794d8","fromProperty":"savedValue","toId":"18365d54-3062-b13e-fd06-7b15e96d9a1e","toProperty":"in-field"},{"fromId":"18365d54-3062-b13e-fd06-7b15e96d9a1e","fromProperty":"out-field","toId":"0f0d6a10-082c-0b00-27fa-ea4415150859","toProperty":"field"}],"roots":[{"id":"e1572e04-11eb-56e3-8468-9129ff8a07d4","type":"Component Inputs","x":-1079.0081231748763,"y":100.90636972116886,"parameters":{},"ports":[{"name":"Do","plug":"output","type":"*","index":0},{"name":"Collection","plug":"output","type":{"name":"*"},"group":"Config","index":3},{"name":"SDK Client to use","plug":"output","type":{"name":"*"},"group":"Config","index":1},{"name":"Fields to get","plug":"output","type":{"name":"*"},"group":"Config","index":2},{"name":"Field","plug":"output","type":{"name":"*"},"group":"Config","index":4}],"dynamicports":[],"children":[]},{"id":"04191019-289b-68d8-1f6a-8fcad94f6c1b","type":"Component Outputs","x":510.0257307557713,"y":279.1592568630955,"parameters":{},"ports":[{"name":"Success","plug":"input","type":"*","index":0},{"name":"Failure","plug":"input","type":"*","index":1},{"name":"error","plug":"input","type":{"name":"*"},"index":3},{"name":"result","plug":"input","type":{"name":"*"},"index":2}],"dynamicports":[],"children":[]},{"id":"c8336485-be50-cd97-8bad-255e36ddeda9","type":"String","label":"Collection","x":-722.0332761000394,"y":361.13167799207196,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"18365d54-3062-b13e-fd06-7b15e96d9a1e","type":"JavaScriptFunction","x":-245.86498579530996,"y":230.99610505502676,"parameters":{"functionScript":"const what_to_get = Inputs.what_to_get || null;\r\nconst collection = Inputs.collection || null;\r\nconst field = Inputs.field || null;\r\n\r\nlet operation = \"all\";\r\nlet collection_out = null;\r\nlet field_out = null;\r\n\r\nif (what_to_get) {\r\n    switch (what_to_get) {\r\n        case 'All':\r\n            operation = \"all\";\r\n            collection_out = null;\r\n            field_out = null;\r\n            break;\r\n        case 'Fields in a Collection':\r\n            operation = \"fields_in_collection\";\r\n            collection_out = collection;\r\n            field_out = null;\r\n            break;\r\n        case 'Single':\r\n            operation = \"single\";\r\n            collection_out = collection;\r\n            field_out = field;\r\n            if (!collection) throw new Error(\"Collection is required!\")\r\n            break;\r\n    }\r\n\r\n    Outputs.operation = operation;\r\n    Outputs.collection = collection_out;\r\n    Outputs.field = field_out;\r\n    Outputs.Done();\r\n}\r\n"},"ports":[],"dynamicports":[{"name":"in-what_to_get","displayName":"what_to_get","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-collection","displayName":"collection","plug":"input","type":"*","group":"Inputs","index":5},{"name":"in-field","displayName":"field","plug":"input","type":"*","group":"Inputs","index":6},{"name":"out-Done","displayName":"Done","plug":"output","type":"signal","group":"Outputs","index":7},{"name":"out-operation","displayName":"operation","plug":"output","type":"*","group":"Outputs","index":8},{"name":"out-collection","displayName":"collection","plug":"output","type":"*","group":"Outputs","index":9},{"name":"out-field","displayName":"field","plug":"output","type":"*","group":"Outputs","index":10}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"27bcdf1a-9b99-4ffd-ba2f-a573384de9b8","type":"States","label":"Client type","x":-718.8506931928334,"y":37.23896749460039,"parameters":{"states":"User SDK Client,Site SDK Client","useTransitions":false},"ports":[],"dynamicports":[{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To User SDK Client","name":"to-User SDK Client","group":"Go to state","index":6},{"plug":"output","type":"boolean","displayName":"At User SDK Client","name":"at-User SDK Client","group":"Current state","index":7},{"plug":"output","type":"signal","displayName":"Has Reached User SDK Client","name":"reached-User SDK Client","group":"Current state","index":8},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To Site SDK Client","name":"to-Site SDK Client","group":"Go to state","index":9},{"plug":"output","type":"boolean","displayName":"At Site SDK Client","name":"at-Site SDK Client","group":"Current state","index":10},{"plug":"output","type":"signal","displayName":"Has Reached Site SDK Client","name":"reached-Site SDK Client","group":"Current state","index":11},{"plug":"input","type":{"name":"enum","enums":["User SDK Client","Site SDK Client"]},"group":"States","displayName":"State","name":"currentState","default":"User SDK Client","index":12}],"children":[]},{"id":"03769b27-2a18-9710-6aaf-224bb3fdd09d","type":"JavaScriptFunction","x":-480.61664838642173,"y":-21.01383290325157,"parameters":{"functionScript":"const state = Inputs.SDKClient ?? null;\r\n\r\nlet res = true;\r\n\r\nif(state == \"Site SDK Client\"){\r\n    const client = Noodl.Objects.DirectusSDK.SiteClient || null;\r\n    if(!client){\r\n        res = false;\r\n        throw new Error(\"Directus Site Client has not yet been set up!\");\r\n    }\r\n}\r\n\r\nif(state == \"User SDK Client\"){\r\n    const client = Noodl.Objects.DirectusSDK.Client || null;\r\n    if(!client){ \r\n        res = false;\r\n        throw new Error(\"Directus User Client has not yet been set up!\");\r\n    }\r\n}\r\n\r\nif(res){\r\n    Outputs.Done();\r\n}"},"ports":[],"dynamicports":[{"name":"in-SDKClient","displayName":"SDKClient","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-Done","displayName":"Done","plug":"output","type":"signal","group":"Outputs","index":5}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"2291fa73-1181-6214-13f9-99a705195140","type":"Timer","x":-15.474032511316409,"y":255.73518428749884,"parameters":{"duration":100},"ports":[],"dynamicports":[],"children":[]},{"id":"6e753f0d-1c79-eb4b-be15-2ba72d737d81","type":"Timer","x":-718,"y":-48,"parameters":{"duration":100},"ports":[],"dynamicports":[],"children":[]},{"id":"0f0d6a10-082c-0b00-27fa-ea4415150859","type":"Javascript2","x":281.42005339425987,"y":280.5398400765414,"parameters":{"code":"Script.Inputs = {\r\n    client: \"string\",\r\n    collection: \"string\",\r\n    operation: \"string\",\r\n    field: \"string\"\r\n}\r\n\r\n\r\nScript.Signals.GetData = async function () {\r\n\r\n    const client_selection = Script.Inputs.client || null;\r\n    const sdk_client = (client_selection == \"User SDK Client\") ? Noodl.Objects.DirectusSDK.Client : Noodl.Objects.DirectusSDK.SiteClient;\r\n\r\n    const operation = Script.Inputs.operation || null;\r\n    const collection = Script.Inputs.collection || null;\r\n    const field = Script.Inputs.field || null;\r\n\r\n    try {\r\n        if (sdk_client && operation) {\r\n            let result;\r\n            switch (operation) {\r\n                case \"single\":\r\n                    if(!collection || !field) throw new Error(\"Provide valid Data!\");\r\n                    result = await sdk_client.request(Directus.readField(collection, field));\r\n                    break;\r\n                case \"fields_in_collection\":\r\n                    if(!collection ) throw new Error(\"Provide valid Data!\");\r\n                    result = await sdk_client.request(Directus.readFieldsByCollection(collection));\r\n                    break;\r\n                case \"all\":\r\n                    result = await sdk_client.request(Directus.readFields());\r\n                    break;\r\n            }\r\n            \r\n            Script.Outputs.result = result;\r\n            if (result) {\r\n                Script.Outputs.Success();\r\n            } else {\r\n                Script.Outputs.Failure();\r\n            }\r\n        } else {\r\n            console.error(err);\r\n\r\n            Script.Outputs.error = \"Invalid configuration!\";\r\n            Script.Outputs.Failure();\r\n        }\r\n\r\n    } catch (err) {\r\n        console.error(err);\r\n\r\n        Script.Outputs.error = err?.errors.map(i => i.message).join(\"\\n\") ?? JSON.stringify(err);\r\n        Script.Outputs.Failure();\r\n    }\r\n}\r\n"},"ports":[],"dynamicports":[{"name":"client","plug":"input","type":{"name":"string"},"group":"Inputs","index":5},{"name":"collection","plug":"input","type":{"name":"string"},"group":"Inputs","index":6},{"name":"operation","plug":"input","type":{"name":"string"},"group":"Inputs","index":7},{"name":"field","plug":"input","type":{"name":"string"},"group":"Inputs","index":8},{"name":"GetData","plug":"input","type":{"name":"signal"},"group":"Inputs","index":9},{"name":"Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":10},{"name":"Failure","displayName":"Failure","plug":"output","type":"signal","group":"Outputs","index":11},{"name":"result","displayName":"result","plug":"output","type":"*","group":"Outputs","index":12},{"name":"error","displayName":"error","plug":"output","type":"*","group":"Outputs","index":13}],"children":[],"metadata":{"merge":{"soureCodePorts":["code"]}}},{"id":"47d30c04-f252-5d75-4d46-c74b03b2f0a9","type":"States","x":-720.1412957667296,"y":249.48123674814588,"parameters":{"states":"All,Fields in a Collection,Single","useTransitions":false},"ports":[],"dynamicports":[{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To All","name":"to-All","group":"Go to state","index":6},{"plug":"output","type":"boolean","displayName":"At All","name":"at-All","group":"Current state","index":7},{"plug":"output","type":"signal","displayName":"Has Reached All","name":"reached-All","group":"Current state","index":8},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To Fields in a Collection","name":"to-Fields in a Collection","group":"Go to state","index":9},{"plug":"output","type":"boolean","displayName":"At Fields in a Collection","name":"at-Fields in a Collection","group":"Current state","index":10},{"plug":"output","type":"signal","displayName":"Has Reached Fields in a Collection","name":"reached-Fields in a Collection","group":"Current state","index":11},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To Single","name":"to-Single","group":"Go to state","index":12},{"plug":"output","type":"boolean","displayName":"At Single","name":"at-Single","group":"Current state","index":13},{"plug":"output","type":"signal","displayName":"Has Reached Single","name":"reached-Single","group":"Current state","index":14},{"plug":"input","type":{"name":"enum","enums":["All","Fields in a Collection","Single"]},"group":"States","displayName":"State","name":"currentState","default":"All","index":15}],"children":[]},{"id":"330654a3-f6db-05ea-511b-f47dd7a794d8","type":"String","label":"Field","x":-729,"y":480,"parameters":{},"ports":[],"dynamicports":[],"children":[]}],"visualRoots":[]}},{"name":"/#Directus/Directus Prefab/Components/Auth/Directus - Login","id":"cf46e196-965a-40a7-92a6-1ef9fae4b3a0","graph":{"connections":[{"fromId":"e8017086-b96c-52c2-d707-f43c4acb37b9","fromProperty":"email","toId":"c188a49b-e076-da43-d1d2-0064d57c6016","toProperty":"value"},{"fromId":"e8017086-b96c-52c2-d707-f43c4acb37b9","fromProperty":"password","toId":"96af266b-06e4-a0a9-da80-1588cce45b31","toProperty":"value"},{"fromId":"c188a49b-e076-da43-d1d2-0064d57c6016","fromProperty":"savedValue","toId":"da36dfa8-dbf9-4119-c74f-935253664096","toProperty":"in-email"},{"fromId":"96af266b-06e4-a0a9-da80-1588cce45b31","fromProperty":"savedValue","toId":"da36dfa8-dbf9-4119-c74f-935253664096","toProperty":"in-password"},{"fromId":"da36dfa8-dbf9-4119-c74f-935253664096","fromProperty":"out-Failure","toId":"da3894a1-74ce-8665-6758-551a92635bae","toProperty":"Failure"},{"fromId":"da36dfa8-dbf9-4119-c74f-935253664096","fromProperty":"out-error","toId":"da3894a1-74ce-8665-6758-551a92635bae","toProperty":"error"},{"fromId":"da36dfa8-dbf9-4119-c74f-935253664096","fromProperty":"out-Success","toId":"41f1998b-95e7-9726-7df8-b7731ffac7d9","toProperty":"Do"},{"fromId":"41f1998b-95e7-9726-7df8-b7731ffac7d9","fromProperty":"Success","toId":"da3894a1-74ce-8665-6758-551a92635bae","toProperty":"Success"},{"fromId":"41f1998b-95e7-9726-7df8-b7731ffac7d9","fromProperty":"Failure","toId":"da3894a1-74ce-8665-6758-551a92635bae","toProperty":"Failure"},{"fromId":"41f1998b-95e7-9726-7df8-b7731ffac7d9","fromProperty":"error","toId":"da3894a1-74ce-8665-6758-551a92635bae","toProperty":"error"},{"fromId":"da36dfa8-dbf9-4119-c74f-935253664096","fromProperty":"out-data","toId":"da3894a1-74ce-8665-6758-551a92635bae","toProperty":"data"},{"fromId":"41f1998b-95e7-9726-7df8-b7731ffac7d9","fromProperty":"Success","toId":"4f589a9f-b573-86f7-3ccb-1c2f2174edad","toProperty":"sendEvent"},{"fromId":"e8017086-b96c-52c2-d707-f43c4acb37b9","fromProperty":"Do","toId":"da36dfa8-dbf9-4119-c74f-935253664096","toProperty":"run"}],"roots":[{"id":"e8017086-b96c-52c2-d707-f43c4acb37b9","type":"Component Inputs","x":-415,"y":-1,"parameters":{},"ports":[{"name":"Do","plug":"output","type":"*","index":0},{"name":"email","plug":"output","type":{"name":"*"},"group":"Data","index":1},{"name":"password","plug":"output","type":{"name":"*"},"group":"Data","index":2}],"dynamicports":[],"children":[]},{"id":"da3894a1-74ce-8665-6758-551a92635bae","type":"Component Outputs","x":545,"y":0,"parameters":{},"ports":[{"name":"Success","plug":"input","type":"*","index":0},{"name":"Failure","plug":"input","type":"*","index":1},{"name":"error","plug":"input","type":{"name":"*"},"index":2},{"name":"data","plug":"input","type":{"name":"*"},"index":3}],"dynamicports":[],"children":[]},{"id":"da36dfa8-dbf9-4119-c74f-935253664096","type":"JavaScriptFunction","x":62.60000000000002,"y":0.40000152587890625,"parameters":{"functionScript":"const email = Inputs.email;\r\nconst password = Inputs.password;\r\n\r\nif (!email || !password) return;\r\n\r\nconst client = Noodl.Objects.DirectusSDK?.Client ?? null;\r\n\r\nif(!client) throw new Error(\"Config Error: No SDK Client found!\");\r\n\r\nconst main = async function () {\r\n    try {\r\n        const result = await client.login(email, password);\r\n\r\n        Noodl.Objects.DirectusSDK.token = result;\r\n        Outputs.data = result;\r\n        //console.log({ result });\r\n        Outputs.Success();\r\n\r\n    } catch (err) {\r\n        console.error(err);\r\n        Outputs.error = err?.errors.map(i => i.message).join(\"\\n\");\r\n        Outputs.Failure();\r\n    }\r\n}\r\n\r\nif (client) {\r\n    main();\r\n}\r\n"},"ports":[],"dynamicports":[{"name":"in-email","displayName":"email","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-password","displayName":"password","plug":"input","type":"*","group":"Inputs","index":5},{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":6},{"name":"out-Failure","displayName":"Failure","plug":"output","type":"signal","group":"Outputs","index":7},{"name":"out-data","displayName":"data","plug":"output","type":"*","group":"Outputs","index":8},{"name":"out-error","displayName":"error","plug":"output","type":"*","group":"Outputs","index":9}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"c188a49b-e076-da43-d1d2-0064d57c6016","type":"String","label":"email","x":-168.19999999999993,"y":144.5333353678385,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"96af266b-06e4-a0a9-da80-1588cce45b31","type":"String","label":"password","x":-170,"y":240,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"41f1998b-95e7-9726-7df8-b7731ffac7d9","type":"/#Directus/Directus Prefab/Components/User/Directus - Get Current User","x":295.08000000000004,"y":-74.01333109537757,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"4f589a9f-b573-86f7-3ccb-1c2f2174edad","type":"Event Sender","x":547.5133333333333,"y":-111.77999750773108,"parameters":{"channelName":"User-Logged-In"},"ports":[],"dynamicports":[],"children":[]}],"visualRoots":[]}},{"name":"/#Directus/Directus Prefab/Components/Auth/Directus - Logout","id":"e8a7d0cc-285c-15e5-734b-645dbfabea49","graph":{"connections":[{"fromId":"ce12bfdb-bb0d-0c1e-8dc6-8d4ded330b88","fromProperty":"out-Failure","toId":"a1246363-29c7-ea68-c07e-8b8c1dfc905c","toProperty":"Failure"},{"fromId":"ce12bfdb-bb0d-0c1e-8dc6-8d4ded330b88","fromProperty":"out-error","toId":"a1246363-29c7-ea68-c07e-8b8c1dfc905c","toProperty":"error"},{"fromId":"ce12bfdb-bb0d-0c1e-8dc6-8d4ded330b88","fromProperty":"out-Success","toId":"d1699747-e838-d65b-4717-2c208d5fce1d","toProperty":"Do"},{"fromId":"d1699747-e838-d65b-4717-2c208d5fce1d","fromProperty":"Success","toId":"a1246363-29c7-ea68-c07e-8b8c1dfc905c","toProperty":"Success"},{"fromId":"d1699747-e838-d65b-4717-2c208d5fce1d","fromProperty":"Failure","toId":"a1246363-29c7-ea68-c07e-8b8c1dfc905c","toProperty":"Failure"},{"fromId":"d1699747-e838-d65b-4717-2c208d5fce1d","fromProperty":"error","toId":"a1246363-29c7-ea68-c07e-8b8c1dfc905c","toProperty":"error"},{"fromId":"ce12bfdb-bb0d-0c1e-8dc6-8d4ded330b88","fromProperty":"out-Success","toId":"2dd778a8-eeca-06fd-6638-1a89169e2751","toProperty":"sendEvent"},{"fromId":"9f1447d5-1208-78ab-83cc-49300a3e2fe1","fromProperty":"Do","toId":"ce12bfdb-bb0d-0c1e-8dc6-8d4ded330b88","toProperty":"run"}],"roots":[{"id":"9f1447d5-1208-78ab-83cc-49300a3e2fe1","type":"Component Inputs","x":837,"y":398,"parameters":{},"ports":[{"name":"Do","plug":"output","type":"*","index":0}],"dynamicports":[],"children":[]},{"id":"a1246363-29c7-ea68-c07e-8b8c1dfc905c","type":"Component Outputs","x":1568,"y":399,"parameters":{},"ports":[{"name":"Success","plug":"input","type":"*","index":0},{"name":"Failure","plug":"input","type":"*","index":1},{"name":"error","plug":"input","type":{"name":"*"},"index":2}],"dynamicports":[],"children":[]},{"id":"ce12bfdb-bb0d-0c1e-8dc6-8d4ded330b88","type":"JavaScriptFunction","x":1086,"y":399,"parameters":{"functionScript":"const client = Noodl.Objects.DirectusSDK?.Client ?? null;\r\n\r\nconst main = async function () {\r\n    try {\r\n        const result = await client.logout();\r\n\r\n        Outputs.data = result;\r\n        //console.log({ result });\r\n        Outputs.Success();\r\n        \r\n    } catch (err) {\r\n        console.error(err);\r\n        Outputs.error = err?.errors.map(i => i.message ).join(\"\\n\");\r\n        Outputs.Failure();\r\n    }\r\n}\r\n\r\nif (client) {\r\n    main();\r\n}"},"ports":[],"dynamicports":[{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":4},{"name":"out-Failure","displayName":"Failure","plug":"output","type":"signal","group":"Outputs","index":5},{"name":"out-data","displayName":"data","plug":"output","type":"*","group":"Outputs","index":6},{"name":"out-error","displayName":"error","plug":"output","type":"*","group":"Outputs","index":7}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"d1699747-e838-d65b-4717-2c208d5fce1d","type":"/#Directus/Directus Prefab/Components/User/Directus - Get Current User","x":1318,"y":325,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"2dd778a8-eeca-06fd-6638-1a89169e2751","type":"Event Sender","x":1311,"y":192,"parameters":{"channelName":"User-Logged-Out"},"ports":[],"dynamicports":[],"children":[]}],"visualRoots":[]}},{"name":"/#Directus/Directus Prefab/Components/Auth/Directus - Refresh Token","id":"19123683-81d3-5f19-10d7-ac455234fcbd","graph":{"connections":[{"fromId":"0c858e41-2d9a-09be-bd68-fbcb01fa0b35","fromProperty":"out-Success","toId":"d95a5c98-7619-3687-1f1f-ecd11f6dd61c","toProperty":"Do"},{"fromId":"d95a5c98-7619-3687-1f1f-ecd11f6dd61c","fromProperty":"Success","toId":"603c9ad7-cb7f-0352-bc2d-a8ff90f2e551","toProperty":"do"},{"fromId":"d95a5c98-7619-3687-1f1f-ecd11f6dd61c","fromProperty":"Failure","toId":"603c9ad7-cb7f-0352-bc2d-a8ff90f2e551","toProperty":"do"},{"fromId":"10fca71e-9180-b0df-2073-dbead16a6ce9","fromProperty":"stored","toId":"603c9ad7-cb7f-0352-bc2d-a8ff90f2e551","toProperty":"do"},{"fromId":"0c858e41-2d9a-09be-bd68-fbcb01fa0b35","fromProperty":"out-Failure","toId":"94653122-72bc-66b3-cdf2-1d38f45ebee6","toProperty":"run"},{"fromId":"94653122-72bc-66b3-cdf2-1d38f45ebee6","fromProperty":"out-Done","toId":"10fca71e-9180-b0df-2073-dbead16a6ce9","toProperty":"store"},{"fromId":"d95a5c98-7619-3687-1f1f-ecd11f6dd61c","fromProperty":"Success","toId":"8960f614-bed6-cd79-11ba-e9a7cfe6f39c","toProperty":"Success"},{"fromId":"d95a5c98-7619-3687-1f1f-ecd11f6dd61c","fromProperty":"Failure","toId":"8960f614-bed6-cd79-11ba-e9a7cfe6f39c","toProperty":"Failure"},{"fromId":"d95a5c98-7619-3687-1f1f-ecd11f6dd61c","fromProperty":"error","toId":"8960f614-bed6-cd79-11ba-e9a7cfe6f39c","toProperty":"error"},{"fromId":"0c858e41-2d9a-09be-bd68-fbcb01fa0b35","fromProperty":"out-error","toId":"8960f614-bed6-cd79-11ba-e9a7cfe6f39c","toProperty":"error"},{"fromId":"10fca71e-9180-b0df-2073-dbead16a6ce9","fromProperty":"stored","toId":"8960f614-bed6-cd79-11ba-e9a7cfe6f39c","toProperty":"Failure"},{"fromId":"75fc918a-a41c-7136-0c80-31580c6523be","fromProperty":"event-channel","toId":"d40848b1-fe59-b3d9-4142-f3052d8a805a","toProperty":"in-uuid"},{"fromId":"d95a5c98-7619-3687-1f1f-ecd11f6dd61c","fromProperty":"Success","toId":"d40848b1-fe59-b3d9-4142-f3052d8a805a","toProperty":"run"},{"fromId":"10fca71e-9180-b0df-2073-dbead16a6ce9","fromProperty":"stored","toId":"1ad73989-65e7-81d3-199d-4d08d3ee2cc1","toProperty":"run"},{"fromId":"75fc918a-a41c-7136-0c80-31580c6523be","fromProperty":"event-channel","toId":"1ad73989-65e7-81d3-199d-4d08d3ee2cc1","toProperty":"in-uuid"},{"fromId":"c2c0eb80-463a-ff55-0e61-1a926e39e736","fromProperty":"done","toId":"0c858e41-2d9a-09be-bd68-fbcb01fa0b35","toProperty":"run"},{"fromId":"661040db-7dce-811c-0c1e-84646e7bd93f","fromProperty":"eventReceived","toId":"6b718fe7-3d19-901a-4ff6-762a36d29a76","toProperty":"Fetch"},{"fromId":"75fc918a-a41c-7136-0c80-31580c6523be","fromProperty":"Do","toId":"6b718fe7-3d19-901a-4ff6-762a36d29a76","toProperty":"Fetch"},{"fromId":"6b718fe7-3d19-901a-4ff6-762a36d29a76","fromProperty":"Done","toId":"c2c0eb80-463a-ff55-0e61-1a926e39e736","toProperty":"do"}],"roots":[{"id":"75fc918a-a41c-7136-0c80-31580c6523be","type":"Component Inputs","x":1314,"y":862,"parameters":{},"ports":[{"name":"Do","plug":"output","type":"*","index":0},{"name":"event-channel","plug":"output","type":{"name":"*"},"index":1}],"dynamicports":[],"children":[]},{"id":"0c858e41-2d9a-09be-bd68-fbcb01fa0b35","type":"JavaScriptFunction","x":1828,"y":932,"parameters":{"functionScript":"//const client = Noodl.Objects.DirectusSDK.Client || null;\r\n\r\nconst system_retry_cycle_limit = 10; // Number of retry cycles that check if the SDK Client and the refresh method are available for use\r\nconst system_retry_cycle_duration = 1000; // Delay between each retry cycle, in milliseconds\r\n\r\nconst retry_loop_limit = 3; // Number of Request Execution loops, per retry cycle\r\nconst retry_loop_duration = 250; // Delay between each loop execution, in milliseconds\r\n\r\n////////////////////////////////////////////\r\n\r\nconst sleep = async function (ms) {\r\n    return new Promise(resolve => {\r\n        setTimeout(resolve, ms);\r\n    });\r\n}\r\n\r\nconst main = async function (client, count) {\r\n    try {\r\n        const result = await client.refresh();\r\n\r\n        Outputs.data = result;\r\n        Outputs.Success();\r\n        return true;\r\n\r\n    } catch (err) {\r\n        console.error(err);\r\n\r\n        if (count < retry_loop_limit) {\r\n            count++;\r\n            await sleep(count * retry_loop_duration);\r\n            await main();\r\n        } else {\r\n            Outputs.error = err?.errors?.map(i => i.message).join(\"\\n\");\r\n            Outputs.Failure();\r\n        }\r\n    }\r\n    return false;\r\n}\r\n\r\nlet count = 0;\r\n\r\ndo {\r\n    count++;\r\n    let condition = Boolean(Noodl.Objects[\"SDK Client set\"]) && Boolean(Noodl.Objects.DirectusSDK.Client && Boolean(Noodl.Objects.DirectusSDK.Client.refresh));\r\n\r\n    if (condition) {\r\n        const client = Noodl.Objects.DirectusSDK.Client;\r\n        const res = await main(client, count);\r\n\r\n        if (res) count = 0;\r\n\r\n    } else {\r\n        await sleep(system_retry_cycle_duration);\r\n    }\r\n\r\n} while (count > 0 && count < system_retry_cycle_limit);\r\n\r\nif(count != 0){\r\n    Outputs.error = \"System Error\";\r\n    Outputs.Failure();\r\n}"},"ports":[],"dynamicports":[{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":4},{"name":"out-Failure","displayName":"Failure","plug":"output","type":"signal","group":"Outputs","index":5},{"name":"out-data","displayName":"data","plug":"output","type":"*","group":"Outputs","index":6},{"name":"out-error","displayName":"error","plug":"output","type":"*","group":"Outputs","index":7}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"d95a5c98-7619-3687-1f1f-ecd11f6dd61c","type":"/#Directus/Directus Prefab/Components/User/Directus - Get Current User","x":2061,"y":858,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"10fca71e-9180-b0df-2073-dbead16a6ce9","type":"SetModelProperties","x":2270,"y":1047,"parameters":{"modelId":"Current User","properties":"authenticated","type-authenticated":"boolean"},"ports":[],"dynamicports":[{"type":{"name":"boolean"},"plug":"input","group":"Property Values","displayName":"authenticated","name":"prop-authenticated","index":6},{"type":{"name":"enum","enums":[{"label":"String","value":"string"},{"label":"Boolean","value":"boolean"},{"label":"Number","value":"number"},{"label":"Date","value":"date"},{"label":"Array","value":"array"},{"label":"Object","value":"object"},{"label":"Any","value":"*"}],"allowEditOnly":true},"plug":"input","group":"Property Types","displayName":"authenticated","default":"*","name":"type-authenticated","index":7}],"children":[]},{"id":"c2c0eb80-463a-ff55-0e61-1a926e39e736","type":"Set Variable","label":"Token Refresh Process = on","x":1792,"y":768,"parameters":{"name":"Token Refresh Process","setWith":"boolean","value":true},"ports":[],"dynamicports":[{"type":"boolean","plug":"input","group":"General","name":"value","displayName":"Value","index":4}],"children":[]},{"id":"603c9ad7-cb7f-0352-bc2d-a8ff90f2e551","type":"Set Variable","label":"Token Refresh Process = off","x":2597,"y":710,"parameters":{"name":"Token Refresh Process","setWith":"boolean","value":false},"ports":[],"dynamicports":[{"type":"boolean","plug":"input","group":"General","name":"value","displayName":"Value","index":4}],"children":[]},{"id":"94653122-72bc-66b3-cdf2-1d38f45ebee6","type":"JavaScriptFunction","label":"Reset User Object","x":2061,"y":1062,"parameters":{"functionScript":"const user = Noodl.Objects[\"Current User\"] || null;\r\n\r\nif(user){\r\n    const obj = user.data;\r\n    for(const property in obj){\r\n        delete obj[property];\r\n    }\r\n    user.authenticated = false\r\n    Outputs.Done();\r\n}"},"ports":[],"dynamicports":[{"name":"out-Done","displayName":"Done","plug":"output","type":"signal","group":"Outputs","index":4}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"661040db-7dce-811c-0c1e-84646e7bd93f","type":"Event Receiver","x":1315,"y":733,"parameters":{"consume":"always","channelName":"Check User Session"},"ports":[],"dynamicports":[],"children":[]},{"id":"8960f614-bed6-cd79-11ba-e9a7cfe6f39c","type":"Component Outputs","x":2632,"y":873,"parameters":{},"ports":[{"name":"Success","plug":"input","type":{"name":"*"},"index":1},{"name":"Failure","plug":"input","type":{"name":"*"},"index":2},{"name":"error","plug":"input","type":{"name":"*"},"index":3}],"dynamicports":[],"children":[]},{"id":"d40848b1-fe59-b3d9-4142-f3052d8a805a","type":"JavaScriptFunction","label":"Send Event - Refresh Token Success","x":2255,"y":718,"parameters":{"functionScript":"const uuid = Inputs.uuid ?? null;\r\n\r\nif(uuid){\r\n    Noodl.Events.emit(uuid)\r\n}"},"ports":[],"dynamicports":[{"name":"in-uuid","displayName":"uuid","plug":"input","type":"*","group":"Inputs","index":4}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"1ad73989-65e7-81d3-199d-4d08d3ee2cc1","type":"JavaScriptFunction","label":"Send Event - Refresh Token Failure","x":2529,"y":1226,"parameters":{"functionScript":"const uuid = Inputs.uuid ?? null;\r\n\r\nif(uuid){\r\n    Noodl.Events.emit(uuid)\r\n}"},"ports":[],"dynamicports":[{"name":"in-uuid","displayName":"uuid","plug":"input","type":"*","group":"Inputs","index":4}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"6b718fe7-3d19-901a-4ff6-762a36d29a76","type":"/#Directus/Directus Prefab/Components/Utils/Check Refresh Process status","x":1575.6363636363635,"y":780.9090909090909,"parameters":{},"ports":[],"dynamicports":[],"children":[]}],"visualRoots":[],"comments":[{"text":"Refreshes the Auth Token for the Logged-in User.","width":465,"height":68,"fill":"transparent","x":1664,"y":606,"id":"3b73a5fb-539f-0054-2c55-116726672b34","largeFont":true,"color":"danger"}]}},{"name":"/#Directus/Directus Prefab/Components/Auth/Directus - Request Password Reset","id":"89d0aa7d-eece-d5e8-556d-32073097ed7c","graph":{"connections":[{"fromId":"5b79252d-0d2c-8d9c-bdb7-5a1081f50ceb","fromProperty":"email","toId":"263fe124-e97b-ac5f-875f-546d094e1503","toProperty":"value"},{"fromId":"263fe124-e97b-ac5f-875f-546d094e1503","fromProperty":"savedValue","toId":"eeab79a7-cfea-5ea4-6afb-72cf602a8f3f","toProperty":"in-email"},{"fromId":"eeab79a7-cfea-5ea4-6afb-72cf602a8f3f","fromProperty":"out-Failure","toId":"fc9f6f10-e82d-378c-d4dd-f75bed7f7b2d","toProperty":"Failure"},{"fromId":"eeab79a7-cfea-5ea4-6afb-72cf602a8f3f","fromProperty":"out-error","toId":"fc9f6f10-e82d-378c-d4dd-f75bed7f7b2d","toProperty":"error"},{"fromId":"eeab79a7-cfea-5ea4-6afb-72cf602a8f3f","fromProperty":"out-Success","toId":"fc9f6f10-e82d-378c-d4dd-f75bed7f7b2d","toProperty":"Success"},{"fromId":"5b79252d-0d2c-8d9c-bdb7-5a1081f50ceb","fromProperty":"reset_url","toId":"b24cd582-65a5-531f-d54d-0a580ec5c729","toProperty":"value"},{"fromId":"b24cd582-65a5-531f-d54d-0a580ec5c729","fromProperty":"savedValue","toId":"eeab79a7-cfea-5ea4-6afb-72cf602a8f3f","toProperty":"in-reset_url"},{"fromId":"5b79252d-0d2c-8d9c-bdb7-5a1081f50ceb","fromProperty":"website_url","toId":"d13a9c18-0f6d-ef06-36b8-0377eda2bc70","toProperty":"value"},{"fromId":"d13a9c18-0f6d-ef06-36b8-0377eda2bc70","fromProperty":"savedValue","toId":"eeab79a7-cfea-5ea4-6afb-72cf602a8f3f","toProperty":"in-website_url"},{"fromId":"5b79252d-0d2c-8d9c-bdb7-5a1081f50ceb","fromProperty":"Do","toId":"eeab79a7-cfea-5ea4-6afb-72cf602a8f3f","toProperty":"run"}],"roots":[{"id":"5b79252d-0d2c-8d9c-bdb7-5a1081f50ceb","type":"Component Inputs","x":829,"y":370,"parameters":{},"ports":[{"name":"Do","plug":"output","type":"*","index":0},{"name":"email","plug":"output","type":{"name":"*"},"group":"Data","index":3},{"name":"reset_url","plug":"output","type":{"name":"*"},"group":"Config (Provide only one)","index":1},{"name":"website_url","plug":"output","type":{"name":"*"},"group":"Config (Provide only one)","index":2}],"dynamicports":[],"children":[]},{"id":"fc9f6f10-e82d-378c-d4dd-f75bed7f7b2d","type":"Component Outputs","x":1576,"y":455,"parameters":{},"ports":[{"name":"Success","plug":"input","type":"*","index":0},{"name":"Failure","plug":"input","type":"*","index":1},{"name":"error","plug":"input","type":{"name":"*"},"index":2}],"dynamicports":[],"children":[]},{"id":"eeab79a7-cfea-5ea4-6afb-72cf602a8f3f","type":"JavaScriptFunction","x":1307,"y":372,"parameters":{"functionScript":"const user_email = Inputs.email ?? null;\r\nconst website_url = Inputs.website_url ?? null;\r\nconst reset_url = Inputs.reset_url ?? (website_url ? website_url + \"/reset-password\" : null);  // Default: If the 'website_url' has been provided, then: \"your-website-url/request-password-reset\", else: 'your directus project's default password reset page'\r\n\r\nif (!user_email) return;\r\n\r\nconst client = Noodl.Objects.DirectusSDK?.Client ?? null;\r\n\r\nif(!client) throw new Error(\"Config Error: No SDK Client found!\");\r\n\r\nconst main = async function () {\r\n    try {\r\n        const config = {\r\n            user_email\r\n        };\r\n        if(reset_url) config.reset_url = reset_url;\r\n\r\n        const result = await client.request( Directus.passwordRequest(Object.values(config).join()) );\r\n\r\n        Outputs.data = result;\r\n        //console.log({ result });\r\n        Outputs.Success();\r\n        \r\n    } catch (err) {\r\n        console.error(err);\r\n        Outputs.error = err?.errors.map(i => i.message ).join(\"\\n\");\r\n        Outputs.Failure();\r\n    }\r\n}\r\n\r\nif (client) {\r\n    main();\r\n}"},"ports":[],"dynamicports":[{"name":"in-email","displayName":"email","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-website_url","displayName":"website_url","plug":"input","type":"*","group":"Inputs","index":5},{"name":"in-reset_url","displayName":"reset_url","plug":"input","type":"*","group":"Inputs","index":6},{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":7},{"name":"out-Failure","displayName":"Failure","plug":"output","type":"signal","group":"Outputs","index":8},{"name":"out-data","displayName":"data","plug":"output","type":"*","group":"Outputs","index":9},{"name":"out-error","displayName":"error","plug":"output","type":"*","group":"Outputs","index":10}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"263fe124-e97b-ac5f-875f-546d094e1503","type":"String","label":"email","x":1078,"y":587,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"b24cd582-65a5-531f-d54d-0a580ec5c729","type":"String","label":"reset_url","x":1079.1,"y":489.4000015258789,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"d13a9c18-0f6d-ef06-36b8-0377eda2bc70","type":"String","label":"website_url","x":1078.8200000000002,"y":684.4800018310547,"parameters":{},"ports":[],"dynamicports":[],"children":[]}],"visualRoots":[]}},{"name":"/#Directus/Directus Prefab/Components/Auth/Directus - Reset Password","id":"6dc3a8df-df9b-535a-4802-e60df5247b0c","graph":{"connections":[{"fromId":"6867d42a-b0e9-bedc-0dd3-fbdedffee6b6","fromProperty":"password","toId":"fd7b94c7-6410-3d46-d2ca-7b4e3bfd97e6","toProperty":"value"},{"fromId":"fd7b94c7-6410-3d46-d2ca-7b4e3bfd97e6","fromProperty":"savedValue","toId":"e64064d0-fcad-bc40-b556-3eba13ee070e","toProperty":"in-password"},{"fromId":"e64064d0-fcad-bc40-b556-3eba13ee070e","fromProperty":"out-Failure","toId":"cef8974c-bb3f-1712-b52b-fd80caa37d23","toProperty":"Failure"},{"fromId":"e64064d0-fcad-bc40-b556-3eba13ee070e","fromProperty":"out-error","toId":"cef8974c-bb3f-1712-b52b-fd80caa37d23","toProperty":"error"},{"fromId":"e64064d0-fcad-bc40-b556-3eba13ee070e","fromProperty":"out-Success","toId":"cef8974c-bb3f-1712-b52b-fd80caa37d23","toProperty":"Success"},{"fromId":"6867d42a-b0e9-bedc-0dd3-fbdedffee6b6","fromProperty":"reset_token","toId":"becc751e-a470-bf0e-a1bc-6d805998ee50","toProperty":"value"},{"fromId":"becc751e-a470-bf0e-a1bc-6d805998ee50","fromProperty":"savedValue","toId":"e64064d0-fcad-bc40-b556-3eba13ee070e","toProperty":"in-reset_token"},{"fromId":"6867d42a-b0e9-bedc-0dd3-fbdedffee6b6","fromProperty":"Do","toId":"e64064d0-fcad-bc40-b556-3eba13ee070e","toProperty":"run"}],"roots":[{"id":"6867d42a-b0e9-bedc-0dd3-fbdedffee6b6","type":"Component Inputs","x":829,"y":370,"parameters":{},"ports":[{"name":"Do","plug":"output","type":"*","index":0},{"name":"password","plug":"output","type":{"name":"*"},"group":"Data","index":2},{"name":"reset_token","plug":"output","type":{"name":"*"},"group":"Data","index":3}],"dynamicports":[],"children":[]},{"id":"cef8974c-bb3f-1712-b52b-fd80caa37d23","type":"Component Outputs","x":1579,"y":431,"parameters":{},"ports":[{"name":"Success","plug":"input","type":"*","index":0},{"name":"Failure","plug":"input","type":"*","index":1},{"name":"error","plug":"input","type":{"name":"*"},"index":2}],"dynamicports":[],"children":[]},{"id":"e64064d0-fcad-bc40-b556-3eba13ee070e","type":"JavaScriptFunction","x":1307,"y":372,"parameters":{"functionScript":"const password = Inputs.password ?? null;\r\nconst reset_token = Inputs.reset_token ?? null;\r\n\r\nif (!password || !reset_token) return;\r\n\r\nconst client = Noodl.Objects.DirectusSDK?.Client ?? null;\r\n\r\nif(!client) throw new Error(\"Config Error: No SDK Client found!\");\r\n\r\nconst main = async function () {\r\n    try {\r\n        const result = await client.request(Directus.passwordReset(reset_token, password));\r\n\r\n        Outputs.data = result;\r\n        //console.log({ result });\r\n        Outputs.Success();\r\n        \r\n    } catch (err) {\r\n        console.error(err);\r\n        Outputs.error = err?.errors.map(i => i.message ).join(\"\\n\");\r\n        Outputs.Failure();\r\n    }\r\n}\r\n\r\nif (client) {\r\n    main();\r\n}"},"ports":[],"dynamicports":[{"name":"in-password","displayName":"password","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-reset_token","displayName":"reset_token","plug":"input","type":"*","group":"Inputs","index":5},{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":6},{"name":"out-Failure","displayName":"Failure","plug":"output","type":"signal","group":"Outputs","index":7},{"name":"out-data","displayName":"data","plug":"output","type":"*","group":"Outputs","index":8},{"name":"out-error","displayName":"error","plug":"output","type":"*","group":"Outputs","index":9}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"fd7b94c7-6410-3d46-d2ca-7b4e3bfd97e6","type":"String","label":"password","x":1078,"y":505,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"becc751e-a470-bf0e-a1bc-6d805998ee50","type":"String","label":"reset_token","x":1075.6,"y":601.6500015258789,"parameters":{},"ports":[],"dynamicports":[],"children":[]}],"visualRoots":[]}},{"name":"/#Directus/Directus Prefab/Components/Auth/Directus - Signup","id":"8b838226-8914-4555-288c-f327f0a4e0d1","graph":{"connections":[{"fromId":"c2e2c921-3814-9072-ded8-364f6fb9f9e2","fromProperty":"email","toId":"954e5081-a296-1a67-ac5e-cff3280877ab","toProperty":"value"},{"fromId":"c2e2c921-3814-9072-ded8-364f6fb9f9e2","fromProperty":"password","toId":"b6a58d44-b6e4-a7c1-3942-548c8c56ae38","toProperty":"value"},{"fromId":"954e5081-a296-1a67-ac5e-cff3280877ab","fromProperty":"savedValue","toId":"48b8ac9c-e83f-d141-40a2-8d1b21bd859f","toProperty":"in-email"},{"fromId":"b6a58d44-b6e4-a7c1-3942-548c8c56ae38","fromProperty":"savedValue","toId":"48b8ac9c-e83f-d141-40a2-8d1b21bd859f","toProperty":"in-password"},{"fromId":"48b8ac9c-e83f-d141-40a2-8d1b21bd859f","fromProperty":"out-Failure","toId":"d11e9d40-43a1-a319-169d-87a4c0455f6d","toProperty":"Failure"},{"fromId":"48b8ac9c-e83f-d141-40a2-8d1b21bd859f","fromProperty":"out-error","toId":"d11e9d40-43a1-a319-169d-87a4c0455f6d","toProperty":"error"},{"fromId":"c2e2c921-3814-9072-ded8-364f6fb9f9e2","fromProperty":"first_name","toId":"adff0a3a-a0d8-8168-6387-3e9d0aa93391","toProperty":"value"},{"fromId":"c2e2c921-3814-9072-ded8-364f6fb9f9e2","fromProperty":"last_name","toId":"6699f0c0-0095-9768-8fc2-a81f1bfb9b6e","toProperty":"value"},{"fromId":"adff0a3a-a0d8-8168-6387-3e9d0aa93391","fromProperty":"savedValue","toId":"48b8ac9c-e83f-d141-40a2-8d1b21bd859f","toProperty":"in-first_name"},{"fromId":"6699f0c0-0095-9768-8fc2-a81f1bfb9b6e","fromProperty":"savedValue","toId":"48b8ac9c-e83f-d141-40a2-8d1b21bd859f","toProperty":"in-last_name"},{"fromId":"48b8ac9c-e83f-d141-40a2-8d1b21bd859f","fromProperty":"out-Success","toId":"d11e9d40-43a1-a319-169d-87a4c0455f6d","toProperty":"Success"},{"fromId":"c2e2c921-3814-9072-ded8-364f6fb9f9e2","fromProperty":"Do","toId":"26dff5ff-1b16-77ff-e2e0-1a32aa86bcd2","toProperty":"Do"},{"fromId":"26dff5ff-1b16-77ff-e2e0-1a32aa86bcd2","fromProperty":"Done","toId":"48b8ac9c-e83f-d141-40a2-8d1b21bd859f","toProperty":"run"},{"fromId":"26dff5ff-1b16-77ff-e2e0-1a32aa86bcd2","fromProperty":"client","toId":"48b8ac9c-e83f-d141-40a2-8d1b21bd859f","toProperty":"in-client"}],"roots":[{"id":"c2e2c921-3814-9072-ded8-364f6fb9f9e2","type":"Component Inputs","x":829,"y":370,"parameters":{},"ports":[{"name":"Do","plug":"output","type":"*","index":0},{"name":"email","plug":"output","type":{"name":"*"},"group":"Data","index":1},{"name":"password","plug":"output","type":{"name":"*"},"group":"Data","index":2},{"name":"first_name","plug":"output","type":{"name":"*"},"group":"Data","index":3},{"name":"last_name","plug":"output","type":{"name":"*"},"group":"Data","index":4}],"dynamicports":[],"children":[]},{"id":"d11e9d40-43a1-a319-169d-87a4c0455f6d","type":"Component Outputs","x":1578,"y":373,"parameters":{},"ports":[{"name":"Success","plug":"input","type":"*","index":0},{"name":"Failure","plug":"input","type":"*","index":1},{"name":"error","plug":"input","type":{"name":"*"},"index":2}],"dynamicports":[],"children":[]},{"id":"48b8ac9c-e83f-d141-40a2-8d1b21bd859f","type":"JavaScriptFunction","x":1307,"y":372,"parameters":{"functionScript":"const email = Inputs.email ?? null;\r\nconst password = Inputs.password ?? null;\r\nconst first_name = Inputs.first_name ?? null;\r\nconst last_name = Inputs.last_name ?? null;\r\n\r\nif (!email || !password) return;\r\n\r\nconst client = Inputs.client ?? null;\r\n\r\nconst main = async function () {\r\n    try {\r\n        const user_object = {\r\n            email,\r\n            password,\r\n            first_name,\r\n            last_name\r\n        }\r\n        const result = await client.request(Directus.createUser(user_object));\r\n\r\n        Outputs.data = result;\r\n        //console.log({ result });\r\n        Outputs.Success();\r\n\r\n    } catch (err) {\r\n        console.error(err);\r\n        Outputs.error = err?.errors.map(i => i.message).join(\"\\n\");\r\n        Outputs.Failure();\r\n    }\r\n}\r\n\r\nif (client) {\r\n    main();\r\n}\r\n\r\n"},"ports":[],"dynamicports":[{"name":"in-email","displayName":"email","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-password","displayName":"password","plug":"input","type":"*","group":"Inputs","index":5},{"name":"in-first_name","displayName":"first_name","plug":"input","type":"*","group":"Inputs","index":6},{"name":"in-last_name","displayName":"last_name","plug":"input","type":"*","group":"Inputs","index":7},{"name":"in-client","displayName":"client","plug":"input","type":"*","group":"Inputs","index":8},{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":9},{"name":"out-Failure","displayName":"Failure","plug":"output","type":"signal","group":"Outputs","index":10},{"name":"out-data","displayName":"data","plug":"output","type":"*","group":"Outputs","index":11},{"name":"out-error","displayName":"error","plug":"output","type":"*","group":"Outputs","index":12}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"954e5081-a296-1a67-ac5e-cff3280877ab","type":"String","label":"email","x":1076,"y":516,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"b6a58d44-b6e4-a7c1-3942-548c8c56ae38","type":"String","label":"password","x":1074,"y":611,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"adff0a3a-a0d8-8168-6387-3e9d0aa93391","type":"String","label":"first_name","x":1072.2,"y":706.4000015258789,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"6699f0c0-0095-9768-8fc2-a81f1bfb9b6e","type":"String","label":"last_name","x":1072.2,"y":798.4000015258789,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"26dff5ff-1b16-77ff-e2e0-1a32aa86bcd2","type":"/#Directus/Directus Prefab/Components/Utils/Get a SDK client","x":1071.6571428571426,"y":291.9428591047015,"parameters":{},"ports":[],"dynamicports":[],"children":[]}],"visualRoots":[]}},{"name":"/#Directus/Directus Prefab/Components/Config/Directus - Initialize Site Client","id":"8391cd5a-1c2d-b091-54ec-334819023909","graph":{"connections":[{"fromId":"7cdf4495-1a9e-2884-8986-f49ca54d635d","fromProperty":"Do","toId":"b7af2dba-87de-bba5-589a-3c204094392e","toProperty":"run"},{"fromId":"b7af2dba-87de-bba5-589a-3c204094392e","fromProperty":"out-Success","toId":"5dc73395-f556-a06c-fcf0-dc89eab831d2","toProperty":"Success"},{"fromId":"b7af2dba-87de-bba5-589a-3c204094392e","fromProperty":"out-Failure","toId":"5dc73395-f556-a06c-fcf0-dc89eab831d2","toProperty":"Failure"},{"fromId":"7cdf4495-1a9e-2884-8986-f49ca54d635d","fromProperty":"directusURL","toId":"f1ef057a-048f-bfc6-e3f7-ad347becc6fb","toProperty":"value"},{"fromId":"f1ef057a-048f-bfc6-e3f7-ad347becc6fb","fromProperty":"savedValue","toId":"b7af2dba-87de-bba5-589a-3c204094392e","toProperty":"in-directusURL"},{"fromId":"7cdf4495-1a9e-2884-8986-f49ca54d635d","fromProperty":"static_token","toId":"0c173b58-ba89-ef87-e04e-5443f99ec9c8","toProperty":"value"},{"fromId":"0c173b58-ba89-ef87-e04e-5443f99ec9c8","fromProperty":"savedValue","toId":"b7af2dba-87de-bba5-589a-3c204094392e","toProperty":"in-staticToken"},{"fromId":"7cdf4495-1a9e-2884-8986-f49ca54d635d","fromProperty":"Enable Cross-Domain cookies","toId":"2d75caee-d076-3e08-3dd0-a1e57c0f54b5","toProperty":"value"},{"fromId":"2d75caee-d076-3e08-3dd0-a1e57c0f54b5","fromProperty":"savedValue","toId":"b7af2dba-87de-bba5-589a-3c204094392e","toProperty":"in-crossDomainCookies"}],"roots":[{"id":"7cdf4495-1a9e-2884-8986-f49ca54d635d","type":"Component Inputs","x":-476,"y":-89,"parameters":{},"ports":[{"name":"Do","plug":"output","type":"*","index":0},{"name":"directusURL","plug":"output","type":{"name":"*"},"index":1},{"name":"static_token","plug":"output","type":{"name":"*"},"index":2},{"name":"Enable Cross-Domain cookies","plug":"output","type":{"name":"*"},"index":3}],"dynamicports":[],"children":[]},{"id":"5dc73395-f556-a06c-fcf0-dc89eab831d2","type":"Component Outputs","x":258,"y":-8,"parameters":{},"ports":[{"name":"Success","plug":"input","type":"*","index":0},{"name":"Failure","plug":"input","type":"*","index":1}],"dynamicports":[],"children":[]},{"id":"b7af2dba-87de-bba5-589a-3c204094392e","type":"JavaScriptFunction","x":25.200000000000045,"y":-87.5999984741211,"parameters":{"functionScript":"const project_url = Inputs.directusURL;\r\nconst staticToken = Inputs.staticToken || null;\r\nconst crossDomainCookies = Inputs.crossDomainCookies ?? null;\r\n\r\nif (!project_url || !(new URL(project_url))) return; // throw new Error(\"Invalid Directus Project URL!\");\r\n\r\ntry {\r\n    var client = {};\r\n\r\n    if (crossDomainCookies) {\r\n        if (staticToken && staticToken != \"\") {\r\n            // Static Token has been provided //\r\n            client = Directus.createDirectus(project_url).with(Directus.staticToken(staticToken), { credentials: 'include' }).with(Directus.rest({ credentials: 'include' }));\r\n        } else {\r\n            // No Static Token. Connecting via the default Public Access Role //\r\n            client = Directus.createDirectus(project_url).with(Directus.rest({ credentials: 'include' }));\r\n        }\r\n    } else {\r\n        if (staticToken && staticToken != \"\") {\r\n            // Static Token has been provided //\r\n            client = Directus.createDirectus(project_url).with(Directus.staticToken(staticToken)).with(Directus.rest());\r\n        } else {\r\n            // No Static Token. Connecting via the default Public Access Role //\r\n            client = Directus.createDirectus(project_url).with(Directus.rest());\r\n        }\r\n    }\r\n\r\n\r\n    Noodl.Objects.DirectusSDK = {\r\n        ...Noodl.Objects.DirectusSDK.data,\r\n        SiteClient: client\r\n    }\r\n    Outputs.Success();\r\n} catch (err) {\r\n    console.error(err);\r\n    Outputs.Failure();\r\n}\r\n"},"ports":[],"dynamicports":[{"name":"in-directusURL","displayName":"directusURL","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-staticToken","displayName":"staticToken","plug":"input","type":"*","group":"Inputs","index":5},{"name":"in-crossDomainCookies","displayName":"crossDomainCookies","plug":"input","type":"*","group":"Inputs","index":6},{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":7},{"name":"out-Failure","displayName":"Failure","plug":"output","type":"signal","group":"Outputs","index":8}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"f1ef057a-048f-bfc6-e3f7-ad347becc6fb","type":"String","x":-225.73333333333323,"y":53.533335367838504,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"0c173b58-ba89-ef87-e04e-5443f99ec9c8","type":"String","x":-228.6333333333332,"y":142.38333574930823,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"2d75caee-d076-3e08-3dd0-a1e57c0f54b5","type":"Boolean","x":-230.0333333333333,"y":229.66333605448403,"parameters":{},"ports":[],"dynamicports":[],"children":[]}],"visualRoots":[],"comments":[{"text":"1. Before using this component, do make sure that you have imported the Directus SDK. To do so, you could add the following code in the 'Head Code' setting:\n--------------------------------\n<script type=\"module\">\n  import * as Directus from \"https://esm.sh/@directus/sdk\";\n  window.Directus = Directus;\n</script>\n--------------------------------","width":664,"height":264,"fill":"fill","x":-439,"y":-684,"id":"bde58ba2-1d68-d96a-3597-770da5fb65f8","color":"danger","largeFont":true},{"text":"2. This component creates a separate Directus SDK Client, dedicated for use by the App (without any user login). It will operate parallely with the Directus SDK Client that is linked to the 'logged-in user'.\n\nYou have the option to initialize this (Site Client) with either a Static Token (https://docs.directus.io/guides/sdk/authentication.html#create-a-directus-client-with-a-token) or the default 'Public' Access Role, by keeping the static_token property empty.","width":657,"height":252,"fill":"fill","x":-435,"y":-393,"id":"10a5c260-661c-5924-6a41-eada8dad7df7","largeFont":true,"color":"danger"}]}},{"name":"/#Directus/Directus Prefab/Components/Config/Directus - Initialize User Client","id":"73077eb3-97d7-260a-7236-b057247e4d0f","graph":{"connections":[{"fromId":"a98d1497-f1f1-6550-7dd9-31ccf11551ec","fromProperty":"out-Failure","toId":"0e7da677-d77c-9c31-f5c1-d663553a44b6","toProperty":"Failure"},{"fromId":"fb3b7caf-de7a-172e-bd8b-c426e68f10a2","fromProperty":"Enable Cross-Domain cookies","toId":"3ac3eec7-e226-6242-2102-eade24e86dec","toProperty":"value"},{"fromId":"3ac3eec7-e226-6242-2102-eade24e86dec","fromProperty":"savedValue","toId":"a98d1497-f1f1-6550-7dd9-31ccf11551ec","toProperty":"in-crossDomainCookies"},{"fromId":"fb3b7caf-de7a-172e-bd8b-c426e68f10a2","fromProperty":"Do","toId":"84b28d0d-4510-6229-50a5-4465e63d075d","toProperty":"run"},{"fromId":"fb3b7caf-de7a-172e-bd8b-c426e68f10a2","fromProperty":"mode","toId":"cca0f75a-04aa-7010-7ee4-42f412d77db8","toProperty":"currentState"},{"fromId":"cca0f75a-04aa-7010-7ee4-42f412d77db8","fromProperty":"currentState","toId":"a98d1497-f1f1-6550-7dd9-31ccf11551ec","toProperty":"in-auth_token_mode"},{"fromId":"a98d1497-f1f1-6550-7dd9-31ccf11551ec","fromProperty":"out-Success","toId":"0e7da677-d77c-9c31-f5c1-d663553a44b6","toProperty":"Success"},{"fromId":"fb3b7caf-de7a-172e-bd8b-c426e68f10a2","fromProperty":"directusURL","toId":"53c7304a-a01f-c53a-1cbb-ac241846b173","toProperty":"value"},{"fromId":"53c7304a-a01f-c53a-1cbb-ac241846b173","fromProperty":"savedValue","toId":"a98d1497-f1f1-6550-7dd9-31ccf11551ec","toProperty":"in-directusURL"},{"fromId":"84b28d0d-4510-6229-50a5-4465e63d075d","fromProperty":"out-Do","toId":"a98d1497-f1f1-6550-7dd9-31ccf11551ec","toProperty":"run"}],"roots":[{"id":"fb3b7caf-de7a-172e-bd8b-c426e68f10a2","type":"Component Inputs","x":-714,"y":39,"parameters":{},"ports":[{"name":"Do","plug":"output","type":"*","index":0},{"name":"directusURL","plug":"output","type":{"name":"*"},"index":1},{"name":"Enable Cross-Domain cookies","plug":"output","type":{"name":"*"},"index":3,"group":"Auth Token Management"},{"name":"mode","plug":"output","type":{"name":"*"},"group":"Auth Token Management","index":2}],"dynamicports":[],"children":[]},{"id":"0e7da677-d77c-9c31-f5c1-d663553a44b6","type":"Component Outputs","x":411,"y":154,"parameters":{},"ports":[{"name":"Success","plug":"input","type":"*","index":0},{"name":"Failure","plug":"input","type":"*","index":1}],"dynamicports":[],"children":[]},{"id":"a98d1497-f1f1-6550-7dd9-31ccf11551ec","type":"JavaScriptFunction","x":175.20000000000005,"y":83.4000015258789,"parameters":{"functionScript":"const project_url = Inputs.directusURL ?? null;\r\nconst crossDomainCookies = !!Inputs.crossDomainCookies ?? null;\r\nconst auth_token_mode = Inputs.auth_token_mode ?? \"cookie\";\r\n\r\nif (!project_url || !(new URL(project_url))) return; // throw new Error(\"Invalid Directus Project URL!\");\r\n\r\ntry {\r\n    var client = {};\r\n    if (crossDomainCookies) {\r\n        client = Directus.createDirectus(project_url).with(Directus.authentication(auth_token_mode, { credentials: 'include' })).with(Directus.rest({ credentials: 'include' }));\r\n    } else {\r\n        client = Directus.createDirectus(project_url).with(Directus.authentication(auth_token_mode)).with(Directus.rest());\r\n    }\r\n    \r\n    Noodl.Objects.DirectusSDK = {\r\n        ...Noodl.Objects.DirectusSDK.data,\r\n        Client: client\r\n    }\r\n    Outputs.Success();\r\n} catch (err) {\r\n    console.error(err);\r\n    Outputs.Failure();\r\n}"},"ports":[],"dynamicports":[{"name":"in-directusURL","displayName":"directusURL","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-crossDomainCookies","displayName":"crossDomainCookies","plug":"input","type":"*","group":"Inputs","index":5},{"name":"in-auth_token_mode","displayName":"auth_token_mode","plug":"input","type":"*","group":"Inputs","index":6},{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":7},{"name":"out-Failure","displayName":"Failure","plug":"output","type":"signal","group":"Outputs","index":8}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"53c7304a-a01f-c53a-1cbb-ac241846b173","type":"String","x":-230.73333333333323,"y":53.533335367838504,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"3ac3eec7-e226-6242-2102-eade24e86dec","type":"Boolean","x":-229.6333333333332,"y":155.38333574930823,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"84b28d0d-4510-6229-50a5-4465e63d075d","type":"JavaScriptFunction","x":-228,"y":-67,"parameters":{"functionScript":"const url = Noodl.Objects.DirectusSDK?.Client?.url?.origin || null;\r\n\r\nif(!url) Outputs.Do()"},"ports":[],"dynamicports":[{"name":"out-Do","displayName":"Do","plug":"output","type":"signal","group":"Outputs","index":4}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"cca0f75a-04aa-7010-7ee4-42f412d77db8","type":"States","label":"mode","x":-227.26111111111118,"y":256.45278029971655,"parameters":{"states":"cookie,session,json","useTransitions":false},"ports":[],"dynamicports":[{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To cookie","name":"to-cookie","group":"Go to state","index":6},{"plug":"output","type":"boolean","displayName":"At cookie","name":"at-cookie","group":"Current state","index":7},{"plug":"output","type":"signal","displayName":"Has Reached cookie","name":"reached-cookie","group":"Current state","index":8},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To session","name":"to-session","group":"Go to state","index":9},{"plug":"output","type":"boolean","displayName":"At session","name":"at-session","group":"Current state","index":10},{"plug":"output","type":"signal","displayName":"Has Reached session","name":"reached-session","group":"Current state","index":11},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To json","name":"to-json","group":"Go to state","index":12},{"plug":"output","type":"boolean","displayName":"At json","name":"at-json","group":"Current state","index":13},{"plug":"output","type":"signal","displayName":"Has Reached json","name":"reached-json","group":"Current state","index":14},{"plug":"input","type":{"name":"enum","enums":["cookie","session","json"]},"group":"States","displayName":"State","name":"currentState","default":"cookie","index":15}],"children":[]}],"visualRoots":[],"comments":[{"text":"1. Before using this component, do make sure that you have imported the Directus SDK. To do so, you could add the following code in the 'Head Code' setting:\n--------------------------------\n<script type=\"module\">\n  import * as Directus from \"https://esm.sh/@directus/sdk\";\n  window.Directus = Directus;\n</script>\n--------------------------------","width":664,"height":264,"fill":"fill","x":-435,"y":-406,"id":"bde58ba2-1d68-d96a-3597-770da5fb65f8","color":"danger","largeFont":true}]}},{"name":"/#Directus/Directus Prefab/Components/Data/Directus - Create Data","id":"f617350b-74fa-8793-2ace-c83bbe950559","graph":{"connections":[{"fromId":"0489b89c-0cb5-c335-bdcc-fc5d7dcf7d9a","fromProperty":"collection","toId":"9d7d830c-0575-c7c2-7567-4654fc377896","toProperty":"value"},{"fromId":"9d7d830c-0575-c7c2-7567-4654fc377896","fromProperty":"savedValue","toId":"42307e90-8604-0cf1-69a1-dfcaad26d2ee","toProperty":"in-collection"},{"fromId":"0489b89c-0cb5-c335-bdcc-fc5d7dcf7d9a","fromProperty":"SDK Client to use","toId":"d346c78e-9296-0885-e731-61a7f8683862","toProperty":"currentState"},{"fromId":"42307e90-8604-0cf1-69a1-dfcaad26d2ee","fromProperty":"out-Done","toId":"9535141d-58b8-7069-3678-5955f0a8d53a","toProperty":"start"},{"fromId":"779d7b67-51fc-12e3-6e91-8e9d747ca891","fromProperty":"Success","toId":"12aeff69-2ec7-6b0f-5436-04ff4900d2f9","toProperty":"Success"},{"fromId":"779d7b67-51fc-12e3-6e91-8e9d747ca891","fromProperty":"Failure","toId":"12aeff69-2ec7-6b0f-5436-04ff4900d2f9","toProperty":"Failure"},{"fromId":"779d7b67-51fc-12e3-6e91-8e9d747ca891","fromProperty":"result","toId":"12aeff69-2ec7-6b0f-5436-04ff4900d2f9","toProperty":"result"},{"fromId":"779d7b67-51fc-12e3-6e91-8e9d747ca891","fromProperty":"error","toId":"12aeff69-2ec7-6b0f-5436-04ff4900d2f9","toProperty":"error"},{"fromId":"42307e90-8604-0cf1-69a1-dfcaad26d2ee","fromProperty":"out-collection","toId":"779d7b67-51fc-12e3-6e91-8e9d747ca891","toProperty":"collection"},{"fromId":"d346c78e-9296-0885-e731-61a7f8683862","fromProperty":"currentState","toId":"779d7b67-51fc-12e3-6e91-8e9d747ca891","toProperty":"client"},{"fromId":"0489b89c-0cb5-c335-bdcc-fc5d7dcf7d9a","fromProperty":"Create Single or Multiple","toId":"2c0f3669-f653-ddd5-ed84-c264924bddaf","toProperty":"currentState"},{"fromId":"2c0f3669-f653-ddd5-ed84-c264924bddaf","fromProperty":"currentState","toId":"00ae0443-92f5-aadc-d536-d2d17e3d8f5e","toProperty":"in-data_qty"},{"fromId":"0489b89c-0cb5-c335-bdcc-fc5d7dcf7d9a","fromProperty":"Data","toId":"00ae0443-92f5-aadc-d536-d2d17e3d8f5e","toProperty":"in-data"},{"fromId":"9535141d-58b8-7069-3678-5955f0a8d53a","fromProperty":"timerFinished","toId":"779d7b67-51fc-12e3-6e91-8e9d747ca891","toProperty":"CreateData"},{"fromId":"00ae0443-92f5-aadc-d536-d2d17e3d8f5e","fromProperty":"out-data_qty","toId":"779d7b67-51fc-12e3-6e91-8e9d747ca891","toProperty":"data_qty"},{"fromId":"00ae0443-92f5-aadc-d536-d2d17e3d8f5e","fromProperty":"out-data","toId":"779d7b67-51fc-12e3-6e91-8e9d747ca891","toProperty":"data"},{"fromId":"0489b89c-0cb5-c335-bdcc-fc5d7dcf7d9a","fromProperty":"Do","toId":"00ae0443-92f5-aadc-d536-d2d17e3d8f5e","toProperty":"run"},{"fromId":"d19b3779-920a-7252-ac5f-b0a832bdfb96","fromProperty":"query","toId":"779d7b67-51fc-12e3-6e91-8e9d747ca891","toProperty":"query"},{"fromId":"0489b89c-0cb5-c335-bdcc-fc5d7dcf7d9a","fromProperty":"limit","toId":"d19b3779-920a-7252-ac5f-b0a832bdfb96","toProperty":"Limit"},{"fromId":"0489b89c-0cb5-c335-bdcc-fc5d7dcf7d9a","fromProperty":"Get all fields","toId":"d19b3779-920a-7252-ac5f-b0a832bdfb96","toProperty":"Get all fields"},{"fromId":"0489b89c-0cb5-c335-bdcc-fc5d7dcf7d9a","fromProperty":"fields","toId":"d19b3779-920a-7252-ac5f-b0a832bdfb96","toProperty":"Fields"},{"fromId":"0489b89c-0cb5-c335-bdcc-fc5d7dcf7d9a","fromProperty":"sort","toId":"d19b3779-920a-7252-ac5f-b0a832bdfb96","toProperty":"Sort"},{"fromId":"0489b89c-0cb5-c335-bdcc-fc5d7dcf7d9a","fromProperty":"offset","toId":"d19b3779-920a-7252-ac5f-b0a832bdfb96","toProperty":"Offset"},{"fromId":"0489b89c-0cb5-c335-bdcc-fc5d7dcf7d9a","fromProperty":"page","toId":"d19b3779-920a-7252-ac5f-b0a832bdfb96","toProperty":"Page"},{"fromId":"0489b89c-0cb5-c335-bdcc-fc5d7dcf7d9a","fromProperty":"search","toId":"d19b3779-920a-7252-ac5f-b0a832bdfb96","toProperty":"Search"},{"fromId":"0489b89c-0cb5-c335-bdcc-fc5d7dcf7d9a","fromProperty":"aggregate","toId":"d19b3779-920a-7252-ac5f-b0a832bdfb96","toProperty":"aggregate"},{"fromId":"0489b89c-0cb5-c335-bdcc-fc5d7dcf7d9a","fromProperty":"groupBy","toId":"d19b3779-920a-7252-ac5f-b0a832bdfb96","toProperty":"groupBy"},{"fromId":"0489b89c-0cb5-c335-bdcc-fc5d7dcf7d9a","fromProperty":"filter","toId":"d19b3779-920a-7252-ac5f-b0a832bdfb96","toProperty":"filter"},{"fromId":"0489b89c-0cb5-c335-bdcc-fc5d7dcf7d9a","fromProperty":"deep","toId":"d19b3779-920a-7252-ac5f-b0a832bdfb96","toProperty":"deep"},{"fromId":"0489b89c-0cb5-c335-bdcc-fc5d7dcf7d9a","fromProperty":"alias","toId":"d19b3779-920a-7252-ac5f-b0a832bdfb96","toProperty":"alias"},{"fromId":"d346c78e-9296-0885-e731-61a7f8683862","fromProperty":"currentState","toId":"221d7448-8f74-3974-9bf3-5a01c020ff70","toProperty":"State"},{"fromId":"221d7448-8f74-3974-9bf3-5a01c020ff70","fromProperty":"Success","toId":"42307e90-8604-0cf1-69a1-dfcaad26d2ee","toProperty":"run"},{"fromId":"0489b89c-0cb5-c335-bdcc-fc5d7dcf7d9a","fromProperty":"Do","toId":"221d7448-8f74-3974-9bf3-5a01c020ff70","toProperty":"Do"},{"fromId":"0489b89c-0cb5-c335-bdcc-fc5d7dcf7d9a","fromProperty":"Map incoming ID field","toId":"aa87ea55-b630-3f18-38fb-06934f026863","toProperty":"currentState"},{"fromId":"0489b89c-0cb5-c335-bdcc-fc5d7dcf7d9a","fromProperty":"ID new name","toId":"aa87ea55-b630-3f18-38fb-06934f026863","toProperty":"value-Yes-new_id"},{"fromId":"aa87ea55-b630-3f18-38fb-06934f026863","fromProperty":"new_id","toId":"779d7b67-51fc-12e3-6e91-8e9d747ca891","toProperty":"id_new"}],"roots":[{"id":"0489b89c-0cb5-c335-bdcc-fc5d7dcf7d9a","type":"Component Inputs","x":-1039,"y":450,"parameters":{},"ports":[{"name":"Do","plug":"output","type":"*","index":0},{"name":"collection","plug":"output","type":{"name":"*"},"group":"Config","index":2},{"name":"Multiple Items","plug":"output","type":{"name":"*"},"group":"Response - Get Multiple Items","index":5},{"name":"fields","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":9},{"name":"Get all fields","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":8},{"name":"SDK Client to use","plug":"output","type":{"name":"*"},"group":"Config","index":1},{"name":"sort","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":10},{"name":"offset","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":11},{"name":"page","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":12},{"name":"deep","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":17},{"name":"groupBy","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":15},{"name":"aggregate","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":14},{"name":"alias","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":18},{"name":"filter","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":16},{"name":"search","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":13},{"name":"Create Single or Multiple","plug":"output","type":{"name":"*"},"group":"Create Data","index":3},{"name":"Data","plug":"output","type":{"name":"*"},"group":"Create Data","index":4},{"name":"limit","plug":"output","type":{"name":"*"},"group":"Response - Get Multiple Items","index":6},{"name":"Get All Items","plug":"output","type":{"name":"*"},"group":"Response - Get All Items","index":7},{"name":"Map incoming ID field","plug":"output","type":{"name":"*"},"group":"Map ID field in Returned Data","index":19},{"name":"ID new name","plug":"output","type":{"name":"*"},"group":"Map ID field in Returned Data","index":20}],"dynamicports":[],"children":[]},{"id":"12aeff69-2ec7-6b0f-5436-04ff4900d2f9","type":"Component Outputs","x":511,"y":415,"parameters":{},"ports":[{"name":"Success","plug":"input","type":"*","index":0},{"name":"Failure","plug":"input","type":"*","index":1},{"name":"error","plug":"input","type":{"name":"*"},"index":3},{"name":"result","plug":"input","type":{"name":"*"},"index":2}],"dynamicports":[],"children":[]},{"id":"9d7d830c-0575-c7c2-7567-4654fc377896","type":"String","label":"Collection","x":-690,"y":265,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"42307e90-8604-0cf1-69a1-dfcaad26d2ee","type":"JavaScriptFunction","x":-223,"y":133,"parameters":{"functionScript":"const collection = Inputs.collection || null;\r\n\r\nif (!collection || typeof (collection) != \"string\" || collection.length <= 0) {\r\n    throw new Error(\"Invalid Collection value provided!\")\r\n} else {\r\n    Outputs.collection = collection;\r\n    Outputs.Done();\r\n}"},"ports":[],"dynamicports":[{"name":"in-collection","displayName":"collection","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-Done","displayName":"Done","plug":"output","type":"signal","group":"Outputs","index":5},{"name":"out-collection","displayName":"collection","plug":"output","type":"*","group":"Outputs","index":6}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"d346c78e-9296-0885-e731-61a7f8683862","type":"States","label":"Client type","x":-690,"y":163,"parameters":{"states":"User SDK Client,Site SDK Client","useTransitions":false},"ports":[],"dynamicports":[{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To User SDK Client","name":"to-User SDK Client","group":"Go to state","index":6},{"plug":"output","type":"boolean","displayName":"At User SDK Client","name":"at-User SDK Client","group":"Current state","index":7},{"plug":"output","type":"signal","displayName":"Has Reached User SDK Client","name":"reached-User SDK Client","group":"Current state","index":8},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To Site SDK Client","name":"to-Site SDK Client","group":"Go to state","index":9},{"plug":"output","type":"boolean","displayName":"At Site SDK Client","name":"at-Site SDK Client","group":"Current state","index":10},{"plug":"output","type":"signal","displayName":"Has Reached Site SDK Client","name":"reached-Site SDK Client","group":"Current state","index":11},{"plug":"input","type":{"name":"enum","enums":["User SDK Client","Site SDK Client"]},"group":"States","displayName":"State","name":"currentState","default":"User SDK Client","index":12}],"children":[]},{"id":"9535141d-58b8-7069-3678-5955f0a8d53a","type":"Timer","x":-11,"y":131,"parameters":{"duration":100},"ports":[],"dynamicports":[],"children":[]},{"id":"779d7b67-51fc-12e3-6e91-8e9d747ca891","type":"Javascript2","x":313,"y":416,"parameters":{"code":"Script.Inputs = {\r\n    client: \"string\",\r\n    collection: \"string\",\r\n    operation: \"string\",\r\n    query: \"object\",\r\n    data_qty: \"single\",\r\n    id_new: \"string\"\r\n}\r\n\r\nfunction map_id_field(data, id_new) {\r\n    if (id_new && id_new != \"\" && data) {\r\n        if (Array.isArray(data) && data.length > 0) {\r\n\r\n            let temp_res = data.map(i => {\r\n                let temp = {\r\n                    ...i\r\n                };\r\n                if (i.id) temp[id_new] = i.id;\r\n                return temp;\r\n            });\r\n            return temp_res;\r\n\r\n        } else if (typeof (data) == \"object\") {\r\n\r\n            let temp = {\r\n                ...data\r\n            };\r\n            if (data.id) temp[id_new] = data.id;\r\n            return temp;\r\n\r\n        }\r\n    }\r\n    return data;\r\n}\r\n\r\n\r\nScript.Signals.CreateData = async function () {\r\n\r\n    const client_selection = Script.Inputs.client || null;\r\n    const sdk_client = (client_selection == \"User SDK Client\") ? Noodl.Objects.DirectusSDK.Client : Noodl.Objects.DirectusSDK.SiteClient;\r\n\r\n    const collection = Script.Inputs.collection ?? null;\r\n\r\n    const data_qty = Script.Inputs.data_qty ?? null;\r\n    const data = Script.Inputs.data ?? null;\r\n    const id_new = Script.Inputs.id_new || null;\r\n\r\n    const query = Script.Inputs.query || {};\r\n\r\n    try {\r\n        if (sdk_client && collection && data_qty && data) {\r\n            let result;\r\n            switch (data_qty) {\r\n                case \"single\":\r\n                    result = await sdk_client.request(Directus.createItem(collection, data, query));\r\n                    break;\r\n                case \"multiple\":\r\n                    result = await sdk_client.request(Directus.createItems(collection, data, query));\r\n                    break;\r\n            }\r\n                        \r\n            result = map_id_field(result, id_new); // Map the id field in the incoming data to a new field, if set\r\n\r\n            Script.Outputs.result = result;\r\n            if (result) {\r\n                Script.Outputs.Success();\r\n            } else {\r\n                Script.Outputs.Failure();\r\n            }\r\n        } else {\r\n            Script.Outputs.error = \"Invalid configuration!\";\r\n            Script.Outputs.Failure();\r\n        }\r\n\r\n    } catch (err) {\r\n        console.error(err);\r\n\r\n        Script.Outputs.error = err?.errors.map(i => i.message).join(\"\\n\") ?? JSON.stringify(err);\r\n        Script.Outputs.Failure();\r\n    }\r\n}\r\n"},"ports":[],"dynamicports":[{"name":"client","plug":"input","type":{"name":"string"},"group":"Inputs","index":5},{"name":"collection","plug":"input","type":{"name":"string"},"group":"Inputs","index":6},{"name":"operation","plug":"input","type":{"name":"string"},"group":"Inputs","index":7},{"name":"query","plug":"input","type":{"name":"object"},"group":"Inputs","index":8},{"name":"data_qty","plug":"input","type":{"name":"single"},"group":"Inputs","index":9},{"name":"id_new","plug":"input","type":{"name":"string"},"group":"Inputs","index":10},{"name":"CreateData","plug":"input","type":{"name":"signal"},"group":"Inputs","index":11},{"name":"data","displayName":"data","plug":"input","type":"*","group":"Inputs","index":12},{"name":"Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":13},{"name":"Failure","displayName":"Failure","plug":"output","type":"signal","group":"Outputs","index":14},{"name":"result","displayName":"result","plug":"output","type":"*","group":"Outputs","index":15},{"name":"error","displayName":"error","plug":"output","type":"*","group":"Outputs","index":16}],"children":[],"metadata":{"merge":{"soureCodePorts":["code"]}}},{"id":"2c0f3669-f653-ddd5-ed84-c264924bddaf","type":"States","label":"Create type","x":-689.7,"y":361.1000015258789,"parameters":{"states":"single,multiple","useTransitions":false},"ports":[],"dynamicports":[{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To single","name":"to-single","group":"Go to state","index":6},{"plug":"output","type":"boolean","displayName":"At single","name":"at-single","group":"Current state","index":7},{"plug":"output","type":"signal","displayName":"Has Reached single","name":"reached-single","group":"Current state","index":8},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To multiple","name":"to-multiple","group":"Go to state","index":9},{"plug":"output","type":"boolean","displayName":"At multiple","name":"at-multiple","group":"Current state","index":10},{"plug":"output","type":"signal","displayName":"Has Reached multiple","name":"reached-multiple","group":"Current state","index":11},{"plug":"input","type":{"name":"enum","enums":["single","multiple"]},"group":"States","displayName":"State","name":"currentState","default":"single","index":12}],"children":[]},{"id":"00ae0443-92f5-aadc-d536-d2d17e3d8f5e","type":"JavaScriptFunction","x":-364.70000000000005,"y":386.1000015258789,"parameters":{"functionScript":"const data_qty = Inputs.data_qty ?? null;\r\nconst data = Inputs.data ?? {};\r\n\r\nlet status = false;\r\n\r\nif (data && data_qty) {\r\n    const data_type = Array.isArray(data) ? \"array\" : (typeof (data) == \"object\" ? \"object\" : typeof (data));\r\n\r\n    if (data_qty == \"multiple\" && data_type == \"array\") {\r\n        status = true;\r\n    } else if (data_qty == \"single\" && data_type == \"object\") {\r\n        status = true;\r\n    } else {\r\n        throw new Error(\"Invalid data config!\");\r\n    }\r\n    if (status) {\r\n        Outputs.data_qty = data_qty;\r\n        Outputs.data = data;\r\n    }\r\n} else {\r\n    throw new Error(\"Invalid request!\")\r\n}\r\n"},"ports":[],"dynamicports":[{"name":"in-data_qty","displayName":"data_qty","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-data","displayName":"data","plug":"input","type":"*","group":"Inputs","index":5},{"name":"out-data_qty","displayName":"data_qty","plug":"output","type":"*","group":"Outputs","index":6},{"name":"out-data","displayName":"data","plug":"output","type":"*","group":"Outputs","index":7}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"d19b3779-920a-7252-ac5f-b0a832bdfb96","type":"/#Directus/Directus Prefab/Components/Utils - Query Parameters/Directus - Query parameters (for Create)","x":-365.45000000000005,"y":519.500001780192,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"221d7448-8f74-3974-9bf3-5a01c020ff70","type":"/#Directus/Directus Prefab/Components/Utils/SDK Client Check","x":-460.73749999999995,"y":57.47500040266249,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"aa87ea55-b630-3f18-38fb-06934f026863","type":"States","x":-663,"y":861,"parameters":{"states":"No,Yes","useTransitions":false,"values":"new_id","type-new_id":"string","value-Yes-new_id":"directus_id"},"ports":[],"dynamicports":[{"type":{"name":"string","allowConnectionsOnly":true},"plug":"output","group":"Values","name":"new_id","index":6},{"type":{"name":"enum","enums":[{"label":"Number","value":"number"},{"label":"String","value":"string"},{"label":"Boolean","value":"boolean"},{"label":"Color","value":"color"},{"label":"Text Style","value":"textStyle"}],"allowEditOnly":true},"default":"number","plug":"input","group":"Types","displayName":"new_id","name":"type-new_id","index":7},{"plug":"input","type":"string","group":"No Values","name":"value-No-new_id","displayName":"new_id","editorName":"No|new_id","index":8},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To No","name":"to-No","group":"Go to state","index":9},{"plug":"output","type":"boolean","displayName":"At No","name":"at-No","group":"Current state","index":10},{"plug":"output","type":"signal","displayName":"Has Reached No","name":"reached-No","group":"Current state","index":11},{"plug":"input","type":"string","group":"Yes Values","name":"value-Yes-new_id","displayName":"new_id","editorName":"Yes|new_id","index":12},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To Yes","name":"to-Yes","group":"Go to state","index":13},{"plug":"output","type":"boolean","displayName":"At Yes","name":"at-Yes","group":"Current state","index":14},{"plug":"output","type":"signal","displayName":"Has Reached Yes","name":"reached-Yes","group":"Current state","index":15},{"plug":"input","type":{"name":"enum","enums":["No","Yes"]},"group":"States","displayName":"State","name":"currentState","default":"No","index":16}],"children":[]}],"visualRoots":[]}},{"name":"/#Directus/Directus Prefab/Components/Data/Directus - Delete Data","id":"2c17768f-375e-c2b6-4c6e-78d1d69bf49a","graph":{"connections":[{"fromId":"bc2f2454-217f-c522-c80a-10c60835d102","fromProperty":"collection","toId":"03d7ad95-90dd-b2bd-b5a0-f61dc952ddba","toProperty":"value"},{"fromId":"03d7ad95-90dd-b2bd-b5a0-f61dc952ddba","fromProperty":"savedValue","toId":"6d9996f8-180b-47e1-09b9-1c4572ab21a0","toProperty":"in-collection"},{"fromId":"bc2f2454-217f-c522-c80a-10c60835d102","fromProperty":"SDK Client to use","toId":"999bb250-4549-033d-fbe5-1269c06e7214","toProperty":"currentState"},{"fromId":"6d9996f8-180b-47e1-09b9-1c4572ab21a0","fromProperty":"out-Done","toId":"438a6a74-6c9b-01cd-dcd8-3b0ee9045140","toProperty":"start"},{"fromId":"993c1fd1-f7ef-4fcf-5add-0150169d8863","fromProperty":"Success","toId":"58b9039d-b8ab-9e58-2c7e-fa59f5cfa8ec","toProperty":"Success"},{"fromId":"993c1fd1-f7ef-4fcf-5add-0150169d8863","fromProperty":"Failure","toId":"58b9039d-b8ab-9e58-2c7e-fa59f5cfa8ec","toProperty":"Failure"},{"fromId":"993c1fd1-f7ef-4fcf-5add-0150169d8863","fromProperty":"result","toId":"58b9039d-b8ab-9e58-2c7e-fa59f5cfa8ec","toProperty":"result"},{"fromId":"993c1fd1-f7ef-4fcf-5add-0150169d8863","fromProperty":"error","toId":"58b9039d-b8ab-9e58-2c7e-fa59f5cfa8ec","toProperty":"error"},{"fromId":"6d9996f8-180b-47e1-09b9-1c4572ab21a0","fromProperty":"out-collection","toId":"993c1fd1-f7ef-4fcf-5add-0150169d8863","toProperty":"collection"},{"fromId":"999bb250-4549-033d-fbe5-1269c06e7214","fromProperty":"currentState","toId":"993c1fd1-f7ef-4fcf-5add-0150169d8863","toProperty":"client"},{"fromId":"bc2f2454-217f-c522-c80a-10c60835d102","fromProperty":"sort","toId":"bf3d5d7a-4655-98d0-5ef2-e0cd88805cf2","toProperty":"Sort"},{"fromId":"bc2f2454-217f-c522-c80a-10c60835d102","fromProperty":"offset","toId":"bf3d5d7a-4655-98d0-5ef2-e0cd88805cf2","toProperty":"Offset"},{"fromId":"bc2f2454-217f-c522-c80a-10c60835d102","fromProperty":"page","toId":"bf3d5d7a-4655-98d0-5ef2-e0cd88805cf2","toProperty":"Page"},{"fromId":"bc2f2454-217f-c522-c80a-10c60835d102","fromProperty":"search","toId":"bf3d5d7a-4655-98d0-5ef2-e0cd88805cf2","toProperty":"Search"},{"fromId":"bc2f2454-217f-c522-c80a-10c60835d102","fromProperty":"filter","toId":"bf3d5d7a-4655-98d0-5ef2-e0cd88805cf2","toProperty":"filter"},{"fromId":"bc2f2454-217f-c522-c80a-10c60835d102","fromProperty":"deep","toId":"bf3d5d7a-4655-98d0-5ef2-e0cd88805cf2","toProperty":"deep"},{"fromId":"bc2f2454-217f-c522-c80a-10c60835d102","fromProperty":"limit","toId":"bf3d5d7a-4655-98d0-5ef2-e0cd88805cf2","toProperty":"Limit"},{"fromId":"bf3d5d7a-4655-98d0-5ef2-e0cd88805cf2","fromProperty":"query","toId":"993c1fd1-f7ef-4fcf-5add-0150169d8863","toProperty":"query"},{"fromId":"438a6a74-6c9b-01cd-dcd8-3b0ee9045140","fromProperty":"timerFinished","toId":"993c1fd1-f7ef-4fcf-5add-0150169d8863","toProperty":"DeleteData"},{"fromId":"bc2f2454-217f-c522-c80a-10c60835d102","fromProperty":"Delete Type","toId":"ddcfdd4e-cbaa-459e-43a3-24574cbeaa41","toProperty":"currentState"},{"fromId":"ddcfdd4e-cbaa-459e-43a3-24574cbeaa41","fromProperty":"currentState","toId":"bf3d5d7a-4655-98d0-5ef2-e0cd88805cf2","toProperty":"Delete Type"},{"fromId":"bf3d5d7a-4655-98d0-5ef2-e0cd88805cf2","fromProperty":"itemID","toId":"993c1fd1-f7ef-4fcf-5add-0150169d8863","toProperty":"item_id"},{"fromId":"bc2f2454-217f-c522-c80a-10c60835d102","fromProperty":"data","toId":"993c1fd1-f7ef-4fcf-5add-0150169d8863","toProperty":"data"},{"fromId":"bf3d5d7a-4655-98d0-5ef2-e0cd88805cf2","fromProperty":"operation","toId":"993c1fd1-f7ef-4fcf-5add-0150169d8863","toProperty":"operation"},{"fromId":"bc2f2454-217f-c522-c80a-10c60835d102","fromProperty":"Do","toId":"bf3d5d7a-4655-98d0-5ef2-e0cd88805cf2","toProperty":"Do"},{"fromId":"bc2f2454-217f-c522-c80a-10c60835d102","fromProperty":"Item ID","toId":"bf3d5d7a-4655-98d0-5ef2-e0cd88805cf2","toProperty":"Item ID"},{"fromId":"bc2f2454-217f-c522-c80a-10c60835d102","fromProperty":"Do","toId":"46706706-987a-8cab-353b-9147b0b37f68","toProperty":"Do"},{"fromId":"999bb250-4549-033d-fbe5-1269c06e7214","fromProperty":"currentState","toId":"46706706-987a-8cab-353b-9147b0b37f68","toProperty":"State"},{"fromId":"46706706-987a-8cab-353b-9147b0b37f68","fromProperty":"Success","toId":"6d9996f8-180b-47e1-09b9-1c4572ab21a0","toProperty":"run"}],"roots":[{"id":"bc2f2454-217f-c522-c80a-10c60835d102","type":"Component Inputs","x":1576,"y":2196,"parameters":{},"ports":[{"name":"Do","plug":"output","type":"*","index":0},{"name":"collection","plug":"output","type":{"name":"*"},"group":"Config","index":2},{"name":"SDK Client to use","plug":"output","type":{"name":"*"},"group":"Config","index":1},{"name":"sort","plug":"output","type":{"name":"*"},"group":"Delete by Query Parameters","index":8},{"name":"offset","plug":"output","type":{"name":"*"},"group":"Delete by Query Parameters","index":9},{"name":"page","plug":"output","type":{"name":"*"},"group":"Delete by Query Parameters","index":10},{"name":"deep","plug":"output","type":{"name":"*"},"group":"Delete by Query Parameters","index":13},{"name":"Item ID","plug":"output","type":{"name":"*"},"group":"Delete Data","index":5},{"name":"filter","plug":"output","type":{"name":"*"},"group":"Delete by Query Parameters","index":12},{"name":"search","plug":"output","type":{"name":"*"},"group":"Delete by Query Parameters","index":11},{"name":"data","plug":"output","type":{"name":"*"},"group":"Delete Data","index":6},{"name":"limit","plug":"output","type":{"name":"*"},"group":"Delete by Query Parameters","index":7},{"name":"Delete Type","plug":"output","type":{"name":"*"},"group":"Delete Data","index":3}],"dynamicports":[],"children":[]},{"id":"58b9039d-b8ab-9e58-2c7e-fa59f5cfa8ec","type":"Component Outputs","x":3147,"y":2132,"parameters":{},"ports":[{"name":"Success","plug":"input","type":"*","index":0},{"name":"Failure","plug":"input","type":"*","index":1},{"name":"error","plug":"input","type":{"name":"*"},"index":3},{"name":"result","plug":"input","type":{"name":"*"},"index":2}],"dynamicports":[],"children":[]},{"id":"03d7ad95-90dd-b2bd-b5a0-f61dc952ddba","type":"String","label":"Collection","x":1920,"y":1985,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"6d9996f8-180b-47e1-09b9-1c4572ab21a0","type":"JavaScriptFunction","x":2386,"y":1897,"parameters":{"functionScript":"const collection = Inputs.collection || null;\r\n\r\nif (typeof (collection) != \"string\" || collection.length <= 0) {\r\n    throw new Error(\"Invalid Collection value provided!\")\r\n} else {\r\n    Outputs.collection = collection;\r\n    Outputs.Done();\r\n}"},"ports":[],"dynamicports":[{"name":"in-collection","displayName":"collection","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-Done","displayName":"Done","plug":"output","type":"signal","group":"Outputs","index":5},{"name":"out-collection","displayName":"collection","plug":"output","type":"*","group":"Outputs","index":6}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"999bb250-4549-033d-fbe5-1269c06e7214","type":"States","label":"Client type","x":1922,"y":1893,"parameters":{"states":"User SDK Client,Site SDK Client","useTransitions":false},"ports":[],"dynamicports":[{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To User SDK Client","name":"to-User SDK Client","group":"Go to state","index":6},{"plug":"output","type":"boolean","displayName":"At User SDK Client","name":"at-User SDK Client","group":"Current state","index":7},{"plug":"output","type":"signal","displayName":"Has Reached User SDK Client","name":"reached-User SDK Client","group":"Current state","index":8},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To Site SDK Client","name":"to-Site SDK Client","group":"Go to state","index":9},{"plug":"output","type":"boolean","displayName":"At Site SDK Client","name":"at-Site SDK Client","group":"Current state","index":10},{"plug":"output","type":"signal","displayName":"Has Reached Site SDK Client","name":"reached-Site SDK Client","group":"Current state","index":11},{"plug":"input","type":{"name":"enum","enums":["User SDK Client","Site SDK Client"]},"group":"States","displayName":"State","name":"currentState","default":"User SDK Client","index":12}],"children":[]},{"id":"438a6a74-6c9b-01cd-dcd8-3b0ee9045140","type":"Timer","x":2604,"y":1898,"parameters":{"duration":100},"ports":[],"dynamicports":[],"children":[]},{"id":"993c1fd1-f7ef-4fcf-5add-0150169d8863","type":"Javascript2","x":2922,"y":2136,"parameters":{"code":"Script.Inputs = {\r\n    client: \"string\",\r\n    collection: \"string\",\r\n    query: \"object\",\r\n    operation: \"string\"\r\n}\r\n\r\n\r\nScript.Signals.DeleteData = async function () {\r\n\r\n    const client_selection = Script.Inputs.client || null;\r\n    const sdk_client = (client_selection == \"User SDK Client\") ? Noodl.Objects.DirectusSDK.Client : Noodl.Objects.DirectusSDK.SiteClient;\r\n\r\n    const collection = Script.Inputs.collection;\r\n\r\n    const operation = Script.Inputs.operation ?? null;\r\n    const item_id = Script.Inputs.item_id ?? null;\r\n    \r\n    let data = Script.Inputs.data ?? null;\r\n    const query = Script.Inputs.query || {};\r\n\r\n    if(Object.keys(query).length > 0) data = { ...query };\r\n\r\n    try {\r\n        if (sdk_client && collection && operation) {\r\n            let result;\r\n            switch (operation) {\r\n                case \"single\":\r\n                    if(!item_id) throw new Error(\"Provide valid Item ID!\");\r\n                    result = item_id ? await sdk_client.request(Directus.deleteItem(collection, item_id)) : null;\r\n                    break;\r\n                case \"multiple\":\r\n                    result = data ? await sdk_client.request(Directus.deleteItems(collection, data)) : null;\r\n                    break;\r\n                case \"all\":\r\n                    data = {\r\n                        limit : -1\r\n                    }\r\n                    result = await sdk_client.request(Directus.deleteItems(collection, data));\r\n                    break;\r\n            }\r\n            \r\n            Script.Outputs.result = result;\r\n            if (result) {\r\n                Script.Outputs.Success();\r\n            } else {\r\n                Script.Outputs.Failure();\r\n            }\r\n        } else {\r\n            Script.Outputs.error = \"Invalid configuration!\";\r\n            Script.Outputs.Failure();\r\n        }\r\n\r\n    } catch (err) {\r\n        console.error(err);\r\n\r\n        Script.Outputs.error = err?.errors.map(i => i.message).join(\"\\n\") ?? JSON.stringify(err);\r\n        Script.Outputs.Failure();\r\n    }\r\n}\r\n"},"ports":[],"dynamicports":[{"name":"client","plug":"input","type":{"name":"string"},"group":"Inputs","index":5},{"name":"collection","plug":"input","type":{"name":"string"},"group":"Inputs","index":6},{"name":"query","plug":"input","type":{"name":"object"},"group":"Inputs","index":7},{"name":"operation","plug":"input","type":{"name":"string"},"group":"Inputs","index":8},{"name":"DeleteData","plug":"input","type":{"name":"signal"},"group":"Inputs","index":9},{"name":"item_id","displayName":"item_id","plug":"input","type":"*","group":"Inputs","index":10},{"name":"data","displayName":"data","plug":"input","type":"*","group":"Inputs","index":11},{"name":"Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":12},{"name":"Failure","displayName":"Failure","plug":"output","type":"signal","group":"Outputs","index":13},{"name":"result","displayName":"result","plug":"output","type":"*","group":"Outputs","index":14},{"name":"error","displayName":"error","plug":"output","type":"*","group":"Outputs","index":15}],"children":[],"metadata":{"merge":{"soureCodePorts":["code"]}}},{"id":"bf3d5d7a-4655-98d0-5ef2-e0cd88805cf2","type":"/#Directus/Directus Prefab/Components/Utils - Query Parameters/Directus - Query parameters (for Delete)","x":2206.128205128205,"y":2287.0782067714595,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"ddcfdd4e-cbaa-459e-43a3-24574cbeaa41","type":"States","x":1908.594017094017,"y":2200.406518756834,"parameters":{"states":"Delete Single by ID,Delete Multiple by Filter,Delete All"},"ports":[],"dynamicports":[{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To Delete Single by ID","name":"to-Delete Single by ID","group":"Go to state","index":6},{"plug":"output","type":"boolean","displayName":"At Delete Single by ID","name":"at-Delete Single by ID","group":"Current state","index":7},{"plug":"output","type":"signal","displayName":"Has Reached Delete Single by ID","name":"reached-Delete Single by ID","group":"Current state","index":8},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To Delete Multiple by Filter","name":"to-Delete Multiple by Filter","group":"Go to state","index":9},{"plug":"output","type":"boolean","displayName":"At Delete Multiple by Filter","name":"at-Delete Multiple by Filter","group":"Current state","index":10},{"plug":"output","type":"signal","displayName":"Has Reached Delete Multiple by Filter","name":"reached-Delete Multiple by Filter","group":"Current state","index":11},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To Delete All","name":"to-Delete All","group":"Go to state","index":12},{"plug":"output","type":"boolean","displayName":"At Delete All","name":"at-Delete All","group":"Current state","index":13},{"plug":"output","type":"signal","displayName":"Has Reached Delete All","name":"reached-Delete All","group":"Current state","index":14},{"plug":"input","type":{"name":"enum","enums":["Delete Single by ID","Delete Multiple by Filter","Delete All"]},"group":"States","displayName":"State","name":"currentState","default":"Delete Single by ID","index":15}],"children":[]},{"id":"46706706-987a-8cab-353b-9147b0b37f68","type":"/#Directus/Directus Prefab/Components/Utils/SDK Client Check","x":2144,"y":1785,"parameters":{},"ports":[],"dynamicports":[],"children":[]}],"visualRoots":[],"comments":[{"text":"Either set the Query Parameters or one of : \n- Item ID (for Single)\n- Data (for Multiple)\n\nNote: If Query parameters are set, then the data property will be ignored","width":260,"height":272,"fill":"transparent","x":1541,"y":1783,"id":"f99f645d-4136-66d0-3783-15645c8a4610","largeFont":true,"color":"notice"}]}},{"name":"/#Directus/Directus Prefab/Components/Data/Directus - Get Data","id":"a291d291-91c0-6c93-8b13-f46facde3bbc","graph":{"connections":[{"fromId":"83bf8ce4-5a5d-a63c-d381-7f3d0222c43c","fromProperty":"collection","toId":"5976731e-b546-68c0-8b03-9b95aa94e478","toProperty":"value"},{"fromId":"5976731e-b546-68c0-8b03-9b95aa94e478","fromProperty":"savedValue","toId":"c0347f80-a182-a888-96af-f700e775651a","toProperty":"in-collection"},{"fromId":"83bf8ce4-5a5d-a63c-d381-7f3d0222c43c","fromProperty":"SDK Client to use","toId":"8a48757e-95dd-6e67-1ea0-5549f6fb7edf","toProperty":"currentState"},{"fromId":"c0347f80-a182-a888-96af-f700e775651a","fromProperty":"out-Done","toId":"5f5ef5e2-4385-6a0a-491b-444dcd9b90d0","toProperty":"start"},{"fromId":"83bf8ce4-5a5d-a63c-d381-7f3d0222c43c","fromProperty":"Do","toId":"57a862eb-97da-6cfa-4910-b17f9e25dce9","toProperty":"Set"},{"fromId":"83bf8ce4-5a5d-a63c-d381-7f3d0222c43c","fromProperty":"aggregate","toId":"57a862eb-97da-6cfa-4910-b17f9e25dce9","toProperty":"aggregate"},{"fromId":"83bf8ce4-5a5d-a63c-d381-7f3d0222c43c","fromProperty":"groupBy","toId":"57a862eb-97da-6cfa-4910-b17f9e25dce9","toProperty":"groupBy"},{"fromId":"83bf8ce4-5a5d-a63c-d381-7f3d0222c43c","fromProperty":"filter","toId":"57a862eb-97da-6cfa-4910-b17f9e25dce9","toProperty":"filter"},{"fromId":"83bf8ce4-5a5d-a63c-d381-7f3d0222c43c","fromProperty":"deep","toId":"57a862eb-97da-6cfa-4910-b17f9e25dce9","toProperty":"deep"},{"fromId":"83bf8ce4-5a5d-a63c-d381-7f3d0222c43c","fromProperty":"alias","toId":"57a862eb-97da-6cfa-4910-b17f9e25dce9","toProperty":"alias"},{"fromId":"83bf8ce4-5a5d-a63c-d381-7f3d0222c43c","fromProperty":"item ID","toId":"57a862eb-97da-6cfa-4910-b17f9e25dce9","toProperty":"Item ID"},{"fromId":"83bf8ce4-5a5d-a63c-d381-7f3d0222c43c","fromProperty":"limit","toId":"57a862eb-97da-6cfa-4910-b17f9e25dce9","toProperty":"Limit"},{"fromId":"83bf8ce4-5a5d-a63c-d381-7f3d0222c43c","fromProperty":"Get all fields","toId":"57a862eb-97da-6cfa-4910-b17f9e25dce9","toProperty":"Get all fields"},{"fromId":"83bf8ce4-5a5d-a63c-d381-7f3d0222c43c","fromProperty":"fields","toId":"57a862eb-97da-6cfa-4910-b17f9e25dce9","toProperty":"Fields"},{"fromId":"83bf8ce4-5a5d-a63c-d381-7f3d0222c43c","fromProperty":"sort","toId":"57a862eb-97da-6cfa-4910-b17f9e25dce9","toProperty":"Sort"},{"fromId":"83bf8ce4-5a5d-a63c-d381-7f3d0222c43c","fromProperty":"offset","toId":"57a862eb-97da-6cfa-4910-b17f9e25dce9","toProperty":"Offset"},{"fromId":"83bf8ce4-5a5d-a63c-d381-7f3d0222c43c","fromProperty":"page","toId":"57a862eb-97da-6cfa-4910-b17f9e25dce9","toProperty":"Page"},{"fromId":"83bf8ce4-5a5d-a63c-d381-7f3d0222c43c","fromProperty":"search","toId":"57a862eb-97da-6cfa-4910-b17f9e25dce9","toProperty":"Search"},{"fromId":"57a862eb-97da-6cfa-4910-b17f9e25dce9","fromProperty":"query","toId":"5702c341-6221-7c9c-e8c1-773636139340","toProperty":"query"},{"fromId":"57a862eb-97da-6cfa-4910-b17f9e25dce9","fromProperty":"operation","toId":"5702c341-6221-7c9c-e8c1-773636139340","toProperty":"operation"},{"fromId":"57a862eb-97da-6cfa-4910-b17f9e25dce9","fromProperty":"itemID","toId":"5702c341-6221-7c9c-e8c1-773636139340","toProperty":"itemID"},{"fromId":"5f5ef5e2-4385-6a0a-491b-444dcd9b90d0","fromProperty":"timerFinished","toId":"5702c341-6221-7c9c-e8c1-773636139340","toProperty":"GetData"},{"fromId":"5702c341-6221-7c9c-e8c1-773636139340","fromProperty":"Success","toId":"616c96cd-1153-46e9-e086-a2faa608db09","toProperty":"Success"},{"fromId":"5702c341-6221-7c9c-e8c1-773636139340","fromProperty":"Failure","toId":"616c96cd-1153-46e9-e086-a2faa608db09","toProperty":"Failure"},{"fromId":"5702c341-6221-7c9c-e8c1-773636139340","fromProperty":"result","toId":"616c96cd-1153-46e9-e086-a2faa608db09","toProperty":"result"},{"fromId":"5702c341-6221-7c9c-e8c1-773636139340","fromProperty":"error","toId":"616c96cd-1153-46e9-e086-a2faa608db09","toProperty":"error"},{"fromId":"c0347f80-a182-a888-96af-f700e775651a","fromProperty":"out-collection","toId":"5702c341-6221-7c9c-e8c1-773636139340","toProperty":"collection"},{"fromId":"8a48757e-95dd-6e67-1ea0-5549f6fb7edf","fromProperty":"currentState","toId":"5702c341-6221-7c9c-e8c1-773636139340","toProperty":"client"},{"fromId":"83bf8ce4-5a5d-a63c-d381-7f3d0222c43c","fromProperty":"Item Get type","toId":"747e8a1a-7122-ff7a-2aa6-5c258a483ad4","toProperty":"currentState"},{"fromId":"747e8a1a-7122-ff7a-2aa6-5c258a483ad4","fromProperty":"currentState","toId":"57a862eb-97da-6cfa-4910-b17f9e25dce9","toProperty":"Get Type"},{"fromId":"8a48757e-95dd-6e67-1ea0-5549f6fb7edf","fromProperty":"currentState","toId":"e64f43b9-c23a-ce5d-76f6-cebfe97a0141","toProperty":"State"},{"fromId":"83bf8ce4-5a5d-a63c-d381-7f3d0222c43c","fromProperty":"Do","toId":"e64f43b9-c23a-ce5d-76f6-cebfe97a0141","toProperty":"Do"},{"fromId":"e64f43b9-c23a-ce5d-76f6-cebfe97a0141","fromProperty":"Success","toId":"c0347f80-a182-a888-96af-f700e775651a","toProperty":"run"},{"fromId":"83bf8ce4-5a5d-a63c-d381-7f3d0222c43c","fromProperty":"Map incoming ID field","toId":"8ad4c9c4-5161-e8a5-43bb-784eaff3bb5f","toProperty":"currentState"},{"fromId":"83bf8ce4-5a5d-a63c-d381-7f3d0222c43c","fromProperty":"ID new name","toId":"8ad4c9c4-5161-e8a5-43bb-784eaff3bb5f","toProperty":"value-Yes-new_id"},{"fromId":"8ad4c9c4-5161-e8a5-43bb-784eaff3bb5f","fromProperty":"new_id","toId":"5702c341-6221-7c9c-e8c1-773636139340","toProperty":"id_new"}],"roots":[{"id":"83bf8ce4-5a5d-a63c-d381-7f3d0222c43c","type":"Component Inputs","x":-1060,"y":320,"parameters":{},"ports":[{"name":"Do","plug":"output","type":"*","index":0},{"name":"limit","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":5},{"name":"collection","plug":"output","type":{"name":"*"},"group":"Config","index":2},{"name":"fields","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":7},{"name":"Get all fields","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":6},{"name":"SDK Client to use","plug":"output","type":{"name":"*"},"group":"Config","index":1},{"name":"sort","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":8},{"name":"offset","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":9},{"name":"page","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":10},{"name":"deep","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":15},{"name":"groupBy","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":13},{"name":"aggregate","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":12},{"name":"alias","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":16},{"name":"item ID","plug":"output","type":{"name":"*"},"group":"What to Get","index":4},{"name":"filter","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":14},{"name":"search","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":11},{"name":"Item Get type","plug":"output","type":{"name":"*"},"group":"What to Get","index":3},{"name":"Map incoming ID field","plug":"output","type":{"name":"*"},"group":"Map ID field","index":17},{"name":"ID new name","plug":"output","type":{"name":"*"},"group":"Map ID field","index":18}],"dynamicports":[],"children":[]},{"id":"616c96cd-1153-46e9-e086-a2faa608db09","type":"Component Outputs","x":515.0278684333703,"y":281.160111934135,"parameters":{},"ports":[{"name":"Success","plug":"input","type":"*","index":0},{"name":"Failure","plug":"input","type":"*","index":1},{"name":"error","plug":"input","type":{"name":"*"},"index":3},{"name":"result","plug":"input","type":{"name":"*"},"index":2}],"dynamicports":[],"children":[]},{"id":"5976731e-b546-68c0-8b03-9b95aa94e478","type":"String","label":"Collection","x":-717.0311384224406,"y":145.03933031980006,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"c0347f80-a182-a888-96af-f700e775651a","type":"JavaScriptFunction","x":-254.86883361498792,"y":41.91530084178885,"parameters":{"functionScript":"const collection = Inputs.collection || null;\r\n\r\nif (typeof (collection) != \"string\" || collection.length <= 0) {\r\n    throw new Error(\"Invalid Collection value provided!\")\r\n} else {\r\n    Outputs.collection = collection;\r\n    Outputs.Done();\r\n}"},"ports":[],"dynamicports":[{"name":"in-collection","displayName":"collection","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-Done","displayName":"Done","plug":"output","type":"signal","group":"Outputs","index":5},{"name":"out-collection","displayName":"collection","plug":"output","type":"*","group":"Outputs","index":6}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"8a48757e-95dd-6e67-1ea0-5549f6fb7edf","type":"States","label":"Client type","x":-718.8506931928334,"y":37.23896749460039,"parameters":{"states":"User SDK Client,Site SDK Client","useTransitions":false},"ports":[],"dynamicports":[{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To User SDK Client","name":"to-User SDK Client","group":"Go to state","index":6},{"plug":"output","type":"boolean","displayName":"At User SDK Client","name":"at-User SDK Client","group":"Current state","index":7},{"plug":"output","type":"signal","displayName":"Has Reached User SDK Client","name":"reached-User SDK Client","group":"Current state","index":8},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To Site SDK Client","name":"to-Site SDK Client","group":"Go to state","index":9},{"plug":"output","type":"boolean","displayName":"At Site SDK Client","name":"at-Site SDK Client","group":"Current state","index":10},{"plug":"output","type":"signal","displayName":"Has Reached Site SDK Client","name":"reached-Site SDK Client","group":"Current state","index":11},{"plug":"input","type":{"name":"enum","enums":["User SDK Client","Site SDK Client"]},"group":"States","displayName":"State","name":"currentState","default":"User SDK Client","index":12}],"children":[]},{"id":"5f5ef5e2-4385-6a0a-491b-444dcd9b90d0","type":"Timer","x":-36.483010757231796,"y":42.6441192217863,"parameters":{"duration":100},"ports":[],"dynamicports":[],"children":[]},{"id":"57a862eb-97da-6cfa-4910-b17f9e25dce9","type":"/#Directus/Directus Prefab/Components/Utils - Query Parameters/Directus - Query parameters (for Read)","x":-421.86744630779845,"y":330.1155290943941,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"5702c341-6221-7c9c-e8c1-773636139340","type":"Javascript2","x":281.42005339425987,"y":280.5398400765414,"parameters":{"code":"Script.Inputs = {\r\n    client: \"string\",\r\n    collection: \"string\",\r\n    operation: \"string\",\r\n    itemID: \"string\",\r\n    query: \"object\",\r\n    id_new: \"string\"\r\n}\r\n\r\nfunction map_id_field(data, id_new) {\r\n    if (id_new && id_new != \"\" && data) {\r\n        if (Array.isArray(data) && data.length > 0) {\r\n\r\n            let temp_res = data.map(i => {\r\n                let temp = {\r\n                    ...i\r\n                };\r\n                if (i.id) temp[id_new] = i.id;\r\n                return temp;\r\n            });\r\n            return temp_res;\r\n\r\n        } else if (typeof (data) == \"object\") {\r\n\r\n            let temp = {\r\n                ...data\r\n            };\r\n            if (data.id) temp[id_new] = data.id;\r\n            return temp;\r\n\r\n        }\r\n    }\r\n    return data;\r\n}\r\n\r\n\r\nScript.Signals.GetData = async function () {\r\n\r\n    const client_selection = Script.Inputs.client || null;\r\n    const sdk_client = (client_selection == \"User SDK Client\") ? Noodl.Objects.DirectusSDK.Client : Noodl.Objects.DirectusSDK.SiteClient;\r\n\r\n    const collection = Script.Inputs.collection;\r\n    const operation = Script.Inputs.operation;\r\n    const id_new = Script.Inputs.id_new || null;\r\n\r\n    const itemID = Script.Inputs.itemID;\r\n\r\n    const query = Script.Inputs.query || {};\r\n\r\n    try {\r\n        if (sdk_client && collection && operation) {\r\n            let result;\r\n            switch (operation) {\r\n                case \"single\":\r\n                    if (!itemID) throw new Error(\"Provide valid ID!\");\r\n                    result = await sdk_client.request(Directus.readItem(collection, itemID, query));\r\n                    break;\r\n                case \"multiple\":\r\n                    result = await sdk_client.request(Directus.readItems(collection, query));\r\n                    break;\r\n                case \"all\":\r\n                    query.limit = -1;\r\n                    result = await sdk_client.request(Directus.readItems(collection, query));\r\n                    break;\r\n                case \"singleton\":\r\n                    result = await sdk_client.request(Directus.readSingleton(collection, query));\r\n                    break;\r\n            }\r\n\r\n            result = map_id_field(result, id_new); // Map the id field in the incoming data to a new field, if set\r\n\r\n            Script.Outputs.result = result;\r\n            if (result) {\r\n                Script.Outputs.Success();\r\n            } else {\r\n                Script.Outputs.Failure();\r\n            }\r\n        } else {\r\n            Script.Outputs.error = \"Invalid configuration!\";\r\n            Script.Outputs.Failure();\r\n        }\r\n\r\n    } catch (err) {\r\n        console.error(err);\r\n\r\n        Script.Outputs.error = err?.errors.map(i => i.message).join(\"\\n\") ?? JSON.stringify(err);\r\n        Script.Outputs.Failure();\r\n    }\r\n}\r\n"},"ports":[],"dynamicports":[{"name":"client","plug":"input","type":{"name":"string"},"group":"Inputs","index":5},{"name":"collection","plug":"input","type":{"name":"string"},"group":"Inputs","index":6},{"name":"operation","plug":"input","type":{"name":"string"},"group":"Inputs","index":7},{"name":"itemID","plug":"input","type":{"name":"string"},"group":"Inputs","index":8},{"name":"query","plug":"input","type":{"name":"object"},"group":"Inputs","index":9},{"name":"id_new","plug":"input","type":{"name":"string"},"group":"Inputs","index":10},{"name":"GetData","plug":"input","type":{"name":"signal"},"group":"Inputs","index":11},{"name":"Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":12},{"name":"Failure","displayName":"Failure","plug":"output","type":"signal","group":"Outputs","index":13},{"name":"result","displayName":"result","plug":"output","type":"*","group":"Outputs","index":14},{"name":"error","displayName":"error","plug":"output","type":"*","group":"Outputs","index":15}],"children":[],"metadata":{"merge":{"soureCodePorts":["code"]}}},{"id":"747e8a1a-7122-ff7a-2aa6-5c258a483ad4","type":"States","label":"Get Type","x":-719.5269848854084,"y":259.36393813385837,"parameters":{"states":"Get Single by ID,Get Multiple by Filter,Get All,Get Singleton"},"ports":[],"dynamicports":[{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To Get Single by ID","name":"to-Get Single by ID","group":"Go to state","index":6},{"plug":"output","type":"boolean","displayName":"At Get Single by ID","name":"at-Get Single by ID","group":"Current state","index":7},{"plug":"output","type":"signal","displayName":"Has Reached Get Single by ID","name":"reached-Get Single by ID","group":"Current state","index":8},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To Get Multiple by Filter","name":"to-Get Multiple by Filter","group":"Go to state","index":9},{"plug":"output","type":"boolean","displayName":"At Get Multiple by Filter","name":"at-Get Multiple by Filter","group":"Current state","index":10},{"plug":"output","type":"signal","displayName":"Has Reached Get Multiple by Filter","name":"reached-Get Multiple by Filter","group":"Current state","index":11},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To Get All","name":"to-Get All","group":"Go to state","index":12},{"plug":"output","type":"boolean","displayName":"At Get All","name":"at-Get All","group":"Current state","index":13},{"plug":"output","type":"signal","displayName":"Has Reached Get All","name":"reached-Get All","group":"Current state","index":14},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To Get Singleton","name":"to-Get Singleton","group":"Go to state","index":15},{"plug":"output","type":"boolean","displayName":"At Get Singleton","name":"at-Get Singleton","group":"Current state","index":16},{"plug":"output","type":"signal","displayName":"Has Reached Get Singleton","name":"reached-Get Singleton","group":"Current state","index":17},{"plug":"input","type":{"name":"enum","enums":["Get Single by ID","Get Multiple by Filter","Get All","Get Singleton"]},"group":"States","displayName":"State","name":"currentState","default":"Get Single by ID","index":18}],"children":[]},{"id":"e64f43b9-c23a-ce5d-76f6-cebfe97a0141","type":"/#Directus/Directus Prefab/Components/Utils/SDK Client Check","x":-483,"y":-28,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"8ad4c9c4-5161-e8a5-43bb-784eaff3bb5f","type":"States","x":-739,"y":730,"parameters":{"states":"No,Yes","useTransitions":false,"values":"new_id","type-new_id":"string","value-Yes-new_id":"directus_id"},"ports":[],"dynamicports":[{"type":{"name":"string","allowConnectionsOnly":true},"plug":"output","group":"Values","name":"new_id","index":6},{"type":{"name":"enum","enums":[{"label":"Number","value":"number"},{"label":"String","value":"string"},{"label":"Boolean","value":"boolean"},{"label":"Color","value":"color"},{"label":"Text Style","value":"textStyle"}],"allowEditOnly":true},"default":"number","plug":"input","group":"Types","displayName":"new_id","name":"type-new_id","index":7},{"plug":"input","type":"string","group":"No Values","name":"value-No-new_id","displayName":"new_id","editorName":"No|new_id","index":8},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To No","name":"to-No","group":"Go to state","index":9},{"plug":"output","type":"boolean","displayName":"At No","name":"at-No","group":"Current state","index":10},{"plug":"output","type":"signal","displayName":"Has Reached No","name":"reached-No","group":"Current state","index":11},{"plug":"input","type":"string","group":"Yes Values","name":"value-Yes-new_id","displayName":"new_id","editorName":"Yes|new_id","index":12},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To Yes","name":"to-Yes","group":"Go to state","index":13},{"plug":"output","type":"boolean","displayName":"At Yes","name":"at-Yes","group":"Current state","index":14},{"plug":"output","type":"signal","displayName":"Has Reached Yes","name":"reached-Yes","group":"Current state","index":15},{"plug":"input","type":{"name":"enum","enums":["No","Yes"]},"group":"States","displayName":"State","name":"currentState","default":"No","index":16}],"children":[]}],"visualRoots":[]}},{"name":"/#Directus/Directus Prefab/Components/Data/Directus - Update Data","id":"ae31185f-4562-145a-801d-be6b0b0c1294","graph":{"connections":[{"fromId":"b51e63ca-7228-c046-d0db-8d17bf221dd3","fromProperty":"collection","toId":"69b6c0f8-5778-503d-ec28-88407ba5c324","toProperty":"value"},{"fromId":"69b6c0f8-5778-503d-ec28-88407ba5c324","fromProperty":"savedValue","toId":"2df6ecac-c383-b5f5-2d9e-351399b97896","toProperty":"in-collection"},{"fromId":"b51e63ca-7228-c046-d0db-8d17bf221dd3","fromProperty":"SDK Client to use","toId":"09dcea6b-26a6-ceb1-87de-32ed983ee577","toProperty":"currentState"},{"fromId":"2df6ecac-c383-b5f5-2d9e-351399b97896","fromProperty":"out-Done","toId":"9f9aefca-8596-b136-f4cd-25527b41c5b8","toProperty":"start"},{"fromId":"ee7cf46f-64ba-9831-f443-70979939ffb2","fromProperty":"Success","toId":"5f69a919-ce06-efe5-0958-389aa70b0472","toProperty":"Success"},{"fromId":"ee7cf46f-64ba-9831-f443-70979939ffb2","fromProperty":"Failure","toId":"5f69a919-ce06-efe5-0958-389aa70b0472","toProperty":"Failure"},{"fromId":"ee7cf46f-64ba-9831-f443-70979939ffb2","fromProperty":"result","toId":"5f69a919-ce06-efe5-0958-389aa70b0472","toProperty":"result"},{"fromId":"ee7cf46f-64ba-9831-f443-70979939ffb2","fromProperty":"error","toId":"5f69a919-ce06-efe5-0958-389aa70b0472","toProperty":"error"},{"fromId":"2df6ecac-c383-b5f5-2d9e-351399b97896","fromProperty":"out-collection","toId":"ee7cf46f-64ba-9831-f443-70979939ffb2","toProperty":"collection"},{"fromId":"09dcea6b-26a6-ceb1-87de-32ed983ee577","fromProperty":"currentState","toId":"ee7cf46f-64ba-9831-f443-70979939ffb2","toProperty":"client"},{"fromId":"b51e63ca-7228-c046-d0db-8d17bf221dd3","fromProperty":"limit","toId":"4965086e-0dc6-c38a-f49b-d6ab485bf4e5","toProperty":"Limit"},{"fromId":"b51e63ca-7228-c046-d0db-8d17bf221dd3","fromProperty":"offset","toId":"4965086e-0dc6-c38a-f49b-d6ab485bf4e5","toProperty":"Offset"},{"fromId":"b51e63ca-7228-c046-d0db-8d17bf221dd3","fromProperty":"page","toId":"4965086e-0dc6-c38a-f49b-d6ab485bf4e5","toProperty":"Page"},{"fromId":"b51e63ca-7228-c046-d0db-8d17bf221dd3","fromProperty":"search","toId":"4965086e-0dc6-c38a-f49b-d6ab485bf4e5","toProperty":"Search"},{"fromId":"b51e63ca-7228-c046-d0db-8d17bf221dd3","fromProperty":"filter","toId":"4965086e-0dc6-c38a-f49b-d6ab485bf4e5","toProperty":"filter"},{"fromId":"b51e63ca-7228-c046-d0db-8d17bf221dd3","fromProperty":"deep","toId":"4965086e-0dc6-c38a-f49b-d6ab485bf4e5","toProperty":"deep"},{"fromId":"b51e63ca-7228-c046-d0db-8d17bf221dd3","fromProperty":"Do","toId":"4965086e-0dc6-c38a-f49b-d6ab485bf4e5","toProperty":"Set"},{"fromId":"b51e63ca-7228-c046-d0db-8d17bf221dd3","fromProperty":"Update Type","toId":"7c2dc38c-7d39-ccce-7e16-3d8ea2096be0","toProperty":"currentState"},{"fromId":"7c2dc38c-7d39-ccce-7e16-3d8ea2096be0","fromProperty":"currentState","toId":"4965086e-0dc6-c38a-f49b-d6ab485bf4e5","toProperty":"Update Type"},{"fromId":"4965086e-0dc6-c38a-f49b-d6ab485bf4e5","fromProperty":"query","toId":"ee7cf46f-64ba-9831-f443-70979939ffb2","toProperty":"query"},{"fromId":"4965086e-0dc6-c38a-f49b-d6ab485bf4e5","fromProperty":"operation","toId":"ee7cf46f-64ba-9831-f443-70979939ffb2","toProperty":"operation"},{"fromId":"b51e63ca-7228-c046-d0db-8d17bf221dd3","fromProperty":"Item ID","toId":"4965086e-0dc6-c38a-f49b-d6ab485bf4e5","toProperty":"Item ID"},{"fromId":"4965086e-0dc6-c38a-f49b-d6ab485bf4e5","fromProperty":"itemID","toId":"ee7cf46f-64ba-9831-f443-70979939ffb2","toProperty":"itemID"},{"fromId":"9f9aefca-8596-b136-f4cd-25527b41c5b8","fromProperty":"timerFinished","toId":"ee7cf46f-64ba-9831-f443-70979939ffb2","toProperty":"UpdateData"},{"fromId":"b51e63ca-7228-c046-d0db-8d17bf221dd3","fromProperty":"Item ID Array","toId":"4965086e-0dc6-c38a-f49b-d6ab485bf4e5","toProperty":"Item IDs Array"},{"fromId":"4965086e-0dc6-c38a-f49b-d6ab485bf4e5","fromProperty":"itemIDArray","toId":"ee7cf46f-64ba-9831-f443-70979939ffb2","toProperty":"itemIDArray"},{"fromId":"b51e63ca-7228-c046-d0db-8d17bf221dd3","fromProperty":"data","toId":"ee7cf46f-64ba-9831-f443-70979939ffb2","toProperty":"data"},{"fromId":"b51e63ca-7228-c046-d0db-8d17bf221dd3","fromProperty":"sort","toId":"4965086e-0dc6-c38a-f49b-d6ab485bf4e5","toProperty":"Sort"},{"fromId":"09dcea6b-26a6-ceb1-87de-32ed983ee577","fromProperty":"currentState","toId":"88ee6f88-1cad-849a-a89d-17b56cea874d","toProperty":"State"},{"fromId":"b51e63ca-7228-c046-d0db-8d17bf221dd3","fromProperty":"Do","toId":"88ee6f88-1cad-849a-a89d-17b56cea874d","toProperty":"Do"},{"fromId":"88ee6f88-1cad-849a-a89d-17b56cea874d","fromProperty":"Success","toId":"2df6ecac-c383-b5f5-2d9e-351399b97896","toProperty":"run"},{"fromId":"b51e63ca-7228-c046-d0db-8d17bf221dd3","fromProperty":"Map incoming ID field","toId":"251d1bab-8a6f-476d-32f9-3f46a9f28c84","toProperty":"currentState"},{"fromId":"b51e63ca-7228-c046-d0db-8d17bf221dd3","fromProperty":"ID new name","toId":"251d1bab-8a6f-476d-32f9-3f46a9f28c84","toProperty":"value-Yes-new_id"},{"fromId":"251d1bab-8a6f-476d-32f9-3f46a9f28c84","fromProperty":"new_id","toId":"ee7cf46f-64ba-9831-f443-70979939ffb2","toProperty":"id_new"}],"roots":[{"id":"b51e63ca-7228-c046-d0db-8d17bf221dd3","type":"Component Inputs","x":1676,"y":1858.0000000000002,"parameters":{},"ports":[{"name":"Do","plug":"output","type":"*","index":0},{"name":"limit","plug":"output","type":{"name":"*"},"group":"Update Multiple Items","index":8},{"name":"collection","plug":"output","type":{"name":"*"},"group":"Config","index":2},{"name":"SDK Client to use","plug":"output","type":{"name":"*"},"group":"Config","index":1},{"name":"sort","plug":"output","type":{"name":"*"},"group":"Update Multiple Items","index":9},{"name":"offset","plug":"output","type":{"name":"*"},"group":"Update Multiple Items","index":10},{"name":"page","plug":"output","type":{"name":"*"},"group":"Update Multiple Items","index":11},{"name":"deep","plug":"output","type":{"name":"*"},"group":"Update Multiple Items","index":14},{"name":"Item ID","plug":"output","type":{"name":"*"},"group":"Update Item by ID","index":5},{"name":"filter","plug":"output","type":{"name":"*"},"group":"Update Multiple Items","index":13},{"name":"search","plug":"output","type":{"name":"*"},"group":"Update Multiple Items","index":12},{"name":"Update Type","plug":"output","type":{"name":"*"},"group":"What to Update","index":3},{"name":"Item ID Array","plug":"output","type":{"name":"*"},"group":"Update Item by ID","index":6},{"name":"data","plug":"output","type":{"name":"*"},"group":"Data","index":16},{"name":"Map incoming ID field","plug":"output","type":{"name":"*"},"group":"Map ID field","index":17},{"name":"ID new name","plug":"output","type":{"name":"*"},"group":"Map ID field","index":18}],"dynamicports":[],"children":[]},{"id":"5f69a919-ce06-efe5-0958-389aa70b0472","type":"Component Outputs","x":3223,"y":1846,"parameters":{},"ports":[{"name":"Success","plug":"input","type":"*","index":0},{"name":"Failure","plug":"input","type":"*","index":1},{"name":"error","plug":"input","type":{"name":"*"},"index":3},{"name":"result","plug":"input","type":{"name":"*"},"index":2}],"dynamicports":[],"children":[]},{"id":"69b6c0f8-5778-503d-ec28-88407ba5c324","type":"String","label":"Collection","x":2018,"y":1596,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"2df6ecac-c383-b5f5-2d9e-351399b97896","type":"JavaScriptFunction","x":2484,"y":1508,"parameters":{"functionScript":"const collection = Inputs.collection || null;\r\n\r\nif (typeof (collection) != \"string\" || collection.length <= 0) {\r\n    throw new Error(\"Invalid Collection value provided!\")\r\n} else {\r\n    Outputs.collection = collection;\r\n    Outputs.Done();\r\n}"},"ports":[],"dynamicports":[{"name":"in-collection","displayName":"collection","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-Done","displayName":"Done","plug":"output","type":"signal","group":"Outputs","index":5},{"name":"out-collection","displayName":"collection","plug":"output","type":"*","group":"Outputs","index":6}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"09dcea6b-26a6-ceb1-87de-32ed983ee577","type":"States","label":"Client type","x":2020,"y":1503,"parameters":{"states":"User SDK Client,Site SDK Client","useTransitions":false},"ports":[],"dynamicports":[{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To User SDK Client","name":"to-User SDK Client","group":"Go to state","index":6},{"plug":"output","type":"boolean","displayName":"At User SDK Client","name":"at-User SDK Client","group":"Current state","index":7},{"plug":"output","type":"signal","displayName":"Has Reached User SDK Client","name":"reached-User SDK Client","group":"Current state","index":8},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To Site SDK Client","name":"to-Site SDK Client","group":"Go to state","index":9},{"plug":"output","type":"boolean","displayName":"At Site SDK Client","name":"at-Site SDK Client","group":"Current state","index":10},{"plug":"output","type":"signal","displayName":"Has Reached Site SDK Client","name":"reached-Site SDK Client","group":"Current state","index":11},{"plug":"input","type":{"name":"enum","enums":["User SDK Client","Site SDK Client"]},"group":"States","displayName":"State","name":"currentState","default":"User SDK Client","index":12}],"children":[]},{"id":"9f9aefca-8596-b136-f4cd-25527b41c5b8","type":"Timer","x":2702,"y":1509,"parameters":{"duration":100},"ports":[],"dynamicports":[],"children":[]},{"id":"ee7cf46f-64ba-9831-f443-70979939ffb2","type":"Javascript2","x":3020,"y":1747,"parameters":{"code":"Script.Inputs = {\r\n    client: \"string\",\r\n    collection: \"string\",\r\n    operation: \"string\",\r\n    itemID: \"string\",\r\n    itemIDArray: \"array\",\r\n    query: \"object\",\r\n    data: \"object\",\r\n    id_new: \"string\"\r\n}\r\n\r\nfunction map_id_field(data, id_new) {\r\n    if (id_new && id_new != \"\" && data) {\r\n        if (Array.isArray(data) && data.length > 0) {\r\n\r\n            let temp_res = data.map(i => {\r\n                let temp = {\r\n                    ...i\r\n                };\r\n                if (i.id) temp[id_new] = i.id;\r\n                return temp;\r\n            });\r\n            return temp_res;\r\n\r\n        } else if (typeof (data) == \"object\") {\r\n\r\n            let temp = {\r\n                ...data\r\n            };\r\n            if (data.id) temp[id_new] = data.id;\r\n            return temp;\r\n\r\n        }\r\n    }\r\n    return data;\r\n}\r\n\r\n\r\n\r\nScript.Signals.UpdateData = async function () {\r\n\r\n    const client_selection = Script.Inputs.client || null;\r\n    const sdk_client = (client_selection == \"User SDK Client\") ? Noodl.Objects.DirectusSDK.Client : Noodl.Objects.DirectusSDK.SiteClient;\r\n\r\n    const collection = Script.Inputs.collection;\r\n    const operation = Script.Inputs.operation;\r\n    const id_new = Script.Inputs.id_new || null;\r\n\r\n    const itemID = Script.Inputs.itemID;\r\n    const itemIDArray = Script.Inputs.itemIDArray;\r\n\r\n    const data = Script.Inputs.data || {};\r\n\r\n    const query = Script.Inputs.query || {};\r\n\r\n    try {\r\n        if (sdk_client && collection && operation) {\r\n            let result;\r\n            switch (operation) {\r\n                case \"single\":\r\n                    result = await sdk_client.request(Directus.updateItem(collection, itemID, data));\r\n                    break;\r\n                case \"multiple\":\r\n                    let query_obj = {};\r\n\r\n                    if (query) query_obj = structuredClone(query);\r\n\r\n                    if (Object.keys(query_obj).length == 0 || query_obj == {}) {\r\n                        throw new Error(\"Provide a valid Query object\")\r\n                    }\r\n\r\n                    result = await sdk_client.request(Directus.updateItems(collection, query_obj, data));\r\n                    break;\r\n                case \"multipleByIDs\":\r\n                    result = await sdk_client.request(Directus.updateItems(collection, itemIDArray, data));\r\n                    break;\r\n                case \"singleton\":\r\n                    result = await sdk_client.request(Directus.updateSingleton(collection, data));\r\n                    break;\r\n                case \"all\":\r\n                    result = await sdk_client.request(Directus.updateItems(collection, [], data));\r\n                    break;\r\n            }\r\n\r\n            result = map_id_field(result, id_new); // Map the id field in the incoming data to a new field, if set\r\n            Script.Outputs.result = result;\r\n            if (result) {\r\n                Script.Outputs.Success();\r\n            } else {\r\n                Script.Outputs.Failure();\r\n            }\r\n        } else {\r\n            Script.Outputs.error = \"Invalid configuration!\";\r\n            Script.Outputs.Failure();\r\n        }\r\n\r\n    } catch (err) {\r\n        console.error(err);\r\n\r\n        Script.Outputs.error = err?.errors.map(i => i.message).join(\"\\n\") ?? JSON.stringify(err);\r\n        Script.Outputs.Failure();\r\n    }\r\n}\r\n"},"ports":[],"dynamicports":[{"name":"client","plug":"input","type":{"name":"string"},"group":"Inputs","index":5},{"name":"collection","plug":"input","type":{"name":"string"},"group":"Inputs","index":6},{"name":"operation","plug":"input","type":{"name":"string"},"group":"Inputs","index":7},{"name":"itemID","plug":"input","type":{"name":"string"},"group":"Inputs","index":8},{"name":"itemIDArray","plug":"input","type":{"name":"array"},"group":"Inputs","index":9},{"name":"query","plug":"input","type":{"name":"object"},"group":"Inputs","index":10},{"name":"data","plug":"input","type":{"name":"object"},"group":"Inputs","index":11},{"name":"id_new","plug":"input","type":{"name":"string"},"group":"Inputs","index":12},{"name":"UpdateData","plug":"input","type":{"name":"signal"},"group":"Inputs","index":13},{"name":"Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":14},{"name":"Failure","displayName":"Failure","plug":"output","type":"signal","group":"Outputs","index":15},{"name":"result","displayName":"result","plug":"output","type":"*","group":"Outputs","index":16},{"name":"error","displayName":"error","plug":"output","type":"*","group":"Outputs","index":17}],"children":[],"metadata":{"merge":{"soureCodePorts":["code"]}}},{"id":"7c2dc38c-7d39-ccce-7e16-3d8ea2096be0","type":"States","label":"Update Type","x":2016,"y":1745,"parameters":{"states":"Update Single by ID,Update Multiple by Filter,Update Singleton,Update Multiple by IDs","useTransitions":false},"ports":[],"dynamicports":[{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To Update Single by ID","name":"to-Update Single by ID","group":"Go to state","index":6},{"plug":"output","type":"boolean","displayName":"At Update Single by ID","name":"at-Update Single by ID","group":"Current state","index":7},{"plug":"output","type":"signal","displayName":"Has Reached Update Single by ID","name":"reached-Update Single by ID","group":"Current state","index":8},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To Update Multiple by Filter","name":"to-Update Multiple by Filter","group":"Go to state","index":9},{"plug":"output","type":"boolean","displayName":"At Update Multiple by Filter","name":"at-Update Multiple by Filter","group":"Current state","index":10},{"plug":"output","type":"signal","displayName":"Has Reached Update Multiple by Filter","name":"reached-Update Multiple by Filter","group":"Current state","index":11},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To Update Singleton","name":"to-Update Singleton","group":"Go to state","index":12},{"plug":"output","type":"boolean","displayName":"At Update Singleton","name":"at-Update Singleton","group":"Current state","index":13},{"plug":"output","type":"signal","displayName":"Has Reached Update Singleton","name":"reached-Update Singleton","group":"Current state","index":14},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To Update Multiple by IDs","name":"to-Update Multiple by IDs","group":"Go to state","index":15},{"plug":"output","type":"boolean","displayName":"At Update Multiple by IDs","name":"at-Update Multiple by IDs","group":"Current state","index":16},{"plug":"output","type":"signal","displayName":"Has Reached Update Multiple by IDs","name":"reached-Update Multiple by IDs","group":"Current state","index":17},{"plug":"input","type":{"name":"enum","enums":["Update Single by ID","Update Multiple by Filter","Update Singleton","Update Multiple by IDs"]},"group":"States","displayName":"State","name":"currentState","default":"Update Single by ID","index":18}],"children":[]},{"id":"4965086e-0dc6-c38a-f49b-d6ab485bf4e5","type":"/#Directus/Directus Prefab/Components/Utils - Query Parameters/Directus - Query parameters (for Update)","x":2390.000855253826,"y":1834.4763713017426,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"88ee6f88-1cad-849a-a89d-17b56cea874d","type":"/#Directus/Directus Prefab/Components/Utils/SDK Client Check","x":2236,"y":1406,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"251d1bab-8a6f-476d-32f9-3f46a9f28c84","type":"States","x":2007,"y":2233,"parameters":{"states":"No,Yes","useTransitions":false,"values":"new_id","type-new_id":"string","value-Yes-new_id":"directus_id"},"ports":[],"dynamicports":[{"type":{"name":"string","allowConnectionsOnly":true},"plug":"output","group":"Values","name":"new_id","index":6},{"type":{"name":"enum","enums":[{"label":"Number","value":"number"},{"label":"String","value":"string"},{"label":"Boolean","value":"boolean"},{"label":"Color","value":"color"},{"label":"Text Style","value":"textStyle"}],"allowEditOnly":true},"default":"number","plug":"input","group":"Types","displayName":"new_id","name":"type-new_id","index":7},{"plug":"input","type":"string","group":"No Values","name":"value-No-new_id","displayName":"new_id","editorName":"No|new_id","index":8},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To No","name":"to-No","group":"Go to state","index":9},{"plug":"output","type":"boolean","displayName":"At No","name":"at-No","group":"Current state","index":10},{"plug":"output","type":"signal","displayName":"Has Reached No","name":"reached-No","group":"Current state","index":11},{"plug":"input","type":"string","group":"Yes Values","name":"value-Yes-new_id","displayName":"new_id","editorName":"Yes|new_id","index":12},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To Yes","name":"to-Yes","group":"Go to state","index":13},{"plug":"output","type":"boolean","displayName":"At Yes","name":"at-Yes","group":"Current state","index":14},{"plug":"output","type":"signal","displayName":"Has Reached Yes","name":"reached-Yes","group":"Current state","index":15},{"plug":"input","type":{"name":"enum","enums":["No","Yes"]},"group":"States","displayName":"State","name":"currentState","default":"No","index":16}],"children":[]}],"visualRoots":[]}},{"name":"/#Directus/Directus Prefab/Components/Files/Directus - Create File Download URL","id":"44825500-4df5-4b22-61ef-467160c3ddb7","graph":{"connections":[{"fromId":"fbd86043-47f6-2e16-ac9a-d2d8bf38aba6","fromProperty":"file id","toId":"cdc55ff6-1491-6a90-9242-be40a88faf1c","toProperty":"value"},{"fromId":"56936776-12e3-1605-8684-9f537994d3a3","fromProperty":"out-Success","toId":"6da9ed8b-96ec-5df0-e642-8138925e5fcb","toProperty":"Success"},{"fromId":"56936776-12e3-1605-8684-9f537994d3a3","fromProperty":"out-Failure","toId":"6da9ed8b-96ec-5df0-e642-8138925e5fcb","toProperty":"Failure"},{"fromId":"56936776-12e3-1605-8684-9f537994d3a3","fromProperty":"out-error","toId":"6da9ed8b-96ec-5df0-e642-8138925e5fcb","toProperty":"error"},{"fromId":"56936776-12e3-1605-8684-9f537994d3a3","fromProperty":"out-downloadURL","toId":"6da9ed8b-96ec-5df0-e642-8138925e5fcb","toProperty":"downloadURL"},{"fromId":"2be2abe9-c6cc-502d-4574-b57620b20d43","fromProperty":"currentState","toId":"bf088582-5bf7-1e22-5ad6-6bec3f68a607","toProperty":"in-SDKClient"},{"fromId":"005178be-da9a-3c28-60ed-8a45fa8e9784","fromProperty":"timerFinished","toId":"bf088582-5bf7-1e22-5ad6-6bec3f68a607","toProperty":"run"},{"fromId":"bf088582-5bf7-1e22-5ad6-6bec3f68a607","fromProperty":"out-Done","toId":"2a06d074-cbd8-83cd-ae63-5ac4a5f3e1c0","toProperty":"start"},{"fromId":"fbd86043-47f6-2e16-ac9a-d2d8bf38aba6","fromProperty":"Do","toId":"005178be-da9a-3c28-60ed-8a45fa8e9784","toProperty":"start"},{"fromId":"fbd86043-47f6-2e16-ac9a-d2d8bf38aba6","fromProperty":"SDK Client to use","toId":"2be2abe9-c6cc-502d-4574-b57620b20d43","toProperty":"currentState"},{"fromId":"2be2abe9-c6cc-502d-4574-b57620b20d43","fromProperty":"currentState","toId":"56936776-12e3-1605-8684-9f537994d3a3","toProperty":"in-client"},{"fromId":"c0c8e91e-ddaf-bf3d-2c32-537521b3dea7","fromProperty":"Transformation Type","toId":"e2e8516d-2f34-0b05-18ff-730a0d0332e2","toProperty":"currentState"},{"fromId":"c0c8e91e-ddaf-bf3d-2c32-537521b3dea7","fromProperty":"fit","toId":"16431fb7-2ec6-04e4-6a91-8aca41a147c2","toProperty":"fit"},{"fromId":"c0c8e91e-ddaf-bf3d-2c32-537521b3dea7","fromProperty":"width","toId":"16431fb7-2ec6-04e4-6a91-8aca41a147c2","toProperty":"width"},{"fromId":"c0c8e91e-ddaf-bf3d-2c32-537521b3dea7","fromProperty":"height","toId":"16431fb7-2ec6-04e4-6a91-8aca41a147c2","toProperty":"height"},{"fromId":"c0c8e91e-ddaf-bf3d-2c32-537521b3dea7","fromProperty":"quality","toId":"16431fb7-2ec6-04e4-6a91-8aca41a147c2","toProperty":"quality"},{"fromId":"c0c8e91e-ddaf-bf3d-2c32-537521b3dea7","fromProperty":"withoutEnlargement","toId":"16431fb7-2ec6-04e4-6a91-8aca41a147c2","toProperty":"withoutEnlargement"},{"fromId":"c0c8e91e-ddaf-bf3d-2c32-537521b3dea7","fromProperty":"format","toId":"16431fb7-2ec6-04e4-6a91-8aca41a147c2","toProperty":"format"},{"fromId":"e2e8516d-2f34-0b05-18ff-730a0d0332e2","fromProperty":"currentState","toId":"ea90b72c-148c-c946-701b-fc1c9ab8be71","toProperty":"in-transformation_raw"},{"fromId":"2a06d074-cbd8-83cd-ae63-5ac4a5f3e1c0","fromProperty":"timerFinished","toId":"16431fb7-2ec6-04e4-6a91-8aca41a147c2","toProperty":"Set"},{"fromId":"ea90b72c-148c-c946-701b-fc1c9ab8be71","fromProperty":"out-Done","toId":"56936776-12e3-1605-8684-9f537994d3a3","toProperty":"run"},{"fromId":"16431fb7-2ec6-04e4-6a91-8aca41a147c2","fromProperty":"Done","toId":"ea90b72c-148c-c946-701b-fc1c9ab8be71","toProperty":"run"},{"fromId":"cdc55ff6-1491-6a90-9242-be40a88faf1c","fromProperty":"savedValue","toId":"ea90b72c-148c-c946-701b-fc1c9ab8be71","toProperty":"in-file_id"},{"fromId":"ea90b72c-148c-c946-701b-fc1c9ab8be71","fromProperty":"out-transformation","toId":"56936776-12e3-1605-8684-9f537994d3a3","toProperty":"in-transformation"},{"fromId":"cdc55ff6-1491-6a90-9242-be40a88faf1c","fromProperty":"savedValue","toId":"56936776-12e3-1605-8684-9f537994d3a3","toProperty":"in-file_id"},{"fromId":"16431fb7-2ec6-04e4-6a91-8aca41a147c2","fromProperty":"query","toId":"56936776-12e3-1605-8684-9f537994d3a3","toProperty":"in-query"},{"fromId":"c0c8e91e-ddaf-bf3d-2c32-537521b3dea7","fromProperty":"key","toId":"78f79770-8c61-25c2-8afc-9471ca4e5c70","toProperty":"value"},{"fromId":"78f79770-8c61-25c2-8afc-9471ca4e5c70","fromProperty":"savedValue","toId":"ea90b72c-148c-c946-701b-fc1c9ab8be71","toProperty":"in-key"},{"fromId":"78f79770-8c61-25c2-8afc-9471ca4e5c70","fromProperty":"savedValue","toId":"56936776-12e3-1605-8684-9f537994d3a3","toProperty":"in-key"}],"roots":[{"id":"fbd86043-47f6-2e16-ac9a-d2d8bf38aba6","type":"Component Inputs","x":638,"y":1326,"parameters":{},"ports":[{"name":"Do","plug":"output","type":"*","index":0},{"name":"file id","plug":"output","type":{"name":"*"},"group":"Data","index":2},{"name":"SDK Client to use","plug":"output","type":{"name":"*"},"index":1}],"dynamicports":[],"children":[]},{"id":"6da9ed8b-96ec-5df0-e642-8138925e5fcb","type":"Component Outputs","x":1953,"y":1407,"parameters":{},"ports":[{"name":"Success","plug":"input","type":"*","index":0},{"name":"Failure","plug":"input","type":"*","index":1},{"name":"error","plug":"input","type":{"name":"*"},"index":3},{"name":"downloadURL","plug":"input","type":{"name":"*"},"index":2}],"dynamicports":[],"children":[]},{"id":"56936776-12e3-1605-8684-9f537994d3a3","type":"JavaScriptFunction","x":1675,"y":1327,"parameters":{"functionScript":"const client_selection = Inputs.client ?? null;\r\nconst sdk_client = (client_selection == \"User SDK Client\") ? Noodl.Objects.DirectusSDK.Client : Noodl.Objects.DirectusSDK.SiteClient;\r\n\r\nconst file_id = Inputs.file_id || null;\r\n\r\nconst transformation = Inputs.transformation ?? null;\r\nconst query = Inputs.query || {};\r\nconst key = Inputs.key || null;\r\n\r\nconst download_as_user = (client_selection) ? true : false;\r\n\r\nconst main = async function () {\r\n    try {\r\n        const baseURL = sdk_client.url.href || null;\r\n\r\n        if (baseURL && file_id) {\r\n            const fileURL = new URL(baseURL + \"assets/\" + file_id);\r\n            fileURL.searchParams.append(\"download\", \"\");\r\n\r\n            const access_token = await sdk_client.getToken() || null;\r\n            \r\n            if (access_token) {\r\n                fileURL.searchParams.append(\"access_token\", access_token);\r\n            }\r\n\r\n            if (transformation) {\r\n                switch (transformation) {\r\n                    case \"none\":\r\n                        break;\r\n                    case \"preset\":\r\n                        if(!key) throw new Error(\"Provide valid 'key' value for Image Transformation\");\r\n                        fileURL.searchParams.append(\"key\", key);\r\n                        break;\r\n                    case \"custom\":\r\n                        for (const prop in query) {\r\n                            fileURL.searchParams.append(prop, query[prop]);\r\n                        }\r\n                        break;\r\n                }\r\n            }\r\n                  \r\n            Outputs.downloadURL = fileURL.href;\r\n            Outputs.Success();\r\n        } else {\r\n            Outputs.downloadURL = null;\r\n            Outputs.Failure();\r\n        }\r\n    } catch (err) {\r\n        console.error(err);\r\n        Outputs.error = err?.errors.map(i => i.message).join(\"\\n\");\r\n        Outputs.Failure();\r\n    }\r\n}\r\n\r\nmain();\r\n"},"ports":[],"dynamicports":[{"name":"in-client","displayName":"client","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-file_id","displayName":"file_id","plug":"input","type":"*","group":"Inputs","index":5},{"name":"in-transformation","displayName":"transformation","plug":"input","type":"*","group":"Inputs","index":6},{"name":"in-query","displayName":"query","plug":"input","type":"*","group":"Inputs","index":7},{"name":"in-key","displayName":"key","plug":"input","type":"*","group":"Inputs","index":8},{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":9},{"name":"out-Failure","displayName":"Failure","plug":"output","type":"signal","group":"Outputs","index":10},{"name":"out-downloadURL","displayName":"downloadURL","plug":"output","type":"*","group":"Outputs","index":11},{"name":"out-error","displayName":"error","plug":"output","type":"*","group":"Outputs","index":12}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"cdc55ff6-1491-6a90-9242-be40a88faf1c","type":"String","x":1031,"y":1370,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"2be2abe9-c6cc-502d-4574-b57620b20d43","type":"States","label":"Client type","x":1032,"y":1224,"parameters":{"states":"User SDK Client,Public,Site SDK Client","useTransitions":false},"ports":[],"dynamicports":[{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To User SDK Client","name":"to-User SDK Client","group":"Go to state","index":6},{"plug":"output","type":"boolean","displayName":"At User SDK Client","name":"at-User SDK Client","group":"Current state","index":7},{"plug":"output","type":"signal","displayName":"Has Reached User SDK Client","name":"reached-User SDK Client","group":"Current state","index":8},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To Public","name":"to-Public","group":"Go to state","index":9},{"plug":"output","type":"boolean","displayName":"At Public","name":"at-Public","group":"Current state","index":10},{"plug":"output","type":"signal","displayName":"Has Reached Public","name":"reached-Public","group":"Current state","index":11},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To Site SDK Client","name":"to-Site SDK Client","group":"Go to state","index":12},{"plug":"output","type":"boolean","displayName":"At Site SDK Client","name":"at-Site SDK Client","group":"Current state","index":13},{"plug":"output","type":"signal","displayName":"Has Reached Site SDK Client","name":"reached-Site SDK Client","group":"Current state","index":14},{"plug":"input","type":{"name":"enum","enums":["User SDK Client","Public","Site SDK Client"]},"group":"States","displayName":"State","name":"currentState","default":"User SDK Client","index":15}],"children":[]},{"id":"bf088582-5bf7-1e22-5ad6-6bec3f68a607","type":"JavaScriptFunction","x":1261,"y":1174,"parameters":{"functionScript":"const state = Inputs.SDKClient ?? null;\r\n\r\nlet res = true;\r\n\r\nif(state == \"Site SDK Client\" || state == \"Public\"){\r\n    const client = Noodl.Objects.DirectusSDK.SiteClient || null;\r\n    if(!client){\r\n        res = false;\r\n        throw new Error(\"Directus Site Client has not yet been set up!\");\r\n    }\r\n}\r\n\r\nif(state == \"User SDK Client\"){\r\n    const client = Noodl.Objects.DirectusSDK.Client || null;\r\n    if(!client){ \r\n        res = false;\r\n        throw new Error(\"Directus User Client has not yet been set up!\");\r\n    }\r\n}\r\n\r\nif(res){\r\n    Outputs.Done();\r\n}"},"ports":[],"dynamicports":[{"name":"in-SDKClient","displayName":"SDKClient","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-Done","displayName":"Done","plug":"output","type":"signal","group":"Outputs","index":5}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"2a06d074-cbd8-83cd-ae63-5ac4a5f3e1c0","type":"Timer","x":1490,"y":1195,"parameters":{"duration":100},"ports":[],"dynamicports":[],"children":[]},{"id":"005178be-da9a-3c28-60ed-8a45fa8e9784","type":"Timer","x":1033,"y":1139,"parameters":{"duration":100},"ports":[],"dynamicports":[],"children":[]},{"id":"c0c8e91e-ddaf-bf3d-2c32-537521b3dea7","type":"Component Inputs","x":625,"y":1494,"parameters":{},"ports":[{"name":"key","plug":"output","type":{"name":"*"},"group":"Preset Transformations","index":4},{"name":"fit","plug":"output","type":{"name":"*"},"group":"Custom Transformations","index":5},{"name":"width","plug":"output","type":{"name":"*"},"group":"Custom Transformations","index":6},{"name":"height","plug":"output","type":{"name":"*"},"group":"Custom Transformations","index":7},{"name":"quality","plug":"output","type":{"name":"*"},"group":"Custom Transformations","index":8},{"name":"withoutEnlargement","plug":"output","type":{"name":"*"},"group":"Custom Transformations","index":9},{"name":"format","plug":"output","type":{"name":"*"},"group":"Custom Transformations","index":10},{"name":"Transformation Type","plug":"output","type":{"name":"*"},"group":"Config","index":2}],"dynamicports":[],"children":[]},{"id":"16431fb7-2ec6-04e4-6a91-8aca41a147c2","type":"/#Directus/Directus Prefab/Components/Utils - Query Parameters/Directus - Query parameters (for File Download)","x":1066,"y":1507,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"e2e8516d-2f34-0b05-18ff-730a0d0332e2","type":"States","x":1077,"y":1771,"parameters":{"useTransitions":false,"states":"None,Preset,Custom"},"ports":[],"dynamicports":[{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To None","name":"to-None","group":"Go to state","index":6},{"plug":"output","type":"boolean","displayName":"At None","name":"at-None","group":"Current state","index":7},{"plug":"output","type":"signal","displayName":"Has Reached None","name":"reached-None","group":"Current state","index":8},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To Preset","name":"to-Preset","group":"Go to state","index":9},{"plug":"output","type":"boolean","displayName":"At Preset","name":"at-Preset","group":"Current state","index":10},{"plug":"output","type":"signal","displayName":"Has Reached Preset","name":"reached-Preset","group":"Current state","index":11},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To Custom","name":"to-Custom","group":"Go to state","index":12},{"plug":"output","type":"boolean","displayName":"At Custom","name":"at-Custom","group":"Current state","index":13},{"plug":"output","type":"signal","displayName":"Has Reached Custom","name":"reached-Custom","group":"Current state","index":14},{"plug":"input","type":{"name":"enum","enums":["None","Preset","Custom"]},"group":"States","displayName":"State","name":"currentState","default":"None","index":15}],"children":[]},{"id":"ea90b72c-148c-c946-701b-fc1c9ab8be71","type":"JavaScriptFunction","x":1380,"y":1520,"parameters":{"functionScript":"const file_id = Inputs.file_id ?? null;\r\n\r\nconst transformation_raw = Inputs.transformation_raw ?? \"none\";\r\nconst key = Inputs.key ?? null;\r\n\r\nlet transformation = \"none\";\r\n\r\nif (file_id) {\r\n\r\n    switch (transformation_raw) {\r\n        case \"None\":\r\n            transformation = \"none\";\r\n            break;\r\n        case \"Preset\":\r\n            if (!key) throw new Error(\"Provide a valid key value\");\r\n            transformation = \"preset\";\r\n            break;\r\n        case \"Custom\":\r\n            transformation = \"custom\";\r\n            break;\r\n\r\n    }\r\n\r\n    Outputs.transformation = transformation;\r\n    Outputs.Done();\r\n}"},"ports":[],"dynamicports":[{"name":"in-file_id","displayName":"file_id","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-transformation_raw","displayName":"transformation_raw","plug":"input","type":"*","group":"Inputs","index":5},{"name":"in-key","displayName":"key","plug":"input","type":"*","group":"Inputs","index":6},{"name":"out-Done","displayName":"Done","plug":"output","type":"signal","group":"Outputs","index":7},{"name":"out-transformation","displayName":"transformation","plug":"output","type":"*","group":"Outputs","index":8}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"78f79770-8c61-25c2-8afc-9471ca4e5c70","type":"String","x":1078,"y":1867,"parameters":{},"ports":[],"dynamicports":[],"children":[]}],"visualRoots":[],"comments":[{"text":"https://docs.directus.io/reference/files.html#downloading-a-file","width":632,"height":53,"fill":"transparent","x":844,"y":997,"id":"bd915b20-e38f-cc1d-6672-e41cc5d568ab","color":"notice","largeFont":true}]}},{"name":"/#Directus/Directus Prefab/Components/Files/Directus - Download File","id":"ca62f3d3-6701-2d43-592d-97ea623c7219","graph":{"connections":[{"fromId":"e4d99b28-821d-1f8b-573e-fa7747e7f419","fromProperty":"SDK Client to use","toId":"2244766f-d14b-e284-0fb4-6abbfc7a06b8","toProperty":"currentState"},{"fromId":"2244766f-d14b-e284-0fb4-6abbfc7a06b8","fromProperty":"currentState","toId":"e4c6bb84-490a-351d-aee4-6bf8baf7e2a3","toProperty":"in-SDKClient"},{"fromId":"e4d99b28-821d-1f8b-573e-fa7747e7f419","fromProperty":"Do","toId":"9d60b9fd-c3db-6caf-95f4-576f335c9c8a","toProperty":"start"},{"fromId":"9d60b9fd-c3db-6caf-95f4-576f335c9c8a","fromProperty":"timerFinished","toId":"e4c6bb84-490a-351d-aee4-6bf8baf7e2a3","toProperty":"run"},{"fromId":"a498d40c-1565-1cda-47ba-74f7ce93db07","fromProperty":"Success","toId":"bbeb4dfa-42f4-fa25-ecb1-611e57c0e31c","toProperty":"Success"},{"fromId":"a498d40c-1565-1cda-47ba-74f7ce93db07","fromProperty":"Failure","toId":"bbeb4dfa-42f4-fa25-ecb1-611e57c0e31c","toProperty":"Failure"},{"fromId":"a498d40c-1565-1cda-47ba-74f7ce93db07","fromProperty":"result","toId":"bbeb4dfa-42f4-fa25-ecb1-611e57c0e31c","toProperty":"result"},{"fromId":"a498d40c-1565-1cda-47ba-74f7ce93db07","fromProperty":"error","toId":"bbeb4dfa-42f4-fa25-ecb1-611e57c0e31c","toProperty":"error"},{"fromId":"2244766f-d14b-e284-0fb4-6abbfc7a06b8","fromProperty":"currentState","toId":"a498d40c-1565-1cda-47ba-74f7ce93db07","toProperty":"client"},{"fromId":"e4c6bb84-490a-351d-aee4-6bf8baf7e2a3","fromProperty":"out-Done","toId":"c3d0eb03-ceaf-4b67-ab80-238d02d8ceb4","toProperty":"start"},{"fromId":"7ae01006-c56c-068d-7b4a-73ea09e7b722","fromProperty":"query","toId":"a498d40c-1565-1cda-47ba-74f7ce93db07","toProperty":"query"},{"fromId":"e4d99b28-821d-1f8b-573e-fa7747e7f419","fromProperty":"Do","toId":"7ae01006-c56c-068d-7b4a-73ea09e7b722","toProperty":"Set"},{"fromId":"e4d99b28-821d-1f8b-573e-fa7747e7f419","fromProperty":"Transformation Type","toId":"0fe6b3e4-09c4-fb5a-f15e-63e30428f9f9","toProperty":"currentState"},{"fromId":"e4d99b28-821d-1f8b-573e-fa7747e7f419","fromProperty":"key","toId":"2f44d955-a370-7b2c-a3e1-a0bd06950a54","toProperty":"in-key"},{"fromId":"e4d99b28-821d-1f8b-573e-fa7747e7f419","fromProperty":"File ID","toId":"2f44d955-a370-7b2c-a3e1-a0bd06950a54","toProperty":"in-file_id"},{"fromId":"e4d99b28-821d-1f8b-573e-fa7747e7f419","fromProperty":"key","toId":"a498d40c-1565-1cda-47ba-74f7ce93db07","toProperty":"key"},{"fromId":"2f44d955-a370-7b2c-a3e1-a0bd06950a54","fromProperty":"out-transformation","toId":"a498d40c-1565-1cda-47ba-74f7ce93db07","toProperty":"transformation"},{"fromId":"2f44d955-a370-7b2c-a3e1-a0bd06950a54","fromProperty":"out-Done","toId":"a498d40c-1565-1cda-47ba-74f7ce93db07","toProperty":"GetData"},{"fromId":"e4d99b28-821d-1f8b-573e-fa7747e7f419","fromProperty":"fit","toId":"7ae01006-c56c-068d-7b4a-73ea09e7b722","toProperty":"fit"},{"fromId":"e4d99b28-821d-1f8b-573e-fa7747e7f419","fromProperty":"width","toId":"7ae01006-c56c-068d-7b4a-73ea09e7b722","toProperty":"width"},{"fromId":"e4d99b28-821d-1f8b-573e-fa7747e7f419","fromProperty":"height","toId":"7ae01006-c56c-068d-7b4a-73ea09e7b722","toProperty":"height"},{"fromId":"e4d99b28-821d-1f8b-573e-fa7747e7f419","fromProperty":"quality","toId":"7ae01006-c56c-068d-7b4a-73ea09e7b722","toProperty":"quality"},{"fromId":"e4d99b28-821d-1f8b-573e-fa7747e7f419","fromProperty":"withoutEnlargement","toId":"7ae01006-c56c-068d-7b4a-73ea09e7b722","toProperty":"withoutEnlargement"},{"fromId":"e4d99b28-821d-1f8b-573e-fa7747e7f419","fromProperty":"format","toId":"7ae01006-c56c-068d-7b4a-73ea09e7b722","toProperty":"format"},{"fromId":"e4d99b28-821d-1f8b-573e-fa7747e7f419","fromProperty":"File ID","toId":"a498d40c-1565-1cda-47ba-74f7ce93db07","toProperty":"fileID"},{"fromId":"0fe6b3e4-09c4-fb5a-f15e-63e30428f9f9","fromProperty":"currentState","toId":"2f44d955-a370-7b2c-a3e1-a0bd06950a54","toProperty":"in-transformation_raw"},{"fromId":"e4d99b28-821d-1f8b-573e-fa7747e7f419","fromProperty":"File ID","toId":"2020dd28-9b55-865a-c970-0322a1bf560b","toProperty":"File ID"},{"fromId":"c3d0eb03-ceaf-4b67-ab80-238d02d8ceb4","fromProperty":"timerFinished","toId":"2020dd28-9b55-865a-c970-0322a1bf560b","toProperty":"Do"},{"fromId":"2020dd28-9b55-865a-c970-0322a1bf560b","fromProperty":"Success","toId":"2f44d955-a370-7b2c-a3e1-a0bd06950a54","toProperty":"run"},{"fromId":"2020dd28-9b55-865a-c970-0322a1bf560b","fromProperty":"Failure","toId":"bbeb4dfa-42f4-fa25-ecb1-611e57c0e31c","toProperty":"Failure"},{"fromId":"2020dd28-9b55-865a-c970-0322a1bf560b","fromProperty":"error","toId":"bbeb4dfa-42f4-fa25-ecb1-611e57c0e31c","toProperty":"error"},{"fromId":"2020dd28-9b55-865a-c970-0322a1bf560b","fromProperty":"result","toId":"a498d40c-1565-1cda-47ba-74f7ce93db07","toProperty":"fileObj"},{"fromId":"2244766f-d14b-e284-0fb4-6abbfc7a06b8","fromProperty":"currentState","toId":"2020dd28-9b55-865a-c970-0322a1bf560b","toProperty":"SDK Client to use"}],"roots":[{"id":"e4d99b28-821d-1f8b-573e-fa7747e7f419","type":"Component Inputs","x":-1060,"y":320,"parameters":{},"ports":[{"name":"Do","plug":"output","type":"*","index":0},{"name":"SDK Client to use","plug":"output","type":{"name":"*"},"group":"Config","index":1},{"name":"File ID","plug":"output","type":{"name":"*"},"group":"Config","index":3},{"name":"key","plug":"output","type":{"name":"*"},"group":"Preset Transformations","index":4},{"name":"fit","plug":"output","type":{"name":"*"},"group":"Custom Transformations","index":5},{"name":"width","plug":"output","type":{"name":"*"},"group":"Custom Transformations","index":6},{"name":"height","plug":"output","type":{"name":"*"},"group":"Custom Transformations","index":7},{"name":"quality","plug":"output","type":{"name":"*"},"group":"Custom Transformations","index":8},{"name":"withoutEnlargement","plug":"output","type":{"name":"*"},"group":"Custom Transformations","index":9},{"name":"format","plug":"output","type":{"name":"*"},"group":"Custom Transformations","index":10},{"name":"Transformation Type","plug":"output","type":{"name":"*"},"group":"Config","index":2}],"dynamicports":[],"children":[]},{"id":"bbeb4dfa-42f4-fa25-ecb1-611e57c0e31c","type":"Component Outputs","x":574.0278684333703,"y":371.160111934135,"parameters":{},"ports":[{"name":"Success","plug":"input","type":"*","index":0},{"name":"Failure","plug":"input","type":"*","index":1},{"name":"error","plug":"input","type":{"name":"*"},"index":3},{"name":"result","plug":"input","type":{"name":"*"},"index":2}],"dynamicports":[],"children":[]},{"id":"2244766f-d14b-e284-0fb4-6abbfc7a06b8","type":"States","label":"Client type","x":-718.8506931928334,"y":37.23896749460039,"parameters":{"states":"User SDK Client,Site SDK Client","useTransitions":false},"ports":[],"dynamicports":[{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To User SDK Client","name":"to-User SDK Client","group":"Go to state","index":6},{"plug":"output","type":"boolean","displayName":"At User SDK Client","name":"at-User SDK Client","group":"Current state","index":7},{"plug":"output","type":"signal","displayName":"Has Reached User SDK Client","name":"reached-User SDK Client","group":"Current state","index":8},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To Site SDK Client","name":"to-Site SDK Client","group":"Go to state","index":9},{"plug":"output","type":"boolean","displayName":"At Site SDK Client","name":"at-Site SDK Client","group":"Current state","index":10},{"plug":"output","type":"signal","displayName":"Has Reached Site SDK Client","name":"reached-Site SDK Client","group":"Current state","index":11},{"plug":"input","type":{"name":"enum","enums":["User SDK Client","Site SDK Client"]},"group":"States","displayName":"State","name":"currentState","default":"User SDK Client","index":12}],"children":[]},{"id":"e4c6bb84-490a-351d-aee4-6bf8baf7e2a3","type":"JavaScriptFunction","x":-480.61664838642173,"y":-21.01383290325157,"parameters":{"functionScript":"const state = Inputs.SDKClient ?? null;\r\n\r\nlet res = true;\r\n\r\nif(state == \"Site SDK Client\"){\r\n    const client = Noodl.Objects.DirectusSDK.SiteClient || null;\r\n    if(!client){\r\n        res = false;\r\n        throw new Error(\"Directus Site Client has not yet been set up!\");\r\n    }\r\n}\r\n\r\nif(state == \"User SDK Client\"){\r\n    const client = Noodl.Objects.DirectusSDK.Client || null;\r\n    if(!client){ \r\n        res = false;\r\n        throw new Error(\"Directus User Client has not yet been set up!\");\r\n    }\r\n}\r\n\r\nif(res){\r\n    Outputs.Done();\r\n}"},"ports":[],"dynamicports":[{"name":"in-SDKClient","displayName":"SDKClient","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-Done","displayName":"Done","plug":"output","type":"signal","group":"Outputs","index":5}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"c3d0eb03-ceaf-4b67-ab80-238d02d8ceb4","type":"Timer","x":-243.4830107572318,"y":-22.355880778213702,"parameters":{"duration":100},"ports":[],"dynamicports":[],"children":[]},{"id":"9d60b9fd-c3db-6caf-95f4-576f335c9c8a","type":"Timer","x":-718,"y":-48,"parameters":{"duration":100},"ports":[],"dynamicports":[],"children":[]},{"id":"a498d40c-1565-1cda-47ba-74f7ce93db07","type":"Javascript2","x":278.42005339425987,"y":312.5398400765414,"parameters":{"code":"Script.Inputs = {\r\n    client: \"string\",\r\n    fileID: \"string\",\r\n    fileObj: \"object\",\r\n    query: \"object\",\r\n    transformation: \"string\",\r\n    key: \"string\"\r\n}\r\n\r\n\r\nScript.Signals.GetData = async function () {\r\n\r\n    const client_selection = Script.Inputs.client || null;\r\n    const sdk_client = (client_selection == \"User SDK Client\") ? Noodl.Objects.DirectusSDK.Client : Noodl.Objects.DirectusSDK.SiteClient;\r\n\r\n    const fileID = Script.Inputs.fileID ?? null;\r\n    const fileObj = Script.Inputs.fileObj ?? null;\r\n\r\n    const fileName = ( fileObj?.title ? fileObj.title + fileObj.filename_download.split('.').at(-1) : filename_download ) ?? null;\r\n\r\n    const transformation = Script.Inputs.transformation ?? null;\r\n\r\n    const query = Script.Inputs.query || {};\r\n\r\n    try {\r\n        if (sdk_client && fileID && fileName && transformation) {\r\n            let result;\r\n\r\n            switch (transformation) {\r\n                case \"none\":\r\n                    result = await sdk_client.request(Directus.readAssetRaw(fileID));\r\n                    break;\r\n                case \"key\":\r\n                    result = await sdk_client.request(Directus.readAssetRaw(fileID, { key }));\r\n                    break;\r\n                case \"custom\":\r\n                    result = await sdk_client.request(Directus.readAssetRaw(fileID, query));\r\n                    break;\r\n            }\r\n\r\n            const file_output = new File([result], fileName, {type: result.type});\r\n\r\n            if (result) {\r\n                Script.Outputs.result = file_output;\r\n                Script.Outputs.Success();\r\n            } else {\r\n                Script.Outputs.result = null;\r\n                Script.Outputs.Failure();\r\n            }\r\n        } else {\r\n            console.error(err);\r\n\r\n            Script.Outputs.error = \"Invalid configuration!\";\r\n            Script.Outputs.Failure();\r\n        }\r\n\r\n    } catch (err) {\r\n        console.error(err);\r\n\r\n        Script.Outputs.error = err?.errors.map(i => i.message).join(\"\\n\") ?? JSON.stringify(err);\r\n        Script.Outputs.Failure();\r\n    }\r\n}\r\n"},"ports":[],"dynamicports":[{"name":"client","plug":"input","type":{"name":"string"},"group":"Inputs","index":5},{"name":"fileID","plug":"input","type":{"name":"string"},"group":"Inputs","index":6},{"name":"fileObj","plug":"input","type":{"name":"object"},"group":"Inputs","index":7},{"name":"query","plug":"input","type":{"name":"object"},"group":"Inputs","index":8},{"name":"transformation","plug":"input","type":{"name":"string"},"group":"Inputs","index":9},{"name":"key","plug":"input","type":{"name":"string"},"group":"Inputs","index":10},{"name":"GetData","plug":"input","type":{"name":"signal"},"group":"Inputs","index":11},{"name":"Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":12},{"name":"Failure","displayName":"Failure","plug":"output","type":"signal","group":"Outputs","index":13},{"name":"result","displayName":"result","plug":"output","type":"*","group":"Outputs","index":14},{"name":"error","displayName":"error","plug":"output","type":"*","group":"Outputs","index":15}],"children":[],"metadata":{"merge":{"soureCodePorts":["code"]}}},{"id":"7ae01006-c56c-068d-7b4a-73ea09e7b722","type":"/#Directus/Directus Prefab/Components/Utils - Query Parameters/Directus - Query parameters (for File Download)","x":-495.41076241134033,"y":187.0720763094415,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"0fe6b3e4-09c4-fb5a-f15e-63e30428f9f9","type":"States","x":-504.6307624113406,"y":546.0120764620294,"parameters":{"useTransitions":false,"states":"None,Preset,Custom"},"ports":[],"dynamicports":[{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To None","name":"to-None","group":"Go to state","index":6},{"plug":"output","type":"boolean","displayName":"At None","name":"at-None","group":"Current state","index":7},{"plug":"output","type":"signal","displayName":"Has Reached None","name":"reached-None","group":"Current state","index":8},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To Preset","name":"to-Preset","group":"Go to state","index":9},{"plug":"output","type":"boolean","displayName":"At Preset","name":"at-Preset","group":"Current state","index":10},{"plug":"output","type":"signal","displayName":"Has Reached Preset","name":"reached-Preset","group":"Current state","index":11},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To Custom","name":"to-Custom","group":"Go to state","index":12},{"plug":"output","type":"boolean","displayName":"At Custom","name":"at-Custom","group":"Current state","index":13},{"plug":"output","type":"signal","displayName":"Has Reached Custom","name":"reached-Custom","group":"Current state","index":14},{"plug":"input","type":{"name":"enum","enums":["None","Preset","Custom"]},"group":"States","displayName":"State","name":"currentState","default":"None","index":15}],"children":[]},{"id":"2f44d955-a370-7b2c-a3e1-a0bd06950a54","type":"JavaScriptFunction","x":-131.03821725905982,"y":472.0281524809103,"parameters":{"functionScript":"const file_id = Inputs.file_id ?? null;\r\n\r\nconst transformation_raw = Inputs.transformation_raw ?? \"none\";\r\nconst key = Inputs.key ?? null;\r\n\r\nlet transformation = null;\r\n\r\nif(!file_id) throw new Error(\"Provide a valid File ID\");\r\n\r\nswitch (transformation_raw){\r\n    case \"None\":\r\n        transformation = \"none\";\r\n        break;\r\n    case \"Preset\":\r\n        if(!key) throw new Error(\"Provide a valid key value\");\r\n        transformation = \"preset\";\r\n        break;\r\n    case \"Custom\":\r\n        transformation = \"custom\";\r\n        break;\r\n}\r\n\r\nOutputs.transformation = transformation;\r\nOutputs.Done();"},"ports":[],"dynamicports":[{"name":"in-file_id","displayName":"file_id","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-transformation_raw","displayName":"transformation_raw","plug":"input","type":"*","group":"Inputs","index":5},{"name":"in-key","displayName":"key","plug":"input","type":"*","group":"Inputs","index":6},{"name":"out-Done","displayName":"Done","plug":"output","type":"signal","group":"Outputs","index":7},{"name":"out-transformation","displayName":"transformation","plug":"output","type":"*","group":"Outputs","index":8}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"2020dd28-9b55-865a-c970-0322a1bf560b","type":"/#Directus/Directus Prefab/Components/Files/Directus - Get Files","label":"Get the File Object","x":-3.058217259059802,"y":14.368152633498084,"parameters":{},"ports":[],"dynamicports":[],"children":[]}],"visualRoots":[],"comments":[{"text":"https://docs.directus.io/reference/files.html#requesting-a-thumbnail","width":632,"height":47,"fill":"transparent","x":-710,"y":-196,"id":"6980ad10-4971-eceb-5f9e-1584324c7116","color":"notice","largeFont":true}]}},{"name":"/#Directus/Directus Prefab/Components/Files/Directus - Get Files","id":"0787fe29-80af-f0b4-fe88-025096217459","graph":{"connections":[{"fromId":"81a596d1-8547-30a8-1f2a-d7ed5b0a555e","fromProperty":"SDK Client to use","toId":"1dd9095a-5f64-d592-3272-1e28ac17938f","toProperty":"currentState"},{"fromId":"1dd9095a-5f64-d592-3272-1e28ac17938f","fromProperty":"currentState","toId":"3823d900-dd2f-0165-e1cb-3aefa9acbdd0","toProperty":"in-SDKClient"},{"fromId":"81a596d1-8547-30a8-1f2a-d7ed5b0a555e","fromProperty":"Do","toId":"4094174c-e1a0-9621-0e3a-59b3a390b2af","toProperty":"start"},{"fromId":"4094174c-e1a0-9621-0e3a-59b3a390b2af","fromProperty":"timerFinished","toId":"3823d900-dd2f-0165-e1cb-3aefa9acbdd0","toProperty":"run"},{"fromId":"81a596d1-8547-30a8-1f2a-d7ed5b0a555e","fromProperty":"Do","toId":"f8b819d8-ddbf-6428-91c3-5a169e1c123e","toProperty":"Set"},{"fromId":"81a596d1-8547-30a8-1f2a-d7ed5b0a555e","fromProperty":"aggregate","toId":"f8b819d8-ddbf-6428-91c3-5a169e1c123e","toProperty":"aggregate"},{"fromId":"81a596d1-8547-30a8-1f2a-d7ed5b0a555e","fromProperty":"groupBy","toId":"f8b819d8-ddbf-6428-91c3-5a169e1c123e","toProperty":"groupBy"},{"fromId":"81a596d1-8547-30a8-1f2a-d7ed5b0a555e","fromProperty":"filter","toId":"f8b819d8-ddbf-6428-91c3-5a169e1c123e","toProperty":"filter"},{"fromId":"81a596d1-8547-30a8-1f2a-d7ed5b0a555e","fromProperty":"deep","toId":"f8b819d8-ddbf-6428-91c3-5a169e1c123e","toProperty":"deep"},{"fromId":"81a596d1-8547-30a8-1f2a-d7ed5b0a555e","fromProperty":"alias","toId":"f8b819d8-ddbf-6428-91c3-5a169e1c123e","toProperty":"alias"},{"fromId":"81a596d1-8547-30a8-1f2a-d7ed5b0a555e","fromProperty":"File ID","toId":"f8b819d8-ddbf-6428-91c3-5a169e1c123e","toProperty":"Item ID"},{"fromId":"81a596d1-8547-30a8-1f2a-d7ed5b0a555e","fromProperty":"limit","toId":"f8b819d8-ddbf-6428-91c3-5a169e1c123e","toProperty":"Limit"},{"fromId":"81a596d1-8547-30a8-1f2a-d7ed5b0a555e","fromProperty":"Get all fields","toId":"f8b819d8-ddbf-6428-91c3-5a169e1c123e","toProperty":"Get all fields"},{"fromId":"81a596d1-8547-30a8-1f2a-d7ed5b0a555e","fromProperty":"fields","toId":"f8b819d8-ddbf-6428-91c3-5a169e1c123e","toProperty":"Fields"},{"fromId":"81a596d1-8547-30a8-1f2a-d7ed5b0a555e","fromProperty":"sort","toId":"f8b819d8-ddbf-6428-91c3-5a169e1c123e","toProperty":"Sort"},{"fromId":"81a596d1-8547-30a8-1f2a-d7ed5b0a555e","fromProperty":"offset","toId":"f8b819d8-ddbf-6428-91c3-5a169e1c123e","toProperty":"Offset"},{"fromId":"81a596d1-8547-30a8-1f2a-d7ed5b0a555e","fromProperty":"page","toId":"f8b819d8-ddbf-6428-91c3-5a169e1c123e","toProperty":"Page"},{"fromId":"81a596d1-8547-30a8-1f2a-d7ed5b0a555e","fromProperty":"search","toId":"f8b819d8-ddbf-6428-91c3-5a169e1c123e","toProperty":"Search"},{"fromId":"f8b819d8-ddbf-6428-91c3-5a169e1c123e","fromProperty":"query","toId":"648c66e2-8b91-643f-0706-3b29fb22dd6c","toProperty":"query"},{"fromId":"f8b819d8-ddbf-6428-91c3-5a169e1c123e","fromProperty":"operation","toId":"648c66e2-8b91-643f-0706-3b29fb22dd6c","toProperty":"operation"},{"fromId":"f8b819d8-ddbf-6428-91c3-5a169e1c123e","fromProperty":"itemID","toId":"648c66e2-8b91-643f-0706-3b29fb22dd6c","toProperty":"itemID"},{"fromId":"ff5f9d01-bf83-a176-d245-a078d94fbc7d","fromProperty":"timerFinished","toId":"648c66e2-8b91-643f-0706-3b29fb22dd6c","toProperty":"GetData"},{"fromId":"648c66e2-8b91-643f-0706-3b29fb22dd6c","fromProperty":"Success","toId":"bf145bd8-e0f7-eafe-6faf-39039924d913","toProperty":"Success"},{"fromId":"648c66e2-8b91-643f-0706-3b29fb22dd6c","fromProperty":"Failure","toId":"bf145bd8-e0f7-eafe-6faf-39039924d913","toProperty":"Failure"},{"fromId":"648c66e2-8b91-643f-0706-3b29fb22dd6c","fromProperty":"result","toId":"bf145bd8-e0f7-eafe-6faf-39039924d913","toProperty":"result"},{"fromId":"648c66e2-8b91-643f-0706-3b29fb22dd6c","fromProperty":"error","toId":"bf145bd8-e0f7-eafe-6faf-39039924d913","toProperty":"error"},{"fromId":"1dd9095a-5f64-d592-3272-1e28ac17938f","fromProperty":"currentState","toId":"648c66e2-8b91-643f-0706-3b29fb22dd6c","toProperty":"client"},{"fromId":"81a596d1-8547-30a8-1f2a-d7ed5b0a555e","fromProperty":"File Get type","toId":"c4c56b64-281a-2f4f-22f9-03e792bfc08b","toProperty":"currentState"},{"fromId":"c4c56b64-281a-2f4f-22f9-03e792bfc08b","fromProperty":"currentState","toId":"f8b819d8-ddbf-6428-91c3-5a169e1c123e","toProperty":"Get Type"},{"fromId":"3823d900-dd2f-0165-e1cb-3aefa9acbdd0","fromProperty":"out-Done","toId":"ff5f9d01-bf83-a176-d245-a078d94fbc7d","toProperty":"start"}],"roots":[{"id":"81a596d1-8547-30a8-1f2a-d7ed5b0a555e","type":"Component Inputs","x":-1060,"y":320,"parameters":{},"ports":[{"name":"Do","plug":"output","type":"*","index":0},{"name":"limit","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":5},{"name":"fields","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":7},{"name":"Get all fields","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":6},{"name":"SDK Client to use","plug":"output","type":{"name":"*"},"group":"Config","index":1},{"name":"sort","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":8},{"name":"offset","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":9},{"name":"page","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":10},{"name":"deep","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":15},{"name":"groupBy","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":13},{"name":"aggregate","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":12},{"name":"alias","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":16},{"name":"File ID","plug":"output","type":{"name":"*"},"group":"What to Get","index":4},{"name":"filter","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":14},{"name":"search","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":11},{"name":"File Get type","plug":"output","type":{"name":"*"},"group":"What to Get","index":3}],"dynamicports":[],"children":[]},{"id":"bf145bd8-e0f7-eafe-6faf-39039924d913","type":"Component Outputs","x":515.0278684333703,"y":281.160111934135,"parameters":{},"ports":[{"name":"Success","plug":"input","type":"*","index":0},{"name":"Failure","plug":"input","type":"*","index":1},{"name":"error","plug":"input","type":{"name":"*"},"index":3},{"name":"result","plug":"input","type":{"name":"*"},"index":2}],"dynamicports":[],"children":[]},{"id":"1dd9095a-5f64-d592-3272-1e28ac17938f","type":"States","label":"Client type","x":-718.8506931928334,"y":37.23896749460039,"parameters":{"states":"User SDK Client,Site SDK Client","useTransitions":false},"ports":[],"dynamicports":[{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To User SDK Client","name":"to-User SDK Client","group":"Go to state","index":6},{"plug":"output","type":"boolean","displayName":"At User SDK Client","name":"at-User SDK Client","group":"Current state","index":7},{"plug":"output","type":"signal","displayName":"Has Reached User SDK Client","name":"reached-User SDK Client","group":"Current state","index":8},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To Site SDK Client","name":"to-Site SDK Client","group":"Go to state","index":9},{"plug":"output","type":"boolean","displayName":"At Site SDK Client","name":"at-Site SDK Client","group":"Current state","index":10},{"plug":"output","type":"signal","displayName":"Has Reached Site SDK Client","name":"reached-Site SDK Client","group":"Current state","index":11},{"plug":"input","type":{"name":"enum","enums":["User SDK Client","Site SDK Client"]},"group":"States","displayName":"State","name":"currentState","default":"User SDK Client","index":12}],"children":[]},{"id":"3823d900-dd2f-0165-e1cb-3aefa9acbdd0","type":"JavaScriptFunction","x":-480.61664838642173,"y":-21.01383290325157,"parameters":{"functionScript":"const state = Inputs.SDKClient ?? null;\r\n\r\nlet res = true;\r\n\r\nif(state == \"Site SDK Client\"){\r\n    const client = Noodl.Objects.DirectusSDK.SiteClient || null;\r\n    if(!client){\r\n        res = false;\r\n        throw new Error(\"Directus Site Client has not yet been set up!\");\r\n    }\r\n}\r\n\r\nif(state == \"User SDK Client\"){\r\n    const client = Noodl.Objects.DirectusSDK.Client || null;\r\n    if(!client){ \r\n        res = false;\r\n        throw new Error(\"Directus User Client has not yet been set up!\");\r\n    }\r\n}\r\n\r\nif(res){\r\n    Outputs.Done();\r\n}"},"ports":[],"dynamicports":[{"name":"in-SDKClient","displayName":"SDKClient","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-Done","displayName":"Done","plug":"output","type":"signal","group":"Outputs","index":5}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"ff5f9d01-bf83-a176-d245-a078d94fbc7d","type":"Timer","x":-243.4830107572318,"y":-22.355880778213702,"parameters":{"duration":100},"ports":[],"dynamicports":[],"children":[]},{"id":"4094174c-e1a0-9621-0e3a-59b3a390b2af","type":"Timer","x":-718,"y":-48,"parameters":{"duration":100},"ports":[],"dynamicports":[],"children":[]},{"id":"f8b819d8-ddbf-6428-91c3-5a169e1c123e","type":"/#Directus/Directus Prefab/Components/Utils - Query Parameters/Directus - Query parameters (for Read)","x":-421.86744630779845,"y":330.1155290943941,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"648c66e2-8b91-643f-0706-3b29fb22dd6c","type":"Javascript2","x":281.42005339425987,"y":280.5398400765414,"parameters":{"code":"Script.Inputs = {\r\n    client: \"string\",\r\n    operation: \"string\",\r\n    itemID: \"string\",\r\n    query: \"object\"\r\n}\r\n\r\n\r\nScript.Signals.GetData = async function () {\r\n\r\n    const client_selection = Script.Inputs.client || null;\r\n    const sdk_client = (client_selection == \"User SDK Client\") ? Noodl.Objects.DirectusSDK.Client : Noodl.Objects.DirectusSDK.SiteClient;\r\n\r\n    const operation = Script.Inputs.operation;\r\n    const itemID = Script.Inputs.itemID;\r\n\r\n    const query = Script.Inputs.query || {};\r\n\r\n    try {\r\n        if (sdk_client && operation) {\r\n            let result;\r\n            switch (operation) {\r\n                case \"single\":\r\n                    if(!itemID) throw new Error(\"Provide valid ID!\");\r\n                    result = await sdk_client.request(Directus.readFile(itemID, query));\r\n                    break;\r\n                case \"multiple\":\r\n                    result = await sdk_client.request(Directus.readFiles(query));\r\n                    break;\r\n                case \"all\":\r\n                    query.limit = -1;\r\n                    result = await sdk_client.request(Directus.readFiles(query));\r\n                    break;\r\n            }\r\n            \r\n            Script.Outputs.result = result;\r\n            if (result) {\r\n                Script.Outputs.Success();\r\n            } else {\r\n                Script.Outputs.Failure();\r\n            }\r\n        } else {\r\n            console.error(err);\r\n\r\n            Script.Outputs.error = \"Invalid configuration!\";\r\n            Script.Outputs.Failure();\r\n        }\r\n\r\n    } catch (err) {\r\n        console.error(err);\r\n\r\n        Script.Outputs.error = err?.errors.map(i => i.message).join(\"\\n\") ?? JSON.stringify(err);\r\n        Script.Outputs.Failure();\r\n    }\r\n}\r\n"},"ports":[],"dynamicports":[{"name":"client","plug":"input","type":{"name":"string"},"group":"Inputs","index":5},{"name":"operation","plug":"input","type":{"name":"string"},"group":"Inputs","index":6},{"name":"itemID","plug":"input","type":{"name":"string"},"group":"Inputs","index":7},{"name":"query","plug":"input","type":{"name":"object"},"group":"Inputs","index":8},{"name":"GetData","plug":"input","type":{"name":"signal"},"group":"Inputs","index":9},{"name":"Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":10},{"name":"Failure","displayName":"Failure","plug":"output","type":"signal","group":"Outputs","index":11},{"name":"result","displayName":"result","plug":"output","type":"*","group":"Outputs","index":12},{"name":"error","displayName":"error","plug":"output","type":"*","group":"Outputs","index":13}],"children":[],"metadata":{"merge":{"soureCodePorts":["code"]}}},{"id":"c4c56b64-281a-2f4f-22f9-03e792bfc08b","type":"States","label":"Get Type","x":-719.5269848854084,"y":259.36393813385837,"parameters":{"states":"Get Single by ID,Get Multiple by Filter,Get All"},"ports":[],"dynamicports":[{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To Get Single by ID","name":"to-Get Single by ID","group":"Go to state","index":6},{"plug":"output","type":"boolean","displayName":"At Get Single by ID","name":"at-Get Single by ID","group":"Current state","index":7},{"plug":"output","type":"signal","displayName":"Has Reached Get Single by ID","name":"reached-Get Single by ID","group":"Current state","index":8},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To Get Multiple by Filter","name":"to-Get Multiple by Filter","group":"Go to state","index":9},{"plug":"output","type":"boolean","displayName":"At Get Multiple by Filter","name":"at-Get Multiple by Filter","group":"Current state","index":10},{"plug":"output","type":"signal","displayName":"Has Reached Get Multiple by Filter","name":"reached-Get Multiple by Filter","group":"Current state","index":11},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To Get All","name":"to-Get All","group":"Go to state","index":12},{"plug":"output","type":"boolean","displayName":"At Get All","name":"at-Get All","group":"Current state","index":13},{"plug":"output","type":"signal","displayName":"Has Reached Get All","name":"reached-Get All","group":"Current state","index":14},{"plug":"input","type":{"name":"enum","enums":["Get Single by ID","Get Multiple by Filter","Get All"]},"group":"States","displayName":"State","name":"currentState","default":"Get Single by ID","index":15}],"children":[]}],"visualRoots":[]}},{"name":"/#Directus/Directus Prefab/Components/Files/Directus - Get Folders","id":"b37f6a24-6b4a-ff0d-87af-af3e2fa69a59","graph":{"connections":[{"fromId":"84913cab-254e-d68b-516f-6091858cdbd8","fromProperty":"SDK Client to use","toId":"f48319cd-7ced-d669-696f-d89703a315c9","toProperty":"currentState"},{"fromId":"f48319cd-7ced-d669-696f-d89703a315c9","fromProperty":"currentState","toId":"e4eff1c6-0cd5-4c31-892d-7f0a00c74e7b","toProperty":"in-SDKClient"},{"fromId":"84913cab-254e-d68b-516f-6091858cdbd8","fromProperty":"Do","toId":"5cf907ab-44cb-44d3-bcd7-c49aa0545915","toProperty":"start"},{"fromId":"5cf907ab-44cb-44d3-bcd7-c49aa0545915","fromProperty":"timerFinished","toId":"e4eff1c6-0cd5-4c31-892d-7f0a00c74e7b","toProperty":"run"},{"fromId":"84913cab-254e-d68b-516f-6091858cdbd8","fromProperty":"Do","toId":"a3f5ad6e-3c10-d179-1d40-8d7e5b48432a","toProperty":"Set"},{"fromId":"84913cab-254e-d68b-516f-6091858cdbd8","fromProperty":"aggregate","toId":"a3f5ad6e-3c10-d179-1d40-8d7e5b48432a","toProperty":"aggregate"},{"fromId":"84913cab-254e-d68b-516f-6091858cdbd8","fromProperty":"groupBy","toId":"a3f5ad6e-3c10-d179-1d40-8d7e5b48432a","toProperty":"groupBy"},{"fromId":"84913cab-254e-d68b-516f-6091858cdbd8","fromProperty":"filter","toId":"a3f5ad6e-3c10-d179-1d40-8d7e5b48432a","toProperty":"filter"},{"fromId":"84913cab-254e-d68b-516f-6091858cdbd8","fromProperty":"deep","toId":"a3f5ad6e-3c10-d179-1d40-8d7e5b48432a","toProperty":"deep"},{"fromId":"84913cab-254e-d68b-516f-6091858cdbd8","fromProperty":"alias","toId":"a3f5ad6e-3c10-d179-1d40-8d7e5b48432a","toProperty":"alias"},{"fromId":"84913cab-254e-d68b-516f-6091858cdbd8","fromProperty":"Folder ID","toId":"a3f5ad6e-3c10-d179-1d40-8d7e5b48432a","toProperty":"Item ID"},{"fromId":"84913cab-254e-d68b-516f-6091858cdbd8","fromProperty":"limit","toId":"a3f5ad6e-3c10-d179-1d40-8d7e5b48432a","toProperty":"Limit"},{"fromId":"84913cab-254e-d68b-516f-6091858cdbd8","fromProperty":"Get all fields","toId":"a3f5ad6e-3c10-d179-1d40-8d7e5b48432a","toProperty":"Get all fields"},{"fromId":"84913cab-254e-d68b-516f-6091858cdbd8","fromProperty":"fields","toId":"a3f5ad6e-3c10-d179-1d40-8d7e5b48432a","toProperty":"Fields"},{"fromId":"84913cab-254e-d68b-516f-6091858cdbd8","fromProperty":"sort","toId":"a3f5ad6e-3c10-d179-1d40-8d7e5b48432a","toProperty":"Sort"},{"fromId":"84913cab-254e-d68b-516f-6091858cdbd8","fromProperty":"offset","toId":"a3f5ad6e-3c10-d179-1d40-8d7e5b48432a","toProperty":"Offset"},{"fromId":"84913cab-254e-d68b-516f-6091858cdbd8","fromProperty":"page","toId":"a3f5ad6e-3c10-d179-1d40-8d7e5b48432a","toProperty":"Page"},{"fromId":"84913cab-254e-d68b-516f-6091858cdbd8","fromProperty":"search","toId":"a3f5ad6e-3c10-d179-1d40-8d7e5b48432a","toProperty":"Search"},{"fromId":"a3f5ad6e-3c10-d179-1d40-8d7e5b48432a","fromProperty":"query","toId":"53f08f4d-ae48-689a-ffeb-e9cc6a1489b6","toProperty":"query"},{"fromId":"a3f5ad6e-3c10-d179-1d40-8d7e5b48432a","fromProperty":"operation","toId":"53f08f4d-ae48-689a-ffeb-e9cc6a1489b6","toProperty":"operation"},{"fromId":"a3f5ad6e-3c10-d179-1d40-8d7e5b48432a","fromProperty":"itemID","toId":"53f08f4d-ae48-689a-ffeb-e9cc6a1489b6","toProperty":"itemID"},{"fromId":"686e7b96-dd6c-6438-b168-ec5894fa050a","fromProperty":"timerFinished","toId":"53f08f4d-ae48-689a-ffeb-e9cc6a1489b6","toProperty":"GetData"},{"fromId":"53f08f4d-ae48-689a-ffeb-e9cc6a1489b6","fromProperty":"Success","toId":"0c6cd7a0-0ef3-40a4-6c3a-420ac30c4d4f","toProperty":"Success"},{"fromId":"53f08f4d-ae48-689a-ffeb-e9cc6a1489b6","fromProperty":"Failure","toId":"0c6cd7a0-0ef3-40a4-6c3a-420ac30c4d4f","toProperty":"Failure"},{"fromId":"53f08f4d-ae48-689a-ffeb-e9cc6a1489b6","fromProperty":"result","toId":"0c6cd7a0-0ef3-40a4-6c3a-420ac30c4d4f","toProperty":"result"},{"fromId":"53f08f4d-ae48-689a-ffeb-e9cc6a1489b6","fromProperty":"error","toId":"0c6cd7a0-0ef3-40a4-6c3a-420ac30c4d4f","toProperty":"error"},{"fromId":"f48319cd-7ced-d669-696f-d89703a315c9","fromProperty":"currentState","toId":"53f08f4d-ae48-689a-ffeb-e9cc6a1489b6","toProperty":"client"},{"fromId":"84913cab-254e-d68b-516f-6091858cdbd8","fromProperty":"Folder Get type","toId":"0c3651c2-a7c2-5d70-a497-d5279df27a43","toProperty":"currentState"},{"fromId":"0c3651c2-a7c2-5d70-a497-d5279df27a43","fromProperty":"currentState","toId":"a3f5ad6e-3c10-d179-1d40-8d7e5b48432a","toProperty":"Get Type"},{"fromId":"e4eff1c6-0cd5-4c31-892d-7f0a00c74e7b","fromProperty":"out-Done","toId":"686e7b96-dd6c-6438-b168-ec5894fa050a","toProperty":"start"}],"roots":[{"id":"84913cab-254e-d68b-516f-6091858cdbd8","type":"Component Inputs","x":-1060,"y":320,"parameters":{},"ports":[{"name":"Do","plug":"output","type":"*","index":0},{"name":"limit","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":5},{"name":"fields","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":7},{"name":"Get all fields","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":6},{"name":"SDK Client to use","plug":"output","type":{"name":"*"},"group":"Config","index":1},{"name":"sort","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":8},{"name":"offset","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":9},{"name":"page","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":10},{"name":"deep","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":15},{"name":"groupBy","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":13},{"name":"aggregate","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":12},{"name":"alias","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":16},{"name":"Folder ID","plug":"output","type":{"name":"*"},"group":"What to Get","index":4},{"name":"filter","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":14},{"name":"search","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":11},{"name":"Folder Get type","plug":"output","type":{"name":"*"},"group":"What to Get","index":3}],"dynamicports":[],"children":[]},{"id":"0c6cd7a0-0ef3-40a4-6c3a-420ac30c4d4f","type":"Component Outputs","x":515.0278684333703,"y":281.160111934135,"parameters":{},"ports":[{"name":"Success","plug":"input","type":"*","index":0},{"name":"Failure","plug":"input","type":"*","index":1},{"name":"error","plug":"input","type":{"name":"*"},"index":3},{"name":"result","plug":"input","type":{"name":"*"},"index":2}],"dynamicports":[],"children":[]},{"id":"f48319cd-7ced-d669-696f-d89703a315c9","type":"States","label":"Client type","x":-718.8506931928334,"y":37.23896749460039,"parameters":{"states":"User SDK Client,Site SDK Client","useTransitions":false},"ports":[],"dynamicports":[{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To User SDK Client","name":"to-User SDK Client","group":"Go to state","index":6},{"plug":"output","type":"boolean","displayName":"At User SDK Client","name":"at-User SDK Client","group":"Current state","index":7},{"plug":"output","type":"signal","displayName":"Has Reached User SDK Client","name":"reached-User SDK Client","group":"Current state","index":8},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To Site SDK Client","name":"to-Site SDK Client","group":"Go to state","index":9},{"plug":"output","type":"boolean","displayName":"At Site SDK Client","name":"at-Site SDK Client","group":"Current state","index":10},{"plug":"output","type":"signal","displayName":"Has Reached Site SDK Client","name":"reached-Site SDK Client","group":"Current state","index":11},{"plug":"input","type":{"name":"enum","enums":["User SDK Client","Site SDK Client"]},"group":"States","displayName":"State","name":"currentState","default":"User SDK Client","index":12}],"children":[]},{"id":"e4eff1c6-0cd5-4c31-892d-7f0a00c74e7b","type":"JavaScriptFunction","x":-480.61664838642173,"y":-21.01383290325157,"parameters":{"functionScript":"const state = Inputs.SDKClient ?? null;\r\n\r\nlet res = true;\r\n\r\nif(state == \"Site SDK Client\"){\r\n    const client = Noodl.Objects.DirectusSDK.SiteClient || null;\r\n    if(!client){\r\n        res = false;\r\n        throw new Error(\"Directus Site Client has not yet been set up!\");\r\n    }\r\n}\r\n\r\nif(state == \"User SDK Client\"){\r\n    const client = Noodl.Objects.DirectusSDK.Client || null;\r\n    if(!client){ \r\n        res = false;\r\n        throw new Error(\"Directus User Client has not yet been set up!\");\r\n    }\r\n}\r\n\r\nif(res){\r\n    Outputs.Done();\r\n}"},"ports":[],"dynamicports":[{"name":"in-SDKClient","displayName":"SDKClient","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-Done","displayName":"Done","plug":"output","type":"signal","group":"Outputs","index":5}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"686e7b96-dd6c-6438-b168-ec5894fa050a","type":"Timer","x":-243.4830107572318,"y":-22.355880778213702,"parameters":{"duration":100},"ports":[],"dynamicports":[],"children":[]},{"id":"5cf907ab-44cb-44d3-bcd7-c49aa0545915","type":"Timer","x":-718,"y":-48,"parameters":{"duration":100},"ports":[],"dynamicports":[],"children":[]},{"id":"a3f5ad6e-3c10-d179-1d40-8d7e5b48432a","type":"/#Directus/Directus Prefab/Components/Utils - Query Parameters/Directus - Query parameters (for Read)","x":-421.86744630779845,"y":330.1155290943941,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"53f08f4d-ae48-689a-ffeb-e9cc6a1489b6","type":"Javascript2","x":281.42005339425987,"y":280.5398400765414,"parameters":{"code":"Script.Inputs = {\r\n    client: \"string\",\r\n    operation: \"string\",\r\n    itemID: \"string\",\r\n    query: \"object\"\r\n}\r\n\r\n\r\nScript.Signals.GetData = async function () {\r\n\r\n    const client_selection = Script.Inputs.client || null;\r\n    const sdk_client = (client_selection == \"User SDK Client\") ? Noodl.Objects.DirectusSDK.Client : Noodl.Objects.DirectusSDK.SiteClient;\r\n\r\n    const operation = Script.Inputs.operation;\r\n    const itemID = Script.Inputs.itemID;\r\n\r\n    const query = Script.Inputs.query || {};\r\n\r\n    try {\r\n        if (sdk_client && operation) {\r\n            let result;\r\n            switch (operation) {\r\n                case \"single\":\r\n                    if(!itemID) throw new Error(\"Provide valid ID!\");\r\n                    result = await sdk_client.request(Directus.readFolder(itemID, query));\r\n                    break;\r\n                case \"multiple\":\r\n                    result = await sdk_client.request(Directus.readFolders(query));\r\n                    break;\r\n                case \"all\":\r\n                    query.limit = -1;\r\n                    result = await sdk_client.request(Directus.readFolders(query));\r\n                    break;\r\n            }\r\n            \r\n            Script.Outputs.result = result;\r\n            if (result) {\r\n                Script.Outputs.Success();\r\n            } else {\r\n                Script.Outputs.Failure();\r\n            }\r\n        } else {\r\n            console.error(err);\r\n\r\n            Script.Outputs.error = \"Invalid configuration!\";\r\n            Script.Outputs.Failure();\r\n        }\r\n\r\n    } catch (err) {\r\n        console.error(err);\r\n\r\n        Script.Outputs.error = err?.errors.map(i => i.message).join(\"\\n\") ?? JSON.stringify(err);\r\n        Script.Outputs.Failure();\r\n    }\r\n}\r\n"},"ports":[],"dynamicports":[{"name":"client","plug":"input","type":{"name":"string"},"group":"Inputs","index":5},{"name":"operation","plug":"input","type":{"name":"string"},"group":"Inputs","index":6},{"name":"itemID","plug":"input","type":{"name":"string"},"group":"Inputs","index":7},{"name":"query","plug":"input","type":{"name":"object"},"group":"Inputs","index":8},{"name":"GetData","plug":"input","type":{"name":"signal"},"group":"Inputs","index":9},{"name":"Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":10},{"name":"Failure","displayName":"Failure","plug":"output","type":"signal","group":"Outputs","index":11},{"name":"result","displayName":"result","plug":"output","type":"*","group":"Outputs","index":12},{"name":"error","displayName":"error","plug":"output","type":"*","group":"Outputs","index":13}],"children":[],"metadata":{"merge":{"soureCodePorts":["code"]}}},{"id":"0c3651c2-a7c2-5d70-a497-d5279df27a43","type":"States","label":"Get Type","x":-719.5269848854084,"y":259.36393813385837,"parameters":{"states":"Get Single by ID,Get Multiple by Filter,Get All"},"ports":[],"dynamicports":[{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To Get Single by ID","name":"to-Get Single by ID","group":"Go to state","index":6},{"plug":"output","type":"boolean","displayName":"At Get Single by ID","name":"at-Get Single by ID","group":"Current state","index":7},{"plug":"output","type":"signal","displayName":"Has Reached Get Single by ID","name":"reached-Get Single by ID","group":"Current state","index":8},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To Get Multiple by Filter","name":"to-Get Multiple by Filter","group":"Go to state","index":9},{"plug":"output","type":"boolean","displayName":"At Get Multiple by Filter","name":"at-Get Multiple by Filter","group":"Current state","index":10},{"plug":"output","type":"signal","displayName":"Has Reached Get Multiple by Filter","name":"reached-Get Multiple by Filter","group":"Current state","index":11},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To Get All","name":"to-Get All","group":"Go to state","index":12},{"plug":"output","type":"boolean","displayName":"At Get All","name":"at-Get All","group":"Current state","index":13},{"plug":"output","type":"signal","displayName":"Has Reached Get All","name":"reached-Get All","group":"Current state","index":14},{"plug":"input","type":{"name":"enum","enums":["Get Single by ID","Get Multiple by Filter","Get All"]},"group":"States","displayName":"State","name":"currentState","default":"Get Single by ID","index":15}],"children":[]}],"visualRoots":[]}},{"name":"/#Directus/Directus Prefab/Components/Files/Directus - Import File","id":"15a619c9-c675-260c-e08b-eef2eff3300f","graph":{"connections":[{"fromId":"6095fd4a-4903-d625-0ef8-004e4a9eedb0","fromProperty":"out-Failure","toId":"2d026e7d-b9d8-bb7b-b81f-d62f5787ce05","toProperty":"Failure"},{"fromId":"6095fd4a-4903-d625-0ef8-004e4a9eedb0","fromProperty":"out-error","toId":"2d026e7d-b9d8-bb7b-b81f-d62f5787ce05","toProperty":"error"},{"fromId":"6095fd4a-4903-d625-0ef8-004e4a9eedb0","fromProperty":"out-Success","toId":"2d026e7d-b9d8-bb7b-b81f-d62f5787ce05","toProperty":"Success"},{"fromId":"b7441b70-72ab-499e-f6e3-0aedf71f345a","fromProperty":"file object","toId":"6095fd4a-4903-d625-0ef8-004e4a9eedb0","toProperty":"in-file_object"},{"fromId":"b96912f8-92ff-61a1-99a0-a8cdf239ba1e","fromProperty":"currentState","toId":"8475d812-6758-a2eb-f0d1-2ab0bdffa153","toProperty":"in-SDKClient"},{"fromId":"ab3632d2-4e01-b1b0-6abb-a09549f9b557","fromProperty":"timerFinished","toId":"8475d812-6758-a2eb-f0d1-2ab0bdffa153","toProperty":"run"},{"fromId":"8475d812-6758-a2eb-f0d1-2ab0bdffa153","fromProperty":"out-Done","toId":"e400991b-1611-762b-86bb-0a3db0f6250e","toProperty":"start"},{"fromId":"b7441b70-72ab-499e-f6e3-0aedf71f345a","fromProperty":"Do","toId":"ab3632d2-4e01-b1b0-6abb-a09549f9b557","toProperty":"start"},{"fromId":"b7441b70-72ab-499e-f6e3-0aedf71f345a","fromProperty":"SDK Client to use","toId":"b96912f8-92ff-61a1-99a0-a8cdf239ba1e","toProperty":"currentState"},{"fromId":"e400991b-1611-762b-86bb-0a3db0f6250e","fromProperty":"timerFinished","toId":"6095fd4a-4903-d625-0ef8-004e4a9eedb0","toProperty":"run"},{"fromId":"b96912f8-92ff-61a1-99a0-a8cdf239ba1e","fromProperty":"currentState","toId":"6095fd4a-4903-d625-0ef8-004e4a9eedb0","toProperty":"in-client"},{"fromId":"6095fd4a-4903-d625-0ef8-004e4a9eedb0","fromProperty":"out-result","toId":"2d026e7d-b9d8-bb7b-b81f-d62f5787ce05","toProperty":"result"},{"fromId":"b7441b70-72ab-499e-f6e3-0aedf71f345a","fromProperty":"file url","toId":"6095fd4a-4903-d625-0ef8-004e4a9eedb0","toProperty":"in-file_url"}],"roots":[{"id":"b7441b70-72ab-499e-f6e3-0aedf71f345a","type":"Component Inputs","x":222,"y":506,"parameters":{},"ports":[{"name":"Do","plug":"output","type":"*","index":0},{"name":"file url","plug":"output","type":{"name":"*"},"group":"Data","index":2},{"name":"file object","plug":"output","type":{"name":"*"},"group":"Data","index":3},{"name":"SDK Client to use","plug":"output","type":{"name":"*"},"index":1}],"dynamicports":[],"children":[]},{"id":"2d026e7d-b9d8-bb7b-b81f-d62f5787ce05","type":"Component Outputs","x":1634,"y":587,"parameters":{},"ports":[{"name":"Success","plug":"input","type":"*","index":0},{"name":"Failure","plug":"input","type":"*","index":1},{"name":"error","plug":"input","type":{"name":"*"},"index":2},{"name":"result","plug":"input","type":{"name":"*"},"index":3}],"dynamicports":[],"children":[]},{"id":"6095fd4a-4903-d625-0ef8-004e4a9eedb0","type":"JavaScriptFunction","x":1364,"y":525,"parameters":{"functionScript":"const file_url = Inputs.file_url;\r\nconst file_object = Inputs.file_object || {};\r\n\r\nif (!file_url) return;\r\n\r\nconst client_selection = Inputs.client || null;\r\nconst sdk_client = (client_selection == \"User SDK Client\") ? Noodl.Objects.DirectusSDK.Client : Noodl.Objects.DirectusSDK.SiteClient;\r\n\r\nconst main = async function () {\r\n    try {\r\n        const result = await sdk_client.request(Directus.importFile(file_url, file_object));\r\n\r\n        Outputs.result = result;\r\n        Outputs.Success();\r\n\r\n    } catch (err) {\r\n        console.error(err);\r\n        Outputs.error = err?.errors.map(i => i.message).join(\"\\n\");\r\n        Outputs.Failure();\r\n    }\r\n}\r\n\r\nmain();\r\n"},"ports":[],"dynamicports":[{"name":"in-file_url","displayName":"file_url","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-file_object","displayName":"file_object","plug":"input","type":"*","group":"Inputs","index":5},{"name":"in-client","displayName":"client","plug":"input","type":"*","group":"Inputs","index":6},{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":7},{"name":"out-Failure","displayName":"Failure","plug":"output","type":"signal","group":"Outputs","index":8},{"name":"out-result","displayName":"result","plug":"output","type":"*","group":"Outputs","index":9},{"name":"out-error","displayName":"error","plug":"output","type":"*","group":"Outputs","index":10}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"b96912f8-92ff-61a1-99a0-a8cdf239ba1e","type":"States","label":"Client type","x":553,"y":308,"parameters":{"states":"User SDK Client,Site SDK Client","useTransitions":false},"ports":[],"dynamicports":[{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To User SDK Client","name":"to-User SDK Client","group":"Go to state","index":6},{"plug":"output","type":"boolean","displayName":"At User SDK Client","name":"at-User SDK Client","group":"Current state","index":7},{"plug":"output","type":"signal","displayName":"Has Reached User SDK Client","name":"reached-User SDK Client","group":"Current state","index":8},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To Site SDK Client","name":"to-Site SDK Client","group":"Go to state","index":9},{"plug":"output","type":"boolean","displayName":"At Site SDK Client","name":"at-Site SDK Client","group":"Current state","index":10},{"plug":"output","type":"signal","displayName":"Has Reached Site SDK Client","name":"reached-Site SDK Client","group":"Current state","index":11},{"plug":"input","type":{"name":"enum","enums":["User SDK Client","Site SDK Client"]},"group":"States","displayName":"State","name":"currentState","default":"User SDK Client","index":12}],"children":[]},{"id":"8475d812-6758-a2eb-f0d1-2ab0bdffa153","type":"JavaScriptFunction","x":792,"y":249,"parameters":{"functionScript":"const state = Inputs.SDKClient ?? null;\r\n\r\nlet res = true;\r\n\r\nif(state == \"Site SDK Client\"){\r\n    const client = Noodl.Objects.DirectusSDK.SiteClient || null;\r\n    if(!client){\r\n        res = false;\r\n        throw new Error(\"Directus Site Client has not yet been set up!\");\r\n    }\r\n}\r\n\r\nif(state == \"User SDK Client\"){\r\n    const client = Noodl.Objects.DirectusSDK.Client || null;\r\n    if(!client){ \r\n        res = false;\r\n        throw new Error(\"Directus User Client has not yet been set up!\");\r\n    }\r\n}\r\n\r\nif(res){\r\n    Outputs.Done();\r\n}"},"ports":[],"dynamicports":[{"name":"in-SDKClient","displayName":"SDKClient","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-Done","displayName":"Done","plug":"output","type":"signal","group":"Outputs","index":5}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"e400991b-1611-762b-86bb-0a3db0f6250e","type":"Timer","x":1029,"y":248,"parameters":{"duration":100},"ports":[],"dynamicports":[],"children":[]},{"id":"ab3632d2-4e01-b1b0-6abb-a09549f9b557","type":"Timer","x":554,"y":222,"parameters":{"duration":100},"ports":[],"dynamicports":[],"children":[]}],"visualRoots":[]}},{"name":"/#Directus/Directus Prefab/Components/Files/Directus - Upload File","id":"3fe0d4ee-348c-7b22-e627-555812173e12","graph":{"connections":[{"fromId":"51e36d74-05a0-abcd-da37-2a75455c07f1","fromProperty":"out-Failure","toId":"120d86dd-717f-232d-7d08-70d263f01709","toProperty":"Failure"},{"fromId":"51e36d74-05a0-abcd-da37-2a75455c07f1","fromProperty":"out-error","toId":"120d86dd-717f-232d-7d08-70d263f01709","toProperty":"error"},{"fromId":"51e36d74-05a0-abcd-da37-2a75455c07f1","fromProperty":"out-Success","toId":"120d86dd-717f-232d-7d08-70d263f01709","toProperty":"Success"},{"fromId":"81558e6d-db45-c8ee-8426-15863a64790c","fromProperty":"file","toId":"51e36d74-05a0-abcd-da37-2a75455c07f1","toProperty":"in-raw_file"},{"fromId":"81558e6d-db45-c8ee-8426-15863a64790c","fromProperty":"file object","toId":"51e36d74-05a0-abcd-da37-2a75455c07f1","toProperty":"in-file_object"},{"fromId":"cdca044d-4cc1-c8a4-ba45-c5cfba0d536c","fromProperty":"currentState","toId":"07c651ed-25a6-65f1-64b1-b658ee180038","toProperty":"in-SDKClient"},{"fromId":"d5abe21a-fa4c-bad2-e24a-d81781fff51a","fromProperty":"timerFinished","toId":"07c651ed-25a6-65f1-64b1-b658ee180038","toProperty":"run"},{"fromId":"07c651ed-25a6-65f1-64b1-b658ee180038","fromProperty":"out-Done","toId":"7f911ccc-deb0-6a77-56d1-e18bc010abe5","toProperty":"start"},{"fromId":"81558e6d-db45-c8ee-8426-15863a64790c","fromProperty":"Do","toId":"d5abe21a-fa4c-bad2-e24a-d81781fff51a","toProperty":"start"},{"fromId":"81558e6d-db45-c8ee-8426-15863a64790c","fromProperty":"SDK Client to use","toId":"cdca044d-4cc1-c8a4-ba45-c5cfba0d536c","toProperty":"currentState"},{"fromId":"7f911ccc-deb0-6a77-56d1-e18bc010abe5","fromProperty":"timerFinished","toId":"51e36d74-05a0-abcd-da37-2a75455c07f1","toProperty":"run"},{"fromId":"cdca044d-4cc1-c8a4-ba45-c5cfba0d536c","fromProperty":"currentState","toId":"51e36d74-05a0-abcd-da37-2a75455c07f1","toProperty":"in-client"},{"fromId":"51e36d74-05a0-abcd-da37-2a75455c07f1","fromProperty":"out-result","toId":"120d86dd-717f-232d-7d08-70d263f01709","toProperty":"result"}],"roots":[{"id":"81558e6d-db45-c8ee-8426-15863a64790c","type":"Component Inputs","x":222,"y":506,"parameters":{},"ports":[{"name":"Do","plug":"output","type":"*","index":0},{"name":"file","plug":"output","type":{"name":"*"},"group":"Data","index":2},{"name":"file object","plug":"output","type":{"name":"*"},"group":"Data","index":3},{"name":"SDK Client to use","plug":"output","type":{"name":"*"},"index":1}],"dynamicports":[],"children":[]},{"id":"120d86dd-717f-232d-7d08-70d263f01709","type":"Component Outputs","x":1634,"y":587,"parameters":{},"ports":[{"name":"Success","plug":"input","type":"*","index":0},{"name":"Failure","plug":"input","type":"*","index":1},{"name":"error","plug":"input","type":{"name":"*"},"index":2},{"name":"result","plug":"input","type":{"name":"*"},"index":3}],"dynamicports":[],"children":[]},{"id":"51e36d74-05a0-abcd-da37-2a75455c07f1","type":"JavaScriptFunction","x":1364,"y":525,"parameters":{"functionScript":"const raw_file = Inputs.raw_file;\r\nconst file_object = Inputs.file_object || {};\r\n\r\nif (!raw_file) return;\r\n\r\nconst client_selection = Inputs.client || null;\r\nconst sdk_client = (client_selection == \"User SDK Client\") ? Noodl.Objects.DirectusSDK.Client : Noodl.Objects.DirectusSDK.SiteClient;\r\n\r\nconst main = async function () {\r\n    try {\r\n        const formData = new FormData();\r\n\r\n        if (Object.keys(file_object).length > 0) {\r\n            for (const key in file_object) {\r\n                formData.append(key, file_object[key]);\r\n            }\r\n        }\r\n        formData.append('file', raw_file);\r\n\r\n        const result = await sdk_client.request(Directus.uploadFiles(formData));\r\n\r\n        Outputs.result = result;\r\n        Outputs.Success();\r\n\r\n    } catch (err) {\r\n        console.error(err);\r\n        Outputs.error = err?.errors.map(i => i.message).join(\"\\n\");\r\n        Outputs.Failure();\r\n    }\r\n}\r\n\r\nmain();\r\n"},"ports":[],"dynamicports":[{"name":"in-raw_file","displayName":"raw_file","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-file_object","displayName":"file_object","plug":"input","type":"*","group":"Inputs","index":5},{"name":"in-client","displayName":"client","plug":"input","type":"*","group":"Inputs","index":6},{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":7},{"name":"out-Failure","displayName":"Failure","plug":"output","type":"signal","group":"Outputs","index":8},{"name":"out-result","displayName":"result","plug":"output","type":"*","group":"Outputs","index":9},{"name":"out-error","displayName":"error","plug":"output","type":"*","group":"Outputs","index":10}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"cdca044d-4cc1-c8a4-ba45-c5cfba0d536c","type":"States","label":"Client type","x":553,"y":308,"parameters":{"states":"User SDK Client,Site SDK Client","useTransitions":false},"ports":[],"dynamicports":[{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To User SDK Client","name":"to-User SDK Client","group":"Go to state","index":6},{"plug":"output","type":"boolean","displayName":"At User SDK Client","name":"at-User SDK Client","group":"Current state","index":7},{"plug":"output","type":"signal","displayName":"Has Reached User SDK Client","name":"reached-User SDK Client","group":"Current state","index":8},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To Site SDK Client","name":"to-Site SDK Client","group":"Go to state","index":9},{"plug":"output","type":"boolean","displayName":"At Site SDK Client","name":"at-Site SDK Client","group":"Current state","index":10},{"plug":"output","type":"signal","displayName":"Has Reached Site SDK Client","name":"reached-Site SDK Client","group":"Current state","index":11},{"plug":"input","type":{"name":"enum","enums":["User SDK Client","Site SDK Client"]},"group":"States","displayName":"State","name":"currentState","default":"User SDK Client","index":12}],"children":[]},{"id":"07c651ed-25a6-65f1-64b1-b658ee180038","type":"JavaScriptFunction","x":792,"y":249,"parameters":{"functionScript":"const state = Inputs.SDKClient ?? null;\r\n\r\nlet res = true;\r\n\r\nif(state == \"Site SDK Client\"){\r\n    const client = Noodl.Objects.DirectusSDK.SiteClient || null;\r\n    if(!client){\r\n        res = false;\r\n        throw new Error(\"Directus Site Client has not yet been set up!\");\r\n    }\r\n}\r\n\r\nif(state == \"User SDK Client\"){\r\n    const client = Noodl.Objects.DirectusSDK.Client || null;\r\n    if(!client){ \r\n        res = false;\r\n        throw new Error(\"Directus User Client has not yet been set up!\");\r\n    }\r\n}\r\n\r\nif(res){\r\n    Outputs.Done();\r\n}"},"ports":[],"dynamicports":[{"name":"in-SDKClient","displayName":"SDKClient","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-Done","displayName":"Done","plug":"output","type":"signal","group":"Outputs","index":5}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"7f911ccc-deb0-6a77-56d1-e18bc010abe5","type":"Timer","x":1029,"y":248,"parameters":{"duration":100},"ports":[],"dynamicports":[],"children":[]},{"id":"d5abe21a-fa4c-bad2-e24a-d81781fff51a","type":"Timer","x":554,"y":222,"parameters":{"duration":100},"ports":[],"dynamicports":[],"children":[]}],"visualRoots":[]}},{"name":"/#Directus/Directus Prefab/Components/Flows/Directus - List Flows","id":"7eeba1b7-6583-1f05-1206-c73a7230bf90","graph":{"connections":[{"fromId":"988f99d4-818e-873f-9460-a3cc87de166e","fromProperty":"SDK Client to use","toId":"2a681545-f410-3bf0-a15e-8a6d618fc7f4","toProperty":"currentState"},{"fromId":"2a681545-f410-3bf0-a15e-8a6d618fc7f4","fromProperty":"currentState","toId":"e1d549c5-895a-926d-5a08-1bcb8a576a48","toProperty":"in-SDKClient"},{"fromId":"988f99d4-818e-873f-9460-a3cc87de166e","fromProperty":"Do","toId":"db5a7e2a-faea-f38b-c9be-f4a80dbca949","toProperty":"start"},{"fromId":"db5a7e2a-faea-f38b-c9be-f4a80dbca949","fromProperty":"timerFinished","toId":"e1d549c5-895a-926d-5a08-1bcb8a576a48","toProperty":"run"},{"fromId":"988f99d4-818e-873f-9460-a3cc87de166e","fromProperty":"search","toId":"b7a0b2d5-1685-d2be-d967-0f8f67330162","toProperty":"Search"},{"fromId":"988f99d4-818e-873f-9460-a3cc87de166e","fromProperty":"filter","toId":"b7a0b2d5-1685-d2be-d967-0f8f67330162","toProperty":"filter"},{"fromId":"988f99d4-818e-873f-9460-a3cc87de166e","fromProperty":"aggregate","toId":"b7a0b2d5-1685-d2be-d967-0f8f67330162","toProperty":"aggregate"},{"fromId":"988f99d4-818e-873f-9460-a3cc87de166e","fromProperty":"alias","toId":"b7a0b2d5-1685-d2be-d967-0f8f67330162","toProperty":"alias"},{"fromId":"988f99d4-818e-873f-9460-a3cc87de166e","fromProperty":"deep","toId":"b7a0b2d5-1685-d2be-d967-0f8f67330162","toProperty":"deep"},{"fromId":"988f99d4-818e-873f-9460-a3cc87de166e","fromProperty":"groupBy","toId":"b7a0b2d5-1685-d2be-d967-0f8f67330162","toProperty":"groupBy"},{"fromId":"988f99d4-818e-873f-9460-a3cc87de166e","fromProperty":"page","toId":"b7a0b2d5-1685-d2be-d967-0f8f67330162","toProperty":"Page"},{"fromId":"988f99d4-818e-873f-9460-a3cc87de166e","fromProperty":"offset","toId":"b7a0b2d5-1685-d2be-d967-0f8f67330162","toProperty":"Offset"},{"fromId":"988f99d4-818e-873f-9460-a3cc87de166e","fromProperty":"sort","toId":"b7a0b2d5-1685-d2be-d967-0f8f67330162","toProperty":"Sort"},{"fromId":"988f99d4-818e-873f-9460-a3cc87de166e","fromProperty":"fields","toId":"b7a0b2d5-1685-d2be-d967-0f8f67330162","toProperty":"Fields"},{"fromId":"988f99d4-818e-873f-9460-a3cc87de166e","fromProperty":"Get all fields","toId":"b7a0b2d5-1685-d2be-d967-0f8f67330162","toProperty":"Get all fields"},{"fromId":"988f99d4-818e-873f-9460-a3cc87de166e","fromProperty":"limit","toId":"b7a0b2d5-1685-d2be-d967-0f8f67330162","toProperty":"Limit"},{"fromId":"b7a0b2d5-1685-d2be-d967-0f8f67330162","fromProperty":"query","toId":"5e397515-214b-fc06-8b46-435c69a69e49","toProperty":"query"},{"fromId":"b7a0b2d5-1685-d2be-d967-0f8f67330162","fromProperty":"operation","toId":"5e397515-214b-fc06-8b46-435c69a69e49","toProperty":"operation"},{"fromId":"2a681545-f410-3bf0-a15e-8a6d618fc7f4","fromProperty":"currentState","toId":"5e397515-214b-fc06-8b46-435c69a69e49","toProperty":"client"},{"fromId":"5e397515-214b-fc06-8b46-435c69a69e49","fromProperty":"result","toId":"82312e85-a087-198f-c9ac-81b1cd6f8968","toProperty":"result"},{"fromId":"5e397515-214b-fc06-8b46-435c69a69e49","fromProperty":"error","toId":"82312e85-a087-198f-c9ac-81b1cd6f8968","toProperty":"error"},{"fromId":"5e397515-214b-fc06-8b46-435c69a69e49","fromProperty":"Success","toId":"82312e85-a087-198f-c9ac-81b1cd6f8968","toProperty":"Success"},{"fromId":"5e397515-214b-fc06-8b46-435c69a69e49","fromProperty":"Failure","toId":"82312e85-a087-198f-c9ac-81b1cd6f8968","toProperty":"Failure"},{"fromId":"e0f56ddb-bfca-7e3e-9ad7-5a9f50b53a29","fromProperty":"timerFinished","toId":"5e397515-214b-fc06-8b46-435c69a69e49","toProperty":"GetData"},{"fromId":"988f99d4-818e-873f-9460-a3cc87de166e","fromProperty":"Do","toId":"b7a0b2d5-1685-d2be-d967-0f8f67330162","toProperty":"Set"},{"fromId":"b7a0b2d5-1685-d2be-d967-0f8f67330162","fromProperty":"itemID","toId":"5e397515-214b-fc06-8b46-435c69a69e49","toProperty":"flowID"},{"fromId":"e1d549c5-895a-926d-5a08-1bcb8a576a48","fromProperty":"out-Done","toId":"e0f56ddb-bfca-7e3e-9ad7-5a9f50b53a29","toProperty":"start"},{"fromId":"988f99d4-818e-873f-9460-a3cc87de166e","fromProperty":"Flow Get Type","toId":"a0ae2f6a-cf73-7168-bd98-9700f094c690","toProperty":"currentState"},{"fromId":"a0ae2f6a-cf73-7168-bd98-9700f094c690","fromProperty":"currentState","toId":"b7a0b2d5-1685-d2be-d967-0f8f67330162","toProperty":"Get Type"},{"fromId":"988f99d4-818e-873f-9460-a3cc87de166e","fromProperty":"flow ID","toId":"ab6e00ff-09f6-9523-60f9-76302a5c9bb3","toProperty":"value"},{"fromId":"ab6e00ff-09f6-9523-60f9-76302a5c9bb3","fromProperty":"savedValue","toId":"b7a0b2d5-1685-d2be-d967-0f8f67330162","toProperty":"Item ID"}],"roots":[{"id":"988f99d4-818e-873f-9460-a3cc87de166e","type":"Component Inputs","x":-1129,"y":360,"parameters":{},"ports":[{"name":"Do","plug":"output","type":"*","index":0},{"name":"limit","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":4},{"name":"fields","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":6},{"name":"Get all fields","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":5},{"name":"SDK Client to use","plug":"output","type":{"name":"*"},"group":"Config","index":1},{"name":"sort","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":7},{"name":"offset","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":8},{"name":"page","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":9},{"name":"deep","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":14},{"name":"groupBy","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":12},{"name":"aggregate","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":11},{"name":"alias","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":15},{"name":"flow ID","plug":"output","type":{"name":"*"},"group":"What to Get","index":3},{"name":"filter","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":13},{"name":"search","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":10},{"name":"Flow Get Type","plug":"output","type":{"name":"*"},"group":"What to Get","index":2}],"dynamicports":[],"children":[]},{"id":"82312e85-a087-198f-c9ac-81b1cd6f8968","type":"Component Outputs","x":444.39524712057164,"y":227.19478058025948,"parameters":{},"ports":[{"name":"Success","plug":"input","type":"*","index":0},{"name":"Failure","plug":"input","type":"*","index":1},{"name":"error","plug":"input","type":{"name":"*"},"index":3},{"name":"result","plug":"input","type":{"name":"*"},"index":2}],"dynamicports":[],"children":[]},{"id":"2a681545-f410-3bf0-a15e-8a6d618fc7f4","type":"States","label":"Client type","x":-820.4779330568291,"y":145.72752752390454,"parameters":{"states":"User SDK Client,Site SDK Client","useTransitions":false},"ports":[],"dynamicports":[{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To User SDK Client","name":"to-User SDK Client","group":"Go to state","index":6},{"plug":"output","type":"boolean","displayName":"At User SDK Client","name":"at-User SDK Client","group":"Current state","index":7},{"plug":"output","type":"signal","displayName":"Has Reached User SDK Client","name":"reached-User SDK Client","group":"Current state","index":8},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To Site SDK Client","name":"to-Site SDK Client","group":"Go to state","index":9},{"plug":"output","type":"boolean","displayName":"At Site SDK Client","name":"at-Site SDK Client","group":"Current state","index":10},{"plug":"output","type":"signal","displayName":"Has Reached Site SDK Client","name":"reached-Site SDK Client","group":"Current state","index":11},{"plug":"input","type":{"name":"enum","enums":["User SDK Client","Site SDK Client"]},"group":"States","displayName":"State","name":"currentState","default":"User SDK Client","index":12}],"children":[]},{"id":"e1d549c5-895a-926d-5a08-1bcb8a576a48","type":"JavaScriptFunction","x":-553.366821945718,"y":9.30530538645337,"parameters":{"functionScript":"const state = Inputs.SDKClient ?? null;\r\n\r\nlet res = true;\r\n\r\nif(state == \"Site SDK Client\"){\r\n    const client = Noodl.Objects.DirectusSDK.SiteClient || null;\r\n    if(!client){\r\n        res = false;\r\n        throw new Error(\"Directus Site Client has not yet been set up!\");\r\n    }\r\n}\r\n\r\nif(state == \"User SDK Client\"){\r\n    const client = Noodl.Objects.DirectusSDK.Client || null;\r\n    if(!client){ \r\n        res = false;\r\n        throw new Error(\"Directus User Client has not yet been set up!\");\r\n    }\r\n}\r\n\r\nif(res){\r\n    Outputs.Done();\r\n}"},"ports":[],"dynamicports":[{"name":"in-SDKClient","displayName":"SDKClient","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-Done","displayName":"Done","plug":"output","type":"signal","group":"Outputs","index":5}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"db5a7e2a-faea-f38b-c9be-f4a80dbca949","type":"Timer","x":-819.1417116197696,"y":39.644554599795924,"parameters":{"duration":100},"ports":[],"dynamicports":[],"children":[]},{"id":"b7a0b2d5-1685-d2be-d967-0f8f67330162","type":"/#Directus/Directus Prefab/Components/Utils - Query Parameters/Directus - Query parameters (for Read)","x":-491.6710890800407,"y":353.62181075958597,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"5e397515-214b-fc06-8b46-435c69a69e49","type":"Javascript2","x":167,"y":226,"parameters":{"code":"Script.Inputs = {\r\n    client: \"string\",\r\n    operation: \"string\",\r\n    flowID: \"string\",\r\n}\r\n\r\n\r\nScript.Signals.GetData = async function () {\r\n\r\n    const client_selection = Script.Inputs.client || null;\r\n    const sdk_client = (client_selection == \"User SDK Client\") ? Noodl.Objects.DirectusSDK.Client : Noodl.Objects.DirectusSDK.SiteClient;\r\n\r\n    const operation = Script.Inputs.operation;\r\n    const flowID = Script.Inputs.flowID;\r\n    \r\n    const query = Script.Inputs.query || {};\r\n\r\n    try {\r\n        if (sdk_client && operation) {\r\n            let result;\r\n            switch (operation) {\r\n                case \"single\":\r\n                    result = await sdk_client.request(Directus.readFlow( flowID, query));\r\n                    break;\r\n                case \"multiple\":\r\n                    result = await sdk_client.request(Directus.readFlows( query));\r\n                    break;\r\n                case \"all\":\r\n                    query.limit = -1;\r\n                    result = await sdk_client.request(Directus.readFlows( query));\r\n                    break;\r\n            }\r\n            \r\n            Script.Outputs.result = result;\r\n            if (result) {\r\n                Script.Outputs.Success();\r\n            } else {\r\n                Script.Outputs.Failure();\r\n            }\r\n        } else {\r\n            console.error(err);\r\n\r\n            Script.Outputs.error = \"Invalid configuration!\";\r\n            Script.Outputs.Failure();\r\n        }\r\n\r\n    } catch (err) {\r\n        console.error(err);\r\n\r\n        Script.Outputs.error = err?.errors.map(i => i.message).join(\"\\n\") ?? JSON.stringify(err);\r\n        Script.Outputs.Failure();\r\n    }\r\n}\r\n"},"ports":[],"dynamicports":[{"name":"client","plug":"input","type":{"name":"string"},"group":"Inputs","index":5},{"name":"operation","plug":"input","type":{"name":"string"},"group":"Inputs","index":6},{"name":"flowID","plug":"input","type":{"name":"string"},"group":"Inputs","index":7},{"name":"GetData","plug":"input","type":{"name":"signal"},"group":"Inputs","index":8},{"name":"query","displayName":"query","plug":"input","type":"*","group":"Inputs","index":9},{"name":"Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":10},{"name":"Failure","displayName":"Failure","plug":"output","type":"signal","group":"Outputs","index":11},{"name":"result","displayName":"result","plug":"output","type":"*","group":"Outputs","index":12},{"name":"error","displayName":"error","plug":"output","type":"*","group":"Outputs","index":13}],"children":[],"metadata":{"merge":{"soureCodePorts":["code"]}}},{"id":"e0f56ddb-bfca-7e3e-9ad7-5a9f50b53a29","type":"Timer","x":-309.2644678530828,"y":31.630738656299854,"parameters":{"duration":100},"ports":[],"dynamicports":[],"children":[]},{"id":"a0ae2f6a-cf73-7168-bd98-9700f094c690","type":"States","label":"Get Type","x":-823,"y":279,"parameters":{"states":"Get Single by ID,Get Multiple by Filter,Get All","useTransitions":false},"ports":[],"dynamicports":[{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To Get Single by ID","name":"to-Get Single by ID","group":"Go to state","index":6},{"plug":"output","type":"boolean","displayName":"At Get Single by ID","name":"at-Get Single by ID","group":"Current state","index":7},{"plug":"output","type":"signal","displayName":"Has Reached Get Single by ID","name":"reached-Get Single by ID","group":"Current state","index":8},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To Get Multiple by Filter","name":"to-Get Multiple by Filter","group":"Go to state","index":9},{"plug":"output","type":"boolean","displayName":"At Get Multiple by Filter","name":"at-Get Multiple by Filter","group":"Current state","index":10},{"plug":"output","type":"signal","displayName":"Has Reached Get Multiple by Filter","name":"reached-Get Multiple by Filter","group":"Current state","index":11},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To Get All","name":"to-Get All","group":"Go to state","index":12},{"plug":"output","type":"boolean","displayName":"At Get All","name":"at-Get All","group":"Current state","index":13},{"plug":"output","type":"signal","displayName":"Has Reached Get All","name":"reached-Get All","group":"Current state","index":14},{"plug":"input","type":{"name":"enum","enums":["Get Single by ID","Get Multiple by Filter","Get All"]},"group":"States","displayName":"State","name":"currentState","default":"Get Single by ID","index":15}],"children":[]},{"id":"ab6e00ff-09f6-9523-60f9-76302a5c9bb3","type":"String","label":"flow ID","x":-830.0807529372075,"y":389.8583034710232,"parameters":{},"ports":[],"dynamicports":[],"children":[]}],"visualRoots":[]}},{"name":"/#Directus/Directus Prefab/Components/Flows/Directus - Run Flow","id":"b99e37df-438f-23cc-f8f6-859778b8ea60","graph":{"connections":[{"fromId":"c57e74c4-8598-96e4-86c1-0325fcfc706b","fromProperty":"SDK Client to use","toId":"5718dcce-5eb3-8fbc-d59b-b7b16150c8a7","toProperty":"currentState"},{"fromId":"5718dcce-5eb3-8fbc-d59b-b7b16150c8a7","fromProperty":"currentState","toId":"1f1b38a7-d343-149f-7704-31c4dd93163e","toProperty":"in-SDKClient"},{"fromId":"c57e74c4-8598-96e4-86c1-0325fcfc706b","fromProperty":"Do","toId":"359d9a87-5241-1557-4e52-122dc3e9fe58","toProperty":"start"},{"fromId":"359d9a87-5241-1557-4e52-122dc3e9fe58","fromProperty":"timerFinished","toId":"1f1b38a7-d343-149f-7704-31c4dd93163e","toProperty":"run"},{"fromId":"5718dcce-5eb3-8fbc-d59b-b7b16150c8a7","fromProperty":"currentState","toId":"89b5b232-95f4-89af-4786-f608d034d50a","toProperty":"client"},{"fromId":"89b5b232-95f4-89af-4786-f608d034d50a","fromProperty":"result","toId":"140446b2-ac82-e29f-a8a0-ba2a9e477da6","toProperty":"result"},{"fromId":"89b5b232-95f4-89af-4786-f608d034d50a","fromProperty":"error","toId":"140446b2-ac82-e29f-a8a0-ba2a9e477da6","toProperty":"error"},{"fromId":"89b5b232-95f4-89af-4786-f608d034d50a","fromProperty":"Success","toId":"140446b2-ac82-e29f-a8a0-ba2a9e477da6","toProperty":"Success"},{"fromId":"89b5b232-95f4-89af-4786-f608d034d50a","fromProperty":"Failure","toId":"140446b2-ac82-e29f-a8a0-ba2a9e477da6","toProperty":"Failure"},{"fromId":"1f1b38a7-d343-149f-7704-31c4dd93163e","fromProperty":"out-Done","toId":"fb94191f-e454-ee0b-9584-cb8fc0afa4a7","toProperty":"start"},{"fromId":"c57e74c4-8598-96e4-86c1-0325fcfc706b","fromProperty":"Trigger type","toId":"6b838b9b-fd2b-356f-06c9-5c7cd322f6f9","toProperty":"currentState"},{"fromId":"c57e74c4-8598-96e4-86c1-0325fcfc706b","fromProperty":"flow ID","toId":"89b5b232-95f4-89af-4786-f608d034d50a","toProperty":"flowID"},{"fromId":"fb94191f-e454-ee0b-9584-cb8fc0afa4a7","fromProperty":"timerFinished","toId":"89b5b232-95f4-89af-4786-f608d034d50a","toProperty":"RunFlow"},{"fromId":"6b838b9b-fd2b-356f-06c9-5c7cd322f6f9","fromProperty":"currentState","toId":"89b5b232-95f4-89af-4786-f608d034d50a","toProperty":"trigger_type"},{"fromId":"c57e74c4-8598-96e4-86c1-0325fcfc706b","fromProperty":"payload_data","toId":"89b5b232-95f4-89af-4786-f608d034d50a","toProperty":"payload_data"},{"fromId":"c57e74c4-8598-96e4-86c1-0325fcfc706b","fromProperty":"query_params","toId":"89b5b232-95f4-89af-4786-f608d034d50a","toProperty":"query_params"}],"roots":[{"id":"c57e74c4-8598-96e4-86c1-0325fcfc706b","type":"Component Inputs","x":487,"y":943,"parameters":{},"ports":[{"name":"Do","plug":"output","type":"*","index":0},{"name":"SDK Client to use","plug":"output","type":{"name":"*"},"group":"Config","index":1},{"name":"flow ID","plug":"output","type":{"name":"*"},"group":"Config","index":3},{"name":"Trigger type","plug":"output","type":{"name":"*"},"group":"Config","index":2},{"name":"payload_data","plug":"output","type":{"name":"*"},"group":"POST trigger","index":4},{"name":"query_params","plug":"output","type":{"name":"*"},"group":"GET trigger","index":6}],"dynamicports":[],"children":[]},{"id":"140446b2-ac82-e29f-a8a0-ba2a9e477da6","type":"Component Outputs","x":1893.9499783441859,"y":961.9948695737628,"parameters":{},"ports":[{"name":"Success","plug":"input","type":"*","index":0},{"name":"Failure","plug":"input","type":"*","index":1},{"name":"error","plug":"input","type":{"name":"*"},"index":3},{"name":"result","plug":"input","type":{"name":"*"},"index":2}],"dynamicports":[],"children":[]},{"id":"5718dcce-5eb3-8fbc-d59b-b7b16150c8a7","type":"States","label":"Client type","x":772,"y":773,"parameters":{"states":"User SDK Client,Site SDK Client","useTransitions":false},"ports":[],"dynamicports":[{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To User SDK Client","name":"to-User SDK Client","group":"Go to state","index":6},{"plug":"output","type":"boolean","displayName":"At User SDK Client","name":"at-User SDK Client","group":"Current state","index":7},{"plug":"output","type":"signal","displayName":"Has Reached User SDK Client","name":"reached-User SDK Client","group":"Current state","index":8},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To Site SDK Client","name":"to-Site SDK Client","group":"Go to state","index":9},{"plug":"output","type":"boolean","displayName":"At Site SDK Client","name":"at-Site SDK Client","group":"Current state","index":10},{"plug":"output","type":"signal","displayName":"Has Reached Site SDK Client","name":"reached-Site SDK Client","group":"Current state","index":11},{"plug":"input","type":{"name":"enum","enums":["User SDK Client","Site SDK Client"]},"group":"States","displayName":"State","name":"currentState","default":"User SDK Client","index":12}],"children":[]},{"id":"1f1b38a7-d343-149f-7704-31c4dd93163e","type":"JavaScriptFunction","x":1033,"y":724,"parameters":{"functionScript":"const state = Inputs.SDKClient ?? null;\r\n\r\nlet res = true;\r\n\r\nif(state == \"Site SDK Client\"){\r\n    const client = Noodl.Objects.DirectusSDK.SiteClient || null;\r\n    if(!client){\r\n        res = false;\r\n        throw new Error(\"Directus Site Client has not yet been set up!\");\r\n    }\r\n}\r\n\r\nif(state == \"User SDK Client\"){\r\n    const client = Noodl.Objects.DirectusSDK.Client || null;\r\n    if(!client){ \r\n        res = false;\r\n        throw new Error(\"Directus User Client has not yet been set up!\");\r\n    }\r\n}\r\n\r\nif(res){\r\n    Outputs.Done();\r\n}"},"ports":[],"dynamicports":[{"name":"in-SDKClient","displayName":"SDKClient","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-Done","displayName":"Done","plug":"output","type":"signal","group":"Outputs","index":5}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"359d9a87-5241-1557-4e52-122dc3e9fe58","type":"Timer","x":773,"y":667,"parameters":{"duration":100},"ports":[],"dynamicports":[],"children":[]},{"id":"89b5b232-95f4-89af-4786-f608d034d50a","type":"Javascript2","x":1641.9499783441859,"y":840.9948695737628,"parameters":{"code":"Script.Inputs = {\r\n    client: \"string\",\r\n    flowID: \"string\",\r\n    trigger_type: \"string\"\r\n}\r\n\r\n\r\nScript.Signals.RunFlow = async function () {\r\n\r\n    const client_selection = Script.Inputs.client || null;\r\n    const sdk_client = (client_selection == \"User SDK Client\") ? Noodl.Objects.DirectusSDK.Client : Noodl.Objects.DirectusSDK.SiteClient;\r\n\r\n    const trigger_type = Script.Inputs.trigger_type ?? null;\r\n    const flowID = Script.Inputs.flowID ?? null;\r\n\r\n    const query_params = Script.Inputs.query_params ?? {};\r\n    const payload_data = Script.Inputs.payload_data ?? {};\r\n\r\n    try {\r\n        if (sdk_client && trigger_type && flowID) {\r\n            let result;\r\n\r\n            if (trigger_type == \"GET\") {\r\n                result = await sdk_client.request(Directus.triggerFlow('GET', flowID, query_params ));\r\n            }\r\n            \r\n            if (trigger_type == \"POST\") {\r\n                result = await sdk_client.request(Directus.triggerFlow('POST', flowID, payload_data));\r\n            }\r\n\r\n            Script.Outputs.result = result;\r\n            if (result) {\r\n                Script.Outputs.Success();\r\n            } else {\r\n                Script.Outputs.Failure();\r\n            }\r\n        } else {\r\n            console.error(err);\r\n\r\n            Script.Outputs.error = \"Invalid configuration!\";\r\n            Script.Outputs.Failure();\r\n        }\r\n\r\n    } catch (err) {\r\n        console.error(err);\r\n\r\n        Script.Outputs.error = err?.errors.map(i => i.message).join(\"\\n\") ?? JSON.stringify(err);\r\n        Script.Outputs.Failure();\r\n    }\r\n}\r\n"},"ports":[],"dynamicports":[{"name":"client","plug":"input","type":{"name":"string"},"group":"Inputs","index":5},{"name":"flowID","plug":"input","type":{"name":"string"},"group":"Inputs","index":6},{"name":"trigger_type","plug":"input","type":{"name":"string"},"group":"Inputs","index":7},{"name":"RunFlow","plug":"input","type":{"name":"signal"},"group":"Inputs","index":8},{"name":"query_params","displayName":"query_params","plug":"input","type":"*","group":"Inputs","index":9},{"name":"payload_data","displayName":"payload_data","plug":"input","type":"*","group":"Inputs","index":10},{"name":"Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":11},{"name":"Failure","displayName":"Failure","plug":"output","type":"signal","group":"Outputs","index":12},{"name":"result","displayName":"result","plug":"output","type":"*","group":"Outputs","index":13},{"name":"error","displayName":"error","plug":"output","type":"*","group":"Outputs","index":14}],"children":[],"metadata":{"merge":{"soureCodePorts":["code"]}}},{"id":"fb94191f-e454-ee0b-9584-cb8fc0afa4a7","type":"Timer","x":1261,"y":726,"parameters":{"duration":100},"ports":[],"dynamicports":[],"children":[]},{"id":"6b838b9b-fd2b-356f-06c9-5c7cd322f6f9","type":"States","x":775.2667031543157,"y":905.8165685219599,"parameters":{"states":"GET,POST","useTransitions":false,"currentState":"POST"},"ports":[],"dynamicports":[{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To GET","name":"to-GET","group":"Go to state","index":6},{"plug":"output","type":"boolean","displayName":"At GET","name":"at-GET","group":"Current state","index":7},{"plug":"output","type":"signal","displayName":"Has Reached GET","name":"reached-GET","group":"Current state","index":8},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To POST","name":"to-POST","group":"Go to state","index":9},{"plug":"output","type":"boolean","displayName":"At POST","name":"at-POST","group":"Current state","index":10},{"plug":"output","type":"signal","displayName":"Has Reached POST","name":"reached-POST","group":"Current state","index":11},{"plug":"input","type":{"name":"enum","enums":["GET","POST"]},"group":"States","displayName":"State","name":"currentState","default":"GET","index":12}],"children":[]}],"visualRoots":[],"comments":[{"text":"                                   ❗ ⚠️ Warning ⚠️ ❗\n\nThe usage of Flows, especially as Cloud Functions, has to be properly secured.\n\nDo check out the Docs to ensure that the Security of your Directus backend has been ensured before you execute Flows using this component!","width":544,"height":241,"fill":"transparent","x":823,"y":329,"id":"04ae28b4-849b-c1b7-c8f0-170970f97d8f","color":"danger","largeFont":true},{"text":"1. It is recommended to use POST based Flows, whenever possible\n2. In the case of GET based Flows, make sure to provide valid 'query parameters' only","width":792,"height":80,"fill":"transparent","x":810,"y":1257,"id":"2ba8203c-fb4a-eecc-127d-b3cd638bd2f5","color":"notice","largeFont":true}]}},{"name":"/#Directus/Directus Prefab/Components/Other/Directus - Ping Server","id":"fd73e466-eef8-f7f2-c358-f4823ff7bed0","graph":{"connections":[{"fromId":"398f433e-42d6-6b4d-8ff8-a596b6908226","fromProperty":"Do","toId":"0a76bdb4-c2d2-7cd4-3a93-4bdb19662d13","toProperty":"run"},{"fromId":"0a76bdb4-c2d2-7cd4-3a93-4bdb19662d13","fromProperty":"out-Success","toId":"9f3e9ac7-509f-d92c-6c8a-a099ac80b49b","toProperty":"Success"},{"fromId":"0a76bdb4-c2d2-7cd4-3a93-4bdb19662d13","fromProperty":"out-Failure","toId":"9f3e9ac7-509f-d92c-6c8a-a099ac80b49b","toProperty":"Failure"},{"fromId":"0a76bdb4-c2d2-7cd4-3a93-4bdb19662d13","fromProperty":"out-error","toId":"9f3e9ac7-509f-d92c-6c8a-a099ac80b49b","toProperty":"error"}],"roots":[{"id":"398f433e-42d6-6b4d-8ff8-a596b6908226","type":"Component Inputs","x":-224,"y":-12,"parameters":{},"ports":[{"name":"Do","plug":"output","type":"*","index":0}],"dynamicports":[],"children":[]},{"id":"9f3e9ac7-509f-d92c-6c8a-a099ac80b49b","type":"Component Outputs","x":278,"y":-11,"parameters":{},"ports":[{"name":"Success","plug":"input","type":"*","index":0},{"name":"Failure","plug":"input","type":"*","index":1},{"name":"error","plug":"input","type":{"name":"*"},"index":2}],"dynamicports":[],"children":[]},{"id":"0a76bdb4-c2d2-7cd4-3a93-4bdb19662d13","type":"JavaScriptFunction","x":23.200000000000045,"y":-12.099998474121094,"parameters":{"functionScript":"const client = Noodl.Objects.DirectusSDK.Client ?? Noodl.Objects.DirectusSDK.SiteClient;\r\n\r\nconst main = async function () {\r\n    try {\r\n        if (client) {\r\n            const result = await client.request(Directus.serverPing());\r\n\r\n            if (result == \"pong\") {\r\n                Outputs.Success();\r\n            } else {\r\n                Outputs.error = \"Unable to reach server!\"\r\n                Outputs.Failure();\r\n            }\r\n        } else {\r\n            throw new Error(\"Invalid Intitialization!\");\r\n        }\r\n\r\n    } catch (err) {\r\n        console.error(err);\r\n\r\n        Outputs.error = err?.errors.map(i => i.message).join(\"\\n\");\r\n        Outputs.Failure();\r\n    }\r\n}\r\n\r\nmain();\r\n"},"ports":[],"dynamicports":[{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":4},{"name":"out-Failure","displayName":"Failure","plug":"output","type":"signal","group":"Outputs","index":5},{"name":"out-error","displayName":"error","plug":"output","type":"*","group":"Outputs","index":6}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}}],"visualRoots":[]}},{"name":"/#Directus/Directus Prefab/Components/Other/Directus - Server info","id":"0fb2e834-7459-8c2e-43be-782ab0e9ff28","graph":{"connections":[{"fromId":"7b382aeb-9353-5945-dea7-dc5c60b7dc63","fromProperty":"out-Success","toId":"f942d412-bcc6-9a3d-7a41-7267f0b65859","toProperty":"Success"},{"fromId":"7b382aeb-9353-5945-dea7-dc5c60b7dc63","fromProperty":"out-Failure","toId":"f942d412-bcc6-9a3d-7a41-7267f0b65859","toProperty":"Failure"},{"fromId":"7b382aeb-9353-5945-dea7-dc5c60b7dc63","fromProperty":"out-error","toId":"f942d412-bcc6-9a3d-7a41-7267f0b65859","toProperty":"error"},{"fromId":"7596cb7f-2cb5-7cb5-dccd-d0b8e8bdcaa5","fromProperty":"Do","toId":"261b9a27-ebf7-6d51-03c9-f60fda0e9b24","toProperty":"Do"},{"fromId":"261b9a27-ebf7-6d51-03c9-f60fda0e9b24","fromProperty":"Done","toId":"7b382aeb-9353-5945-dea7-dc5c60b7dc63","toProperty":"run"},{"fromId":"261b9a27-ebf7-6d51-03c9-f60fda0e9b24","fromProperty":"client","toId":"7b382aeb-9353-5945-dea7-dc5c60b7dc63","toProperty":"in-client"}],"roots":[{"id":"7596cb7f-2cb5-7cb5-dccd-d0b8e8bdcaa5","type":"Component Inputs","x":-499,"y":-8,"parameters":{},"ports":[{"name":"Do","plug":"output","type":"*","index":0}],"dynamicports":[],"children":[]},{"id":"f942d412-bcc6-9a3d-7a41-7267f0b65859","type":"Component Outputs","x":278,"y":-11,"parameters":{},"ports":[{"name":"Success","plug":"input","type":"*","index":0},{"name":"Failure","plug":"input","type":"*","index":1},{"name":"error","plug":"input","type":{"name":"*"},"index":2}],"dynamicports":[],"children":[]},{"id":"7b382aeb-9353-5945-dea7-dc5c60b7dc63","type":"JavaScriptFunction","x":23.200000000000045,"y":-12.099998474121094,"parameters":{"functionScript":"const client = Inputs.client || null;\r\n\r\nconst main = async function () {\r\n    try {\r\n        if (client) {\r\n            const result = await client.request(Directus.serverInfo());\r\n\r\n            if (result) {\r\n                Outputs.Success();\r\n            } else {\r\n                Outputs.error = \"Unable to reach server!\"\r\n                Outputs.Failure();\r\n            }\r\n        } else {\r\n            throw new Error(\"Invalid Intitialization!\");\r\n        }\r\n\r\n    } catch (err) {\r\n        console.error(err);\r\n\r\n        Outputs.error = err?.errors.map(i => i.message).join(\"\\n\");\r\n        Outputs.Failure();\r\n    }\r\n}\r\n\r\nmain();\r\n"},"ports":[],"dynamicports":[{"name":"in-client","displayName":"client","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":5},{"name":"out-Failure","displayName":"Failure","plug":"output","type":"signal","group":"Outputs","index":6},{"name":"out-error","displayName":"error","plug":"output","type":"*","group":"Outputs","index":7}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"261b9a27-ebf7-6d51-03c9-f60fda0e9b24","type":"/#Directus/Directus Prefab/Components/Utils/Get a SDK client","x":-247.0666666666666,"y":-8.966664632161496,"parameters":{},"ports":[],"dynamicports":[],"children":[]}],"visualRoots":[]}},{"name":"/#Directus/Directus Prefab/Components/User/Directus - Get Current User","id":"32a09982-ee46-88ce-debc-efeda424d94d","graph":{"connections":[{"fromId":"68a6a0ec-0cef-7f70-e4a4-b88602174f21","fromProperty":"Do","toId":"f63586d6-400f-edd0-fef8-a420a6394c7e","toProperty":"run"},{"fromId":"f63586d6-400f-edd0-fef8-a420a6394c7e","fromProperty":"out-Success","toId":"75a49eeb-08e3-c322-dab9-811104101b43","toProperty":"Success"},{"fromId":"f63586d6-400f-edd0-fef8-a420a6394c7e","fromProperty":"out-Failure","toId":"75a49eeb-08e3-c322-dab9-811104101b43","toProperty":"Failure"},{"fromId":"f63586d6-400f-edd0-fef8-a420a6394c7e","fromProperty":"out-error","toId":"75a49eeb-08e3-c322-dab9-811104101b43","toProperty":"error"},{"fromId":"f63586d6-400f-edd0-fef8-a420a6394c7e","fromProperty":"out-Failure","toId":"37de114b-329e-faaf-b9c1-c4fddeb223a7","toProperty":"sendEvent"}],"roots":[{"id":"68a6a0ec-0cef-7f70-e4a4-b88602174f21","type":"Component Inputs","x":-258,"y":-12,"parameters":{},"ports":[{"name":"Do","plug":"output","type":"*","index":0}],"dynamicports":[],"children":[]},{"id":"75a49eeb-08e3-c322-dab9-811104101b43","type":"Component Outputs","x":331,"y":-14,"parameters":{},"ports":[{"name":"Success","plug":"input","type":"*","index":0},{"name":"Failure","plug":"input","type":"*","index":1},{"name":"error","plug":"input","type":{"name":"*"},"index":2}],"dynamicports":[],"children":[]},{"id":"f63586d6-400f-edd0-fef8-a420a6394c7e","type":"JavaScriptFunction","x":23.200000000000045,"y":-12.099998474121094,"parameters":{"functionScript":"const client = Noodl.Objects.DirectusSDK.Client ?? null;\r\n\r\nconst main = async function () {\r\n    try {\r\n        const result = await client.request(Directus.readMe());\r\n\r\n        Noodl.Objects[\"Current User\"] = result;\r\n        Noodl.Objects[\"Current User\"].authenticated = true;\r\n\r\n        if(result?.avatar){\r\n            const token = await client.getToken();\r\n            Noodl.Objects[\"Current User\"].avatar = Noodl.Objects.DirectusSDK.Client.url.origin + \"/assets/\" + result.avatar + \"?access_token=\" + token ?? null;\r\n        }\r\n\r\n        Outputs.Success();\r\n        \r\n    } catch (err) {\r\n        console.error(err);\r\n        \r\n        Noodl.Objects[\"Current User\"].authenticated = false;\r\n\r\n        Outputs.error = err?.errors.map(i => i.message ).join(\"\\n\");\r\n        Outputs.Failure();\r\n    }\r\n}\r\n\r\nmain();\r\n"},"ports":[],"dynamicports":[{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":4},{"name":"out-Failure","displayName":"Failure","plug":"output","type":"signal","group":"Outputs","index":5},{"name":"out-error","displayName":"error","plug":"output","type":"*","group":"Outputs","index":6}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"37de114b-329e-faaf-b9c1-c4fddeb223a7","type":"Event Sender","x":328,"y":149,"parameters":{"channelName":"User-Logged-Out"},"ports":[],"dynamicports":[],"children":[]}],"visualRoots":[]}},{"name":"/#Directus/Directus Prefab/Components/User/Directus - Update Current User","id":"cb5b32f5-d2bb-150f-6736-505a90261c40","graph":{"connections":[{"fromId":"cd548b2a-936b-722d-e908-d3f149320b4c","fromProperty":"Do","toId":"dc1fd604-4510-d3a3-4d7b-8af141fb72b9","toProperty":"run"},{"fromId":"dc1fd604-4510-d3a3-4d7b-8af141fb72b9","fromProperty":"out-Success","toId":"ac7efe58-5065-3b9d-11d4-1e4d5a4955ae","toProperty":"Success"},{"fromId":"dc1fd604-4510-d3a3-4d7b-8af141fb72b9","fromProperty":"out-error","toId":"ac7efe58-5065-3b9d-11d4-1e4d5a4955ae","toProperty":"error"},{"fromId":"cd548b2a-936b-722d-e908-d3f149320b4c","fromProperty":"data","toId":"dc1fd604-4510-d3a3-4d7b-8af141fb72b9","toProperty":"in-data"},{"fromId":"dc1fd604-4510-d3a3-4d7b-8af141fb72b9","fromProperty":"out-Success","toId":"ecbd228c-8cc4-f9ee-0e74-a4f2105b4a37","toProperty":"sendEvent"},{"fromId":"dc1fd604-4510-d3a3-4d7b-8af141fb72b9","fromProperty":"out-Failure","toId":"9e3363f1-6fa9-cc32-f20a-f465215c885d","toProperty":"Do"},{"fromId":"9e3363f1-6fa9-cc32-f20a-f465215c885d","fromProperty":"Success","toId":"ac7efe58-5065-3b9d-11d4-1e4d5a4955ae","toProperty":"Failure"},{"fromId":"9e3363f1-6fa9-cc32-f20a-f465215c885d","fromProperty":"Failure","toId":"ac7efe58-5065-3b9d-11d4-1e4d5a4955ae","toProperty":"Failure"}],"roots":[{"id":"cd548b2a-936b-722d-e908-d3f149320b4c","type":"Component Inputs","x":-224,"y":-12,"parameters":{},"ports":[{"name":"Do","plug":"output","type":"*","index":0},{"name":"data","plug":"output","type":{"name":"*"},"index":1}],"dynamicports":[],"children":[]},{"id":"ac7efe58-5065-3b9d-11d4-1e4d5a4955ae","type":"Component Outputs","x":533,"y":-14,"parameters":{},"ports":[{"name":"Success","plug":"input","type":"*","index":0},{"name":"Failure","plug":"input","type":"*","index":1},{"name":"error","plug":"input","type":{"name":"*"},"index":2}],"dynamicports":[],"children":[]},{"id":"dc1fd604-4510-d3a3-4d7b-8af141fb72b9","type":"JavaScriptFunction","x":23.200000000000045,"y":-12.099998474121094,"parameters":{"functionScript":"const client = Noodl.Objects.DirectusSDK.Client ?? null;\r\n\r\nconst data = Inputs.data || {};\r\n\r\nconst main = async function () {\r\n    try {\r\n        const result = await client.request(Directus.updateMe(data));\r\n\r\n        Noodl.Objects[\"Current User\"] = result;\r\n\r\n        if(result?.avatar){\r\n            const token = await client.getToken();\r\n            Noodl.Objects[\"Current User\"].avatar = Noodl.Objects.DirectusSDK.Client.url.origin + \"/assets/\" + result.avatar + \"?access_token=\" + token ?? null;\r\n        }\r\n\r\n        Outputs.Success();\r\n        \r\n    } catch (err) {\r\n        console.error(err);\r\n        \r\n        Noodl.Objects[\"Current User\"].authenticated = false;\r\n\r\n        Outputs.error = err?.errors.map(i => i.message ).join(\"\\n\");\r\n        Outputs.Failure();\r\n    }\r\n}\r\n\r\nmain();\r\n"},"ports":[],"dynamicports":[{"name":"in-data","displayName":"data","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":5},{"name":"out-Failure","displayName":"Failure","plug":"output","type":"signal","group":"Outputs","index":6},{"name":"out-error","displayName":"error","plug":"output","type":"*","group":"Outputs","index":7}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"ecbd228c-8cc4-f9ee-0e74-a4f2105b4a37","type":"Event Sender","x":279.6531553094667,"y":-150.77754756471768,"parameters":{"channelName":"User-Updated"},"ports":[],"dynamicports":[],"children":[]},{"id":"9e3363f1-6fa9-cc32-f20a-f465215c885d","type":"/#Directus/Directus Prefab/Components/User/Directus - Get Current User","x":293.8132888273666,"y":111.18061501616921,"parameters":{},"ports":[],"dynamicports":[],"children":[]}],"visualRoots":[]}},{"name":"/#Directus/Directus Prefab/Components/Utils - Query Parameters/Directus - Query parameters (for Create)","id":"6893a66f-4c09-62f3-fd20-58fa9d3caa16","graph":{"connections":[{"fromId":"21cf8da3-51fe-cc37-6abc-d9e7c9bac228","fromProperty":"Search","toId":"c6536e7c-86bc-1955-b85f-7cbda1eea523","toProperty":"value"},{"fromId":"21cf8da3-51fe-cc37-6abc-d9e7c9bac228","fromProperty":"filter","toId":"32a83709-5c3c-ce09-dcdc-42e63a796c4a","toProperty":"in-filter"},{"fromId":"21cf8da3-51fe-cc37-6abc-d9e7c9bac228","fromProperty":"aggregate","toId":"32a83709-5c3c-ce09-dcdc-42e63a796c4a","toProperty":"in-aggregate"},{"fromId":"21cf8da3-51fe-cc37-6abc-d9e7c9bac228","fromProperty":"alias","toId":"32a83709-5c3c-ce09-dcdc-42e63a796c4a","toProperty":"in-alias"},{"fromId":"21cf8da3-51fe-cc37-6abc-d9e7c9bac228","fromProperty":"deep","toId":"32a83709-5c3c-ce09-dcdc-42e63a796c4a","toProperty":"in-deep"},{"fromId":"21cf8da3-51fe-cc37-6abc-d9e7c9bac228","fromProperty":"groupBy","toId":"32a83709-5c3c-ce09-dcdc-42e63a796c4a","toProperty":"in-groupBy"},{"fromId":"21cf8da3-51fe-cc37-6abc-d9e7c9bac228","fromProperty":"Page","toId":"0a41ca30-9a24-35e9-194e-99686cc7d9de","toProperty":"value"},{"fromId":"21cf8da3-51fe-cc37-6abc-d9e7c9bac228","fromProperty":"Offset","toId":"7d885ca1-78bd-f445-39b6-33b6d1b66522","toProperty":"value"},{"fromId":"21cf8da3-51fe-cc37-6abc-d9e7c9bac228","fromProperty":"Sort","toId":"9ec5095b-03d5-e542-08dc-b49823807fa6","toProperty":"value"},{"fromId":"21cf8da3-51fe-cc37-6abc-d9e7c9bac228","fromProperty":"Fields","toId":"111b4dd2-5ba6-4c00-3327-a7ded0cacab7","toProperty":"value"},{"fromId":"21cf8da3-51fe-cc37-6abc-d9e7c9bac228","fromProperty":"Get all fields","toId":"2ef749ae-5cad-d8f5-b954-075dbc924871","toProperty":"value"},{"fromId":"21cf8da3-51fe-cc37-6abc-d9e7c9bac228","fromProperty":"Limit","toId":"b26b4e86-42fa-677b-889c-d4d3f0a482b2","toProperty":"value"},{"fromId":"32a83709-5c3c-ce09-dcdc-42e63a796c4a","fromProperty":"out-filter","toId":"51ce5a76-3538-3d41-f806-8c4b6854e149","toProperty":"in-filter"},{"fromId":"32a83709-5c3c-ce09-dcdc-42e63a796c4a","fromProperty":"out-aggregate","toId":"51ce5a76-3538-3d41-f806-8c4b6854e149","toProperty":"in-aggregate"},{"fromId":"32a83709-5c3c-ce09-dcdc-42e63a796c4a","fromProperty":"out-groupBy","toId":"51ce5a76-3538-3d41-f806-8c4b6854e149","toProperty":"in-groupBy"},{"fromId":"32a83709-5c3c-ce09-dcdc-42e63a796c4a","fromProperty":"out-deep","toId":"51ce5a76-3538-3d41-f806-8c4b6854e149","toProperty":"in-deep"},{"fromId":"32a83709-5c3c-ce09-dcdc-42e63a796c4a","fromProperty":"out-alias","toId":"51ce5a76-3538-3d41-f806-8c4b6854e149","toProperty":"in-alias"},{"fromId":"9ec5095b-03d5-e542-08dc-b49823807fa6","fromProperty":"savedValue","toId":"51ce5a76-3538-3d41-f806-8c4b6854e149","toProperty":"in-sort"},{"fromId":"7d885ca1-78bd-f445-39b6-33b6d1b66522","fromProperty":"savedValue","toId":"51ce5a76-3538-3d41-f806-8c4b6854e149","toProperty":"in-offset"},{"fromId":"0a41ca30-9a24-35e9-194e-99686cc7d9de","fromProperty":"savedValue","toId":"51ce5a76-3538-3d41-f806-8c4b6854e149","toProperty":"in-page"},{"fromId":"c6536e7c-86bc-1955-b85f-7cbda1eea523","fromProperty":"savedValue","toId":"51ce5a76-3538-3d41-f806-8c4b6854e149","toProperty":"in-search"},{"fromId":"51ce5a76-3538-3d41-f806-8c4b6854e149","fromProperty":"out-query","toId":"ddabd70d-9542-5553-19d7-95bb22c6f309","toProperty":"query"},{"fromId":"d37a57a0-f653-b8df-cdee-dc37f40685a5","fromProperty":"out-limit","toId":"51ce5a76-3538-3d41-f806-8c4b6854e149","toProperty":"in-limit"},{"fromId":"b26b4e86-42fa-677b-889c-d4d3f0a482b2","fromProperty":"savedValue","toId":"d37a57a0-f653-b8df-cdee-dc37f40685a5","toProperty":"in-limit_raw"},{"fromId":"2ef749ae-5cad-d8f5-b954-075dbc924871","fromProperty":"savedValue","toId":"f7745710-82a6-3bc8-cbf1-9d2306aabab4","toProperty":"in-get_all_fields"},{"fromId":"111b4dd2-5ba6-4c00-3327-a7ded0cacab7","fromProperty":"savedValue","toId":"f7745710-82a6-3bc8-cbf1-9d2306aabab4","toProperty":"in-fields"},{"fromId":"f7745710-82a6-3bc8-cbf1-9d2306aabab4","fromProperty":"out-result","toId":"51ce5a76-3538-3d41-f806-8c4b6854e149","toProperty":"in-fields"}],"roots":[{"id":"c6536e7c-86bc-1955-b85f-7cbda1eea523","type":"String","label":"Search","x":2,"y":1054,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"32a83709-5c3c-ce09-dcdc-42e63a796c4a","type":"JavaScriptFunction","x":0,"y":1155,"parameters":{"functionScript":"const aggregate = Inputs.aggregate || null;\r\nconst groupBy = Inputs.groupBy || null;\r\nconst filter = Inputs.filter || null;\r\nconst deep = Inputs.deep || null;\r\nconst alias = Inputs.alias || null;\r\n\r\nif (aggregate) {\r\n    if (typeof (aggregate == \"object\")) {\r\n        Outputs.aggregate = aggregate;\r\n    } else {\r\n        throw new Error(\"Data provided for 'aggregate' needs to be of 'Object' type!\")\r\n    }\r\n}\r\n\r\nif (groupBy) {\r\n    if (typeof (groupBy == \"object\") && Array.isArray(groupBy)) {\r\n        Outputs.groupBy = groupBy;\r\n    } else {\r\n        throw new Error(\"Data provided for 'groupBy' needs to be of 'Array' type!\")\r\n    }\r\n}\r\n\r\nif (filter) {\r\n    if (typeof (filter == \"object\")) {\r\n        Outputs.filter = filter;\r\n    } else {\r\n        throw new Error(\"Data provided for 'filter' needs to be of 'Object' type!\")\r\n    }\r\n}\r\n\r\nif (deep) {\r\n    if (typeof (deep == \"object\")) {\r\n        Outputs.deep = deep;\r\n    } else {\r\n        throw new Error(\"Data provided for 'deep' needs to be of 'Object' type!\")\r\n    }\r\n}\r\n\r\nif (alias) {\r\n    if (typeof (alias == \"object\")) {\r\n        Outputs.alias = alias;\r\n    } else {\r\n        throw new Error(\"Data provided for 'alias' needs to be of 'Object' type!\")\r\n    }\r\n}"},"ports":[],"dynamicports":[{"name":"in-aggregate","displayName":"aggregate","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-groupBy","displayName":"groupBy","plug":"input","type":"*","group":"Inputs","index":5},{"name":"in-filter","displayName":"filter","plug":"input","type":"*","group":"Inputs","index":6},{"name":"in-deep","displayName":"deep","plug":"input","type":"*","group":"Inputs","index":7},{"name":"in-alias","displayName":"alias","plug":"input","type":"*","group":"Inputs","index":8},{"name":"out-aggregate","displayName":"aggregate","plug":"output","type":"*","group":"Outputs","index":9},{"name":"out-groupBy","displayName":"groupBy","plug":"output","type":"*","group":"Outputs","index":10},{"name":"out-filter","displayName":"filter","plug":"output","type":"*","group":"Outputs","index":11},{"name":"out-deep","displayName":"deep","plug":"output","type":"*","group":"Outputs","index":12},{"name":"out-alias","displayName":"alias","plug":"output","type":"*","group":"Outputs","index":13}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"0a41ca30-9a24-35e9-194e-99686cc7d9de","type":"Number","label":"Page","x":3,"y":953,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"7d885ca1-78bd-f445-39b6-33b6d1b66522","type":"Number","label":"Offset","x":4,"y":853,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"9ec5095b-03d5-e542-08dc-b49823807fa6","type":"String","label":"Sort","x":4,"y":756,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"111b4dd2-5ba6-4c00-3327-a7ded0cacab7","type":"String","label":"Fields","x":5,"y":658,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"2ef749ae-5cad-d8f5-b954-075dbc924871","type":"Boolean","label":"Get all fields","x":5,"y":563,"parameters":{"value":true},"ports":[],"dynamicports":[],"children":[]},{"id":"b26b4e86-42fa-677b-889c-d4d3f0a482b2","type":"Number","label":"Limit","x":8,"y":464,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"21cf8da3-51fe-cc37-6abc-d9e7c9bac228","type":"Component Inputs","x":-459.66425978928964,"y":675.3553739167942,"parameters":{},"ports":[{"name":"Search","plug":"output","type":{"name":"*"},"index":13},{"name":"filter","plug":"output","type":{"name":"*"},"index":16},{"name":"aggregate","plug":"output","type":{"name":"*"},"index":14},{"name":"alias","plug":"output","type":{"name":"*"},"index":18},{"name":"deep","plug":"output","type":{"name":"*"},"index":17},{"name":"groupBy","plug":"output","type":{"name":"*"},"index":15},{"name":"Page","plug":"output","type":{"name":"*"},"index":12},{"name":"Offset","plug":"output","type":{"name":"*"},"index":11},{"name":"Sort","plug":"output","type":{"name":"*"},"index":10},{"name":"Fields","plug":"output","type":{"name":"*"},"index":9},{"name":"Get all fields","plug":"output","type":{"name":"*"},"index":8},{"name":"Limit","plug":"output","type":{"name":"*"},"index":5},{"name":"Set","plug":"output","type":{"name":"*"},"index":0}],"dynamicports":[],"children":[]},{"id":"51ce5a76-3538-3d41-f806-8c4b6854e149","type":"JavaScriptFunction","x":726.2412815279195,"y":684.314172687856,"parameters":{"functionScript":"const limit = Inputs.limit;\r\nconst fields = Inputs.fields;\r\nconst filter = Inputs.filter ?? null;\r\nconst search = Inputs.search ?? null;\r\nconst sort = Inputs.sort ?? null;\r\nconst offset = Inputs.offset ?? null;\r\nconst page = Inputs.page ?? null;\r\nconst aggregate = Inputs.aggregate ?? null;\r\nconst groupBy = Inputs.groupBy ?? null;\r\nconst deep = Inputs.deep ?? null;\r\nconst alias = Inputs.alias ?? null;\r\n\r\nconst query = {};\r\n\r\nif (limit) query.limit = limit;\r\nif (filter) query.filter = filter;\r\nif (search) query.search = search;\r\nif (fields) query.fields = fields;\r\nif (sort) query.sort = sort;\r\nif (offset) query.offset = offset;\r\nif (page) query.page = page;\r\nif (aggregate) query.aggregate = aggregate;\r\nif (groupBy) query.groupBy = groupBy;\r\nif (deep) query.deep = deep;\r\nif (alias) query.alias = alias;\r\n\r\nOutputs.query = query;\r\nOutputs.Done();"},"ports":[],"dynamicports":[{"name":"in-limit","displayName":"limit","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-fields","displayName":"fields","plug":"input","type":"*","group":"Inputs","index":5},{"name":"in-filter","displayName":"filter","plug":"input","type":"*","group":"Inputs","index":6},{"name":"in-search","displayName":"search","plug":"input","type":"*","group":"Inputs","index":7},{"name":"in-sort","displayName":"sort","plug":"input","type":"*","group":"Inputs","index":8},{"name":"in-offset","displayName":"offset","plug":"input","type":"*","group":"Inputs","index":9},{"name":"in-page","displayName":"page","plug":"input","type":"*","group":"Inputs","index":10},{"name":"in-aggregate","displayName":"aggregate","plug":"input","type":"*","group":"Inputs","index":11},{"name":"in-groupBy","displayName":"groupBy","plug":"input","type":"*","group":"Inputs","index":12},{"name":"in-deep","displayName":"deep","plug":"input","type":"*","group":"Inputs","index":13},{"name":"in-alias","displayName":"alias","plug":"input","type":"*","group":"Inputs","index":14},{"name":"out-Done","displayName":"Done","plug":"output","type":"signal","group":"Outputs","index":15},{"name":"out-query","displayName":"query","plug":"output","type":"*","group":"Outputs","index":16}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"ddabd70d-9542-5553-19d7-95bb22c6f309","type":"Component Outputs","x":982.2849626492933,"y":685.439768508006,"parameters":{},"ports":[{"name":"query","plug":"input","type":{"name":"*"},"index":1}],"dynamicports":[],"children":[]},{"id":"d37a57a0-f653-b8df-cdee-dc37f40685a5","type":"JavaScriptFunction","x":370.48310590666244,"y":475.42144282220636,"parameters":{"functionScript":"const limit_raw = Inputs.limit_raw ?? null;\r\n\r\nif(limit_raw){\r\n    Outputs.limit = limit_raw > 0 ? limit_raw : 1;\r\n} else {\r\n    Outputs.limit = null;\r\n}"},"ports":[],"dynamicports":[{"name":"in-limit_raw","displayName":"limit_raw","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-limit","displayName":"limit","plug":"output","type":"*","group":"Outputs","index":5}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"f7745710-82a6-3bc8-cbf1-9d2306aabab4","type":"JavaScriptFunction","x":381.7202678994827,"y":604.1461691931453,"parameters":{"functionScript":"Outputs.result = (Inputs.get_all_fields ?? true) ? '*' : (Inputs.fields || '*');"},"ports":[],"dynamicports":[{"name":"in-get_all_fields","displayName":"get_all_fields","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-fields","displayName":"fields","plug":"input","type":"*","group":"Inputs","index":5},{"name":"out-result","displayName":"result","plug":"output","type":"*","group":"Outputs","index":6}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}}],"visualRoots":[]}},{"name":"/#Directus/Directus Prefab/Components/Utils - Query Parameters/Directus - Query parameters (for Delete)","id":"e6257264-1100-2fd9-e9ef-773c0d5f31ca","graph":{"connections":[{"fromId":"d272046a-dc97-3428-22a4-973559594ac9","fromProperty":"Search","toId":"f77e8d61-745f-5c45-ab2a-9411ef46f0a5","toProperty":"value"},{"fromId":"d272046a-dc97-3428-22a4-973559594ac9","fromProperty":"filter","toId":"d9dd31ed-5217-562a-f33f-ec804a520807","toProperty":"in-filter"},{"fromId":"d272046a-dc97-3428-22a4-973559594ac9","fromProperty":"deep","toId":"d9dd31ed-5217-562a-f33f-ec804a520807","toProperty":"in-deep"},{"fromId":"d272046a-dc97-3428-22a4-973559594ac9","fromProperty":"Page","toId":"5882c50b-cf41-8690-2671-53f53593f19d","toProperty":"value"},{"fromId":"d272046a-dc97-3428-22a4-973559594ac9","fromProperty":"Offset","toId":"ea31a823-a68d-b96b-5188-99488dcf4d97","toProperty":"value"},{"fromId":"d272046a-dc97-3428-22a4-973559594ac9","fromProperty":"Sort","toId":"87be07cb-8ae7-c7a3-bcc6-aade30ae096c","toProperty":"value"},{"fromId":"d272046a-dc97-3428-22a4-973559594ac9","fromProperty":"Limit","toId":"b5bb0d16-cd25-4da5-eaed-5268b0f6063c","toProperty":"value"},{"fromId":"d9dd31ed-5217-562a-f33f-ec804a520807","fromProperty":"out-filter","toId":"6a7ac1e0-1de5-a00e-6eed-544ac855640d","toProperty":"in-filter"},{"fromId":"d9dd31ed-5217-562a-f33f-ec804a520807","fromProperty":"out-deep","toId":"6a7ac1e0-1de5-a00e-6eed-544ac855640d","toProperty":"in-deep"},{"fromId":"87be07cb-8ae7-c7a3-bcc6-aade30ae096c","fromProperty":"savedValue","toId":"6a7ac1e0-1de5-a00e-6eed-544ac855640d","toProperty":"in-sort"},{"fromId":"f77e8d61-745f-5c45-ab2a-9411ef46f0a5","fromProperty":"savedValue","toId":"6a7ac1e0-1de5-a00e-6eed-544ac855640d","toProperty":"in-search"},{"fromId":"6a7ac1e0-1de5-a00e-6eed-544ac855640d","fromProperty":"out-query","toId":"6b579d65-afe1-4ead-e2e9-78278d5ca03c","toProperty":"query"},{"fromId":"ea31a823-a68d-b96b-5188-99488dcf4d97","fromProperty":"savedValue","toId":"7c2781fb-9256-e6a3-cb1f-f38aec0b2ab9","toProperty":"in-value"},{"fromId":"7c2781fb-9256-e6a3-cb1f-f38aec0b2ab9","fromProperty":"out-result","toId":"6a7ac1e0-1de5-a00e-6eed-544ac855640d","toProperty":"in-offset"},{"fromId":"5882c50b-cf41-8690-2671-53f53593f19d","fromProperty":"savedValue","toId":"484cffe0-c0bf-ec40-334b-96e91ed927cd","toProperty":"in-value"},{"fromId":"484cffe0-c0bf-ec40-334b-96e91ed927cd","fromProperty":"out-result","toId":"6a7ac1e0-1de5-a00e-6eed-544ac855640d","toProperty":"in-page"},{"fromId":"b5bb0d16-cd25-4da5-eaed-5268b0f6063c","fromProperty":"savedValue","toId":"b7f3d28c-c18e-6a57-a7a8-f0e5cf945b57","toProperty":"in-limit_raw"},{"fromId":"d272046a-dc97-3428-22a4-973559594ac9","fromProperty":"Item ID","toId":"b7f3d28c-c18e-6a57-a7a8-f0e5cf945b57","toProperty":"in-item_id"},{"fromId":"d272046a-dc97-3428-22a4-973559594ac9","fromProperty":"Delete Type","toId":"b7f3d28c-c18e-6a57-a7a8-f0e5cf945b57","toProperty":"in-delete_type"},{"fromId":"b7f3d28c-c18e-6a57-a7a8-f0e5cf945b57","fromProperty":"out-operation","toId":"6b579d65-afe1-4ead-e2e9-78278d5ca03c","toProperty":"operation"},{"fromId":"b7f3d28c-c18e-6a57-a7a8-f0e5cf945b57","fromProperty":"out-limit","toId":"6a7ac1e0-1de5-a00e-6eed-544ac855640d","toProperty":"in-limit"},{"fromId":"d272046a-dc97-3428-22a4-973559594ac9","fromProperty":"Item IDs Array","toId":"b7f3d28c-c18e-6a57-a7a8-f0e5cf945b57","toProperty":"in-item_id_array"},{"fromId":"b7f3d28c-c18e-6a57-a7a8-f0e5cf945b57","fromProperty":"out-itemID","toId":"6b579d65-afe1-4ead-e2e9-78278d5ca03c","toProperty":"itemID"},{"fromId":"d272046a-dc97-3428-22a4-973559594ac9","fromProperty":"Do","toId":"b7f3d28c-c18e-6a57-a7a8-f0e5cf945b57","toProperty":"run"}],"roots":[{"id":"f77e8d61-745f-5c45-ab2a-9411ef46f0a5","type":"String","label":"Search","x":-184,"y":1052,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"d9dd31ed-5217-562a-f33f-ec804a520807","type":"JavaScriptFunction","x":-186,"y":1153,"parameters":{"functionScript":"const filter = Inputs.filter || null;\r\nconst deep = Inputs.deep || null;\r\n\r\nif (filter) {\r\n    if (typeof (filter == \"object\")) {\r\n        Outputs.filter = filter;\r\n    } else {\r\n        throw new Error(\"Data provided for 'filter' needs to be of 'Object' type!\")\r\n    }\r\n}\r\n\r\nif (deep) {\r\n    if (typeof (deep == \"object\")) {\r\n        Outputs.deep = deep;\r\n    } else {\r\n        throw new Error(\"Data provided for 'deep' needs to be of 'Object' type!\")\r\n    }\r\n}"},"ports":[],"dynamicports":[{"name":"in-filter","displayName":"filter","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-deep","displayName":"deep","plug":"input","type":"*","group":"Inputs","index":5},{"name":"out-filter","displayName":"filter","plug":"output","type":"*","group":"Outputs","index":6},{"name":"out-deep","displayName":"deep","plug":"output","type":"*","group":"Outputs","index":7}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"5882c50b-cf41-8690-2671-53f53593f19d","type":"Number","label":"Page","x":-184,"y":952,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"ea31a823-a68d-b96b-5188-99488dcf4d97","type":"Number","label":"Offset","x":-182,"y":851,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"87be07cb-8ae7-c7a3-bcc6-aade30ae096c","type":"String","label":"Sort","x":-182,"y":754,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"b5bb0d16-cd25-4da5-eaed-5268b0f6063c","type":"Number","label":"Limit","x":-182.31578947368416,"y":652.3684210526316,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"d272046a-dc97-3428-22a4-973559594ac9","type":"Component Inputs","x":-674.2958387366577,"y":514.9869528641626,"parameters":{},"ports":[{"name":"Search","plug":"output","type":{"name":"*"},"index":10},{"name":"filter","plug":"output","type":{"name":"*"},"index":13},{"name":"deep","plug":"output","type":{"name":"*"},"index":14},{"name":"Page","plug":"output","type":{"name":"*"},"index":9},{"name":"Offset","plug":"output","type":{"name":"*"},"index":8},{"name":"Sort","plug":"output","type":{"name":"*"},"index":7},{"name":"Fields","plug":"output","type":{"name":"*"},"index":6},{"name":"Get all fields","plug":"output","type":{"name":"*"},"index":5},{"name":"Limit","plug":"output","type":{"name":"*"},"index":4},{"name":"Delete Type","plug":"output","type":{"name":"*"},"index":1},{"name":"Item ID","plug":"output","type":{"name":"*"},"index":2},{"name":"Item IDs Array","plug":"output","type":{"name":"*"},"index":3},{"name":"Do","plug":"output","type":{"name":"*"},"index":0}],"dynamicports":[],"children":[]},{"id":"6a7ac1e0-1de5-a00e-6eed-544ac855640d","type":"JavaScriptFunction","x":431.5570710016035,"y":845.0510147931192,"parameters":{"functionScript":"const limit = Inputs.limit;\r\nconst fields = Inputs.fields;\r\nconst filter = Inputs.filter ?? null;\r\nconst search = Inputs.search ?? null;\r\nconst sort = Inputs.sort ?? null;\r\nconst offset = Inputs.offset ?? null;\r\nconst page = Inputs.page ?? null;\r\nconst deep = Inputs.deep ?? null;\r\n\r\nconst query = {};\r\n\r\nif (limit) query.limit = limit;\r\nif (filter) query.filter = filter;\r\nif (search) query.search = search;\r\nif (fields) query.fields = fields;\r\nif (sort) query.sort = sort;\r\nif (offset) query.offset = offset;\r\nif (page) query.page = page;\r\nif (deep) query.deep = deep;\r\n\r\nOutputs.query = query;"},"ports":[],"dynamicports":[{"name":"in-limit","displayName":"limit","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-fields","displayName":"fields","plug":"input","type":"*","group":"Inputs","index":5},{"name":"in-filter","displayName":"filter","plug":"input","type":"*","group":"Inputs","index":6},{"name":"in-search","displayName":"search","plug":"input","type":"*","group":"Inputs","index":7},{"name":"in-sort","displayName":"sort","plug":"input","type":"*","group":"Inputs","index":8},{"name":"in-offset","displayName":"offset","plug":"input","type":"*","group":"Inputs","index":9},{"name":"in-page","displayName":"page","plug":"input","type":"*","group":"Inputs","index":10},{"name":"in-deep","displayName":"deep","plug":"input","type":"*","group":"Inputs","index":11},{"name":"out-query","displayName":"query","plug":"output","type":"*","group":"Outputs","index":12}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"6b579d65-afe1-4ead-e2e9-78278d5ca03c","type":"Component Outputs","x":740.390225807188,"y":759.597663244848,"parameters":{},"ports":[{"name":"query","plug":"input","type":{"name":"*"},"index":1},{"name":"operation","plug":"input","type":{"name":"*"},"index":2},{"name":"itemID","plug":"input","type":{"name":"*"},"index":3}],"dynamicports":[],"children":[]},{"id":"484cffe0-c0bf-ec40-334b-96e91ed927cd","type":"JavaScriptFunction","x":94,"y":967,"parameters":{"functionScript":"const value = Inputs.value ?? null;\r\nif(value && value > 0) Outputs.result = value\r\nelse Outputs.result = null;"},"ports":[],"dynamicports":[{"name":"in-value","displayName":"value","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-result","displayName":"result","plug":"output","type":"*","group":"Outputs","index":5}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"7c2781fb-9256-e6a3-cb1f-f38aec0b2ab9","type":"JavaScriptFunction","x":98,"y":862,"parameters":{"functionScript":"const value = Inputs.value ?? null;\r\nif(value && value > 0) Outputs.result = value\r\nelse Outputs.result = null;"},"ports":[],"dynamicports":[{"name":"in-value","displayName":"value","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-result","displayName":"result","plug":"output","type":"*","group":"Outputs","index":5}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"b7f3d28c-c18e-6a57-a7a8-f0e5cf945b57","type":"JavaScriptFunction","x":94,"y":513,"parameters":{"functionScript":"const delete_type = Inputs.delete_type ?? null;\r\nconst item_id = Inputs.item_id ?? null;\r\nconst item_ids = Inputs.item_id_array ?? null;\r\nconst limit_raw = Inputs.limit_raw ?? null;\r\n\r\nlet operation = null;\r\nlet limit = null;\r\nlet itemID = null;\r\nlet itemIDArray = [];\r\n\r\n///////////////////////////////////\r\n\r\nif (delete_type) {\r\n    if (delete_type == \"Delete Single by ID\") {\r\n        if (item_id) {\r\n            operation = \"single\";\r\n            itemID = item_id;\r\n        } else {\r\n            throw new Error(\"Provide valid Item ID\");\r\n        }\r\n    } else if (delete_type == \"Delete Multiple by Filter\") {\r\n\r\n        if(limit_raw){\r\n            if(limit_raw <= 0){\r\n                limit = 1\r\n            } else {\r\n                limit = limit_raw;\r\n            }\r\n        }\r\n        operation = \"multiple\";\r\n\r\n    } else if (delete_type == \"Delete All\") {\r\n\r\n        limit = -1;\r\n        operation = \"all\";\r\n\r\n    } else {\r\n        operation = null;\r\n    }\r\n    \r\n    Outputs.operation = operation;\r\n    Outputs.itemID = itemID;\r\n    Outputs.limit = limit;\r\n    Outputs.Done();\r\n}\r\n"},"ports":[],"dynamicports":[{"name":"in-delete_type","displayName":"delete_type","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-item_id","displayName":"item_id","plug":"input","type":"*","group":"Inputs","index":5},{"name":"in-item_id_array","displayName":"item_id_array","plug":"input","type":"*","group":"Inputs","index":6},{"name":"in-limit_raw","displayName":"limit_raw","plug":"input","type":"*","group":"Inputs","index":7},{"name":"out-Done","displayName":"Done","plug":"output","type":"signal","group":"Outputs","index":8},{"name":"out-operation","displayName":"operation","plug":"output","type":"*","group":"Outputs","index":9},{"name":"out-itemID","displayName":"itemID","plug":"output","type":"*","group":"Outputs","index":10},{"name":"out-limit","displayName":"limit","plug":"output","type":"*","group":"Outputs","index":11}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}}],"visualRoots":[]}},{"name":"/#Directus/Directus Prefab/Components/Utils - Query Parameters/Directus - Query parameters (for File Download)","id":"acb14388-a364-8cab-b651-39ea6256a092","graph":{"connections":[{"fromId":"f3174bbf-4061-e134-2c85-b7d9fc7cf7d2","fromProperty":"out-query","toId":"23b933d2-b504-5cdd-7f68-b3755df4d5e2","toProperty":"query"},{"fromId":"c4931d12-be0e-81be-59a5-ded0a04e105a","fromProperty":"fit","toId":"01dadbda-8a0f-9702-a1fa-d7820dc6f182","toProperty":"value"},{"fromId":"c4931d12-be0e-81be-59a5-ded0a04e105a","fromProperty":"width","toId":"661ad9e9-fc0f-d90f-5f8a-257864049f1f","toProperty":"value"},{"fromId":"c4931d12-be0e-81be-59a5-ded0a04e105a","fromProperty":"height","toId":"e94632e1-15d7-d7d9-44ea-2bc497eb3a13","toProperty":"value"},{"fromId":"c4931d12-be0e-81be-59a5-ded0a04e105a","fromProperty":"quality","toId":"cd8f9bef-17a9-0e36-fa6b-ed73b71ffba3","toProperty":"value"},{"fromId":"c4931d12-be0e-81be-59a5-ded0a04e105a","fromProperty":"withoutEnlargement","toId":"064b2232-1269-49d2-b064-f3922ba36894","toProperty":"value"},{"fromId":"c4931d12-be0e-81be-59a5-ded0a04e105a","fromProperty":"format","toId":"7aa9f8b4-da45-521d-fe87-a108c3128c9d","toProperty":"value"},{"fromId":"01dadbda-8a0f-9702-a1fa-d7820dc6f182","fromProperty":"savedValue","toId":"f3174bbf-4061-e134-2c85-b7d9fc7cf7d2","toProperty":"in-fit"},{"fromId":"661ad9e9-fc0f-d90f-5f8a-257864049f1f","fromProperty":"savedValue","toId":"f3174bbf-4061-e134-2c85-b7d9fc7cf7d2","toProperty":"in-width"},{"fromId":"e94632e1-15d7-d7d9-44ea-2bc497eb3a13","fromProperty":"savedValue","toId":"f3174bbf-4061-e134-2c85-b7d9fc7cf7d2","toProperty":"in-height"},{"fromId":"cd8f9bef-17a9-0e36-fa6b-ed73b71ffba3","fromProperty":"savedValue","toId":"f3174bbf-4061-e134-2c85-b7d9fc7cf7d2","toProperty":"in-quality"},{"fromId":"064b2232-1269-49d2-b064-f3922ba36894","fromProperty":"savedValue","toId":"f3174bbf-4061-e134-2c85-b7d9fc7cf7d2","toProperty":"in-withoutEnlargement"},{"fromId":"7aa9f8b4-da45-521d-fe87-a108c3128c9d","fromProperty":"savedValue","toId":"f3174bbf-4061-e134-2c85-b7d9fc7cf7d2","toProperty":"in-format"},{"fromId":"c4931d12-be0e-81be-59a5-ded0a04e105a","fromProperty":"Set","toId":"f3174bbf-4061-e134-2c85-b7d9fc7cf7d2","toProperty":"run"},{"fromId":"f3174bbf-4061-e134-2c85-b7d9fc7cf7d2","fromProperty":"out-Done","toId":"23b933d2-b504-5cdd-7f68-b3755df4d5e2","toProperty":"Done"}],"roots":[{"id":"c4931d12-be0e-81be-59a5-ded0a04e105a","type":"Component Inputs","x":-60.664259789289645,"y":637.3553739167942,"parameters":{},"ports":[{"name":"Set","plug":"output","type":{"name":"*"},"index":0},{"name":"fit","plug":"output","type":{"name":"*"},"index":19},{"name":"width","plug":"output","type":{"name":"*"},"index":20},{"name":"height","plug":"output","type":{"name":"*"},"index":21},{"name":"quality","plug":"output","type":{"name":"*"},"index":22},{"name":"withoutEnlargement","plug":"output","type":{"name":"*"},"index":23},{"name":"format","plug":"output","type":{"name":"*"},"index":24}],"dynamicports":[],"children":[]},{"id":"f3174bbf-4061-e134-2c85-b7d9fc7cf7d2","type":"JavaScriptFunction","x":611.2412815279195,"y":660.314172687856,"parameters":{"functionScript":"const fit = Inputs.fit || null;\r\nconst width = Inputs.width || null;\r\nconst height = Inputs.height || null;\r\nconst quality = Inputs.quality || null;\r\nconst withoutEnlargement = Inputs.withoutEnlargement ?? null;\r\nconst format = Inputs.format || null;\r\n\r\nconst query = {};\r\n\r\nif (fit) query.fit = fit;\r\nif (width) query.width = width;\r\nif (height) query.height = height;\r\nif (quality) query.quality = quality;\r\nif (withoutEnlargement) query.withoutEnlargement = withoutEnlargement;\r\nif (format) query.format = format;\r\n\r\nOutputs.query = query;\r\nOutputs.Done();"},"ports":[],"dynamicports":[{"name":"in-fit","displayName":"fit","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-width","displayName":"width","plug":"input","type":"*","group":"Inputs","index":5},{"name":"in-height","displayName":"height","plug":"input","type":"*","group":"Inputs","index":6},{"name":"in-quality","displayName":"quality","plug":"input","type":"*","group":"Inputs","index":7},{"name":"in-withoutEnlargement","displayName":"withoutEnlargement","plug":"input","type":"*","group":"Inputs","index":8},{"name":"in-format","displayName":"format","plug":"input","type":"*","group":"Inputs","index":9},{"name":"out-Done","displayName":"Done","plug":"output","type":"signal","group":"Outputs","index":10},{"name":"out-query","displayName":"query","plug":"output","type":"*","group":"Outputs","index":11}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"23b933d2-b504-5cdd-7f68-b3755df4d5e2","type":"Component Outputs","x":855.2849626492932,"y":757.439768508006,"parameters":{},"ports":[{"name":"query","plug":"input","type":{"name":"*"},"index":1},{"name":"operation","plug":"input","type":{"name":"*"},"index":2},{"name":"itemID","plug":"input","type":{"name":"*"},"index":3},{"name":"Done","plug":"input","type":{"name":"*"},"index":4}],"dynamicports":[],"children":[]},{"id":"01dadbda-8a0f-9702-a1fa-d7820dc6f182","type":"String","label":"fit","x":257.71246033753255,"y":481.5622565345449,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"661ad9e9-fc0f-d90f-5f8a-257864049f1f","type":"Number","label":"width","x":258.71246033753255,"y":577.5622565345449,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"cd8f9bef-17a9-0e36-fa6b-ed73b71ffba3","type":"Number","label":"quality","x":259,"y":771,"parameters":{"value":100},"ports":[],"dynamicports":[],"children":[]},{"id":"e94632e1-15d7-d7d9-44ea-2bc497eb3a13","type":"Number","label":"height","x":259,"y":674,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"7aa9f8b4-da45-521d-fe87-a108c3128c9d","type":"String","label":"format","x":258,"y":962,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"064b2232-1269-49d2-b064-f3922ba36894","type":"Boolean","label":"withoutEnlargement","x":259.3478175104979,"y":866.4389728895031,"parameters":{},"ports":[],"dynamicports":[],"children":[]}],"visualRoots":[]}},{"name":"/#Directus/Directus Prefab/Components/Utils - Query Parameters/Directus - Query parameters (for Read)","id":"92987bc6-b326-8cc8-9534-e2230dfc4703","graph":{"connections":[{"fromId":"8e9b2fa5-08aa-678e-760c-a159d2f11198","fromProperty":"Search","toId":"a01b1da0-a8c7-e61c-8e21-f3b334c74206","toProperty":"value"},{"fromId":"8e9b2fa5-08aa-678e-760c-a159d2f11198","fromProperty":"filter","toId":"5d93faca-b7db-0736-32c9-a03d24382d72","toProperty":"in-filter"},{"fromId":"8e9b2fa5-08aa-678e-760c-a159d2f11198","fromProperty":"aggregate","toId":"5d93faca-b7db-0736-32c9-a03d24382d72","toProperty":"in-aggregate"},{"fromId":"8e9b2fa5-08aa-678e-760c-a159d2f11198","fromProperty":"alias","toId":"5d93faca-b7db-0736-32c9-a03d24382d72","toProperty":"in-alias"},{"fromId":"8e9b2fa5-08aa-678e-760c-a159d2f11198","fromProperty":"deep","toId":"5d93faca-b7db-0736-32c9-a03d24382d72","toProperty":"in-deep"},{"fromId":"8e9b2fa5-08aa-678e-760c-a159d2f11198","fromProperty":"groupBy","toId":"5d93faca-b7db-0736-32c9-a03d24382d72","toProperty":"in-groupBy"},{"fromId":"8e9b2fa5-08aa-678e-760c-a159d2f11198","fromProperty":"Page","toId":"441477b6-3f4a-356c-c447-3f66befd72c3","toProperty":"value"},{"fromId":"8e9b2fa5-08aa-678e-760c-a159d2f11198","fromProperty":"Offset","toId":"573a1e31-72b2-d13c-cdb9-a4f392e0d903","toProperty":"value"},{"fromId":"8e9b2fa5-08aa-678e-760c-a159d2f11198","fromProperty":"Sort","toId":"3f919a18-8a85-5010-1ab9-48ed583dbdb2","toProperty":"value"},{"fromId":"8e9b2fa5-08aa-678e-760c-a159d2f11198","fromProperty":"Fields","toId":"0075ddf7-111c-85c1-8475-79170096b44c","toProperty":"value"},{"fromId":"8e9b2fa5-08aa-678e-760c-a159d2f11198","fromProperty":"Get all fields","toId":"db026b1c-96d4-bf5c-aea6-2daa03e3f852","toProperty":"value"},{"fromId":"8e9b2fa5-08aa-678e-760c-a159d2f11198","fromProperty":"Limit","toId":"597edf7a-87f0-7669-44c8-5d65bc76d00b","toProperty":"value"},{"fromId":"5d93faca-b7db-0736-32c9-a03d24382d72","fromProperty":"out-filter","toId":"c95aaa75-e30f-bf7e-0792-09778792006e","toProperty":"in-filter"},{"fromId":"5d93faca-b7db-0736-32c9-a03d24382d72","fromProperty":"out-aggregate","toId":"c95aaa75-e30f-bf7e-0792-09778792006e","toProperty":"in-aggregate"},{"fromId":"5d93faca-b7db-0736-32c9-a03d24382d72","fromProperty":"out-groupBy","toId":"c95aaa75-e30f-bf7e-0792-09778792006e","toProperty":"in-groupBy"},{"fromId":"5d93faca-b7db-0736-32c9-a03d24382d72","fromProperty":"out-deep","toId":"c95aaa75-e30f-bf7e-0792-09778792006e","toProperty":"in-deep"},{"fromId":"5d93faca-b7db-0736-32c9-a03d24382d72","fromProperty":"out-alias","toId":"c95aaa75-e30f-bf7e-0792-09778792006e","toProperty":"in-alias"},{"fromId":"3f919a18-8a85-5010-1ab9-48ed583dbdb2","fromProperty":"savedValue","toId":"c95aaa75-e30f-bf7e-0792-09778792006e","toProperty":"in-sort"},{"fromId":"573a1e31-72b2-d13c-cdb9-a4f392e0d903","fromProperty":"savedValue","toId":"c95aaa75-e30f-bf7e-0792-09778792006e","toProperty":"in-offset"},{"fromId":"441477b6-3f4a-356c-c447-3f66befd72c3","fromProperty":"savedValue","toId":"c95aaa75-e30f-bf7e-0792-09778792006e","toProperty":"in-page"},{"fromId":"a01b1da0-a8c7-e61c-8e21-f3b334c74206","fromProperty":"savedValue","toId":"c95aaa75-e30f-bf7e-0792-09778792006e","toProperty":"in-search"},{"fromId":"c95aaa75-e30f-bf7e-0792-09778792006e","fromProperty":"out-query","toId":"125b15f1-9122-4f6e-19c4-8b3e51cb96ae","toProperty":"query"},{"fromId":"b9104547-da24-835a-8e6c-5169721dd91d","fromProperty":"out-itemID","toId":"125b15f1-9122-4f6e-19c4-8b3e51cb96ae","toProperty":"itemID"},{"fromId":"8e9b2fa5-08aa-678e-760c-a159d2f11198","fromProperty":"Set","toId":"b9104547-da24-835a-8e6c-5169721dd91d","toProperty":"run"},{"fromId":"8e9b2fa5-08aa-678e-760c-a159d2f11198","fromProperty":"Get Type","toId":"b9104547-da24-835a-8e6c-5169721dd91d","toProperty":"in-get_type"},{"fromId":"597edf7a-87f0-7669-44c8-5d65bc76d00b","fromProperty":"savedValue","toId":"b9104547-da24-835a-8e6c-5169721dd91d","toProperty":"in-limit_raw"},{"fromId":"b9104547-da24-835a-8e6c-5169721dd91d","fromProperty":"out-limit","toId":"c95aaa75-e30f-bf7e-0792-09778792006e","toProperty":"in-limit"},{"fromId":"b9104547-da24-835a-8e6c-5169721dd91d","fromProperty":"out-operation","toId":"125b15f1-9122-4f6e-19c4-8b3e51cb96ae","toProperty":"operation"},{"fromId":"db026b1c-96d4-bf5c-aea6-2daa03e3f852","fromProperty":"savedValue","toId":"a184788e-0920-52bf-7103-8397dc65d146","toProperty":"in-get_all_fields"},{"fromId":"0075ddf7-111c-85c1-8475-79170096b44c","fromProperty":"savedValue","toId":"a184788e-0920-52bf-7103-8397dc65d146","toProperty":"in-fields"},{"fromId":"a184788e-0920-52bf-7103-8397dc65d146","fromProperty":"out-result","toId":"c95aaa75-e30f-bf7e-0792-09778792006e","toProperty":"in-fields"},{"fromId":"8e9b2fa5-08aa-678e-760c-a159d2f11198","fromProperty":"Item ID","toId":"b9104547-da24-835a-8e6c-5169721dd91d","toProperty":"in-item_id"}],"roots":[{"id":"a01b1da0-a8c7-e61c-8e21-f3b334c74206","type":"String","label":"Search","x":2,"y":1054,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"5d93faca-b7db-0736-32c9-a03d24382d72","type":"JavaScriptFunction","x":0,"y":1155,"parameters":{"functionScript":"const aggregate = Inputs.aggregate || null;\r\nconst groupBy = Inputs.groupBy || null;\r\nconst filter = Inputs.filter || null;\r\nconst deep = Inputs.deep || null;\r\nconst alias = Inputs.alias || null;\r\n\r\nif (aggregate) {\r\n    if (typeof (aggregate == \"object\")) {\r\n        Outputs.aggregate = aggregate;\r\n    } else {\r\n        throw new Error(\"Data provided for 'aggregate' needs to be of 'Object' type!\")\r\n    }\r\n}\r\n\r\nif (groupBy) {\r\n    if (typeof (groupBy == \"object\") && Array.isArray(groupBy)) {\r\n        Outputs.groupBy = groupBy;\r\n    } else {\r\n        throw new Error(\"Data provided for 'groupBy' needs to be of 'Array' type!\")\r\n    }\r\n}\r\n\r\nif (filter) {\r\n    if (typeof (filter == \"object\")) {\r\n        Outputs.filter = filter;\r\n    } else {\r\n        throw new Error(\"Data provided for 'filter' needs to be of 'Object' type!\")\r\n    }\r\n}\r\n\r\nif (deep) {\r\n    if (typeof (deep == \"object\")) {\r\n        Outputs.deep = deep;\r\n    } else {\r\n        throw new Error(\"Data provided for 'deep' needs to be of 'Object' type!\")\r\n    }\r\n}\r\n\r\nif (alias) {\r\n    if (typeof (alias == \"object\")) {\r\n        Outputs.alias = alias;\r\n    } else {\r\n        throw new Error(\"Data provided for 'alias' needs to be of 'Object' type!\")\r\n    }\r\n}"},"ports":[],"dynamicports":[{"name":"in-aggregate","displayName":"aggregate","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-groupBy","displayName":"groupBy","plug":"input","type":"*","group":"Inputs","index":5},{"name":"in-filter","displayName":"filter","plug":"input","type":"*","group":"Inputs","index":6},{"name":"in-deep","displayName":"deep","plug":"input","type":"*","group":"Inputs","index":7},{"name":"in-alias","displayName":"alias","plug":"input","type":"*","group":"Inputs","index":8},{"name":"out-aggregate","displayName":"aggregate","plug":"output","type":"*","group":"Outputs","index":9},{"name":"out-groupBy","displayName":"groupBy","plug":"output","type":"*","group":"Outputs","index":10},{"name":"out-filter","displayName":"filter","plug":"output","type":"*","group":"Outputs","index":11},{"name":"out-deep","displayName":"deep","plug":"output","type":"*","group":"Outputs","index":12},{"name":"out-alias","displayName":"alias","plug":"output","type":"*","group":"Outputs","index":13}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"441477b6-3f4a-356c-c447-3f66befd72c3","type":"Number","label":"Page","x":3,"y":953,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"573a1e31-72b2-d13c-cdb9-a4f392e0d903","type":"Number","label":"Offset","x":4,"y":853,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"3f919a18-8a85-5010-1ab9-48ed583dbdb2","type":"String","label":"Sort","x":4,"y":756,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"0075ddf7-111c-85c1-8475-79170096b44c","type":"String","label":"Fields","x":5,"y":658,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"db026b1c-96d4-bf5c-aea6-2daa03e3f852","type":"Boolean","label":"Get all fields","x":5,"y":563,"parameters":{"value":true},"ports":[],"dynamicports":[],"children":[]},{"id":"b9104547-da24-835a-8e6c-5169721dd91d","type":"JavaScriptFunction","x":326,"y":336,"parameters":{"functionScript":"const get_type = Inputs.get_type ?? null;\r\nconst item_id = Inputs.item_id ?? null;\r\nconst limit_raw = Inputs.limit_raw ?? null;\r\n\r\nlet operation = null;\r\nlet limit = null;\r\nlet itemID = null;\r\n\r\n///////////////////////////////////\r\n\r\nif (get_type) {\r\n    if (get_type == \"Get Single by ID\" && item_id) {\r\n        if (item_id) {\r\n            operation = \"single\";\r\n            itemID = item_id;\r\n        } else {\r\n            throw new Error(\"Provide valid Item ID\");\r\n        }\r\n    } else if (get_type == \"Get Single by Filter\") {\r\n        operation = \"single\";\r\n    } else if (get_type == \"Get Multiple by Filter\" && limit_raw) {\r\n\r\n        if(limit_raw){\r\n            if(limit_raw < -1){\r\n                limit = 1\r\n            } else if(limit_raw == 0){\r\n                limit = 1\r\n            } else {\r\n                limit = limit_raw;\r\n            }\r\n        }\r\n        operation = \"multiple\";\r\n\r\n    } else if (get_type == \"Get All\") {\r\n\r\n        limit = -1;\r\n        operation = \"all\";\r\n\r\n    } else if (get_type == \"Get Singleton\") {\r\n        operation = \"singleton\";\r\n    } else {\r\n        operation = null;\r\n    }\r\n    \r\n    Outputs.operation = operation;\r\n    Outputs.limit = limit;\r\n    Outputs.itemID = itemID;\r\n}\r\n"},"ports":[],"dynamicports":[{"name":"in-get_type","displayName":"get_type","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-item_id","displayName":"item_id","plug":"input","type":"*","group":"Inputs","index":5},{"name":"in-limit_raw","displayName":"limit_raw","plug":"input","type":"*","group":"Inputs","index":6},{"name":"out-operation","displayName":"operation","plug":"output","type":"*","group":"Outputs","index":7},{"name":"out-limit","displayName":"limit","plug":"output","type":"*","group":"Outputs","index":8},{"name":"out-itemID","displayName":"itemID","plug":"output","type":"*","group":"Outputs","index":9}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"597edf7a-87f0-7669-44c8-5d65bc76d00b","type":"Number","label":"Limit","x":4,"y":459,"parameters":{"value":50},"ports":[],"dynamicports":[],"children":[]},{"id":"8e9b2fa5-08aa-678e-760c-a159d2f11198","type":"Component Inputs","x":-433.66425978928964,"y":335.3553739167942,"parameters":{},"ports":[{"name":"Search","plug":"output","type":{"name":"*"},"index":13},{"name":"Item ID","plug":"output","type":{"name":"*"},"index":3},{"name":"filter","plug":"output","type":{"name":"*"},"index":16},{"name":"aggregate","plug":"output","type":{"name":"*"},"index":14},{"name":"alias","plug":"output","type":{"name":"*"},"index":18},{"name":"deep","plug":"output","type":{"name":"*"},"index":17},{"name":"groupBy","plug":"output","type":{"name":"*"},"index":15},{"name":"Page","plug":"output","type":{"name":"*"},"index":12},{"name":"Offset","plug":"output","type":{"name":"*"},"index":11},{"name":"Sort","plug":"output","type":{"name":"*"},"index":10},{"name":"Fields","plug":"output","type":{"name":"*"},"index":9},{"name":"Get all fields","plug":"output","type":{"name":"*"},"index":8},{"name":"Limit","plug":"output","type":{"name":"*"},"index":5},{"name":"Set","plug":"output","type":{"name":"*"},"index":0},{"name":"Get Type","plug":"output","type":{"name":"*"},"index":1}],"dynamicports":[],"children":[]},{"id":"c95aaa75-e30f-bf7e-0792-09778792006e","type":"JavaScriptFunction","x":856.2412815279195,"y":597.314172687856,"parameters":{"functionScript":"const limit = Inputs.limit;\r\nconst fields = Inputs.fields;\r\nconst filter = Inputs.filter ?? null;\r\nconst search = Inputs.search ?? null;\r\nconst sort = Inputs.sort ?? null;\r\nconst offset = Inputs.offset ?? null;\r\nconst page = Inputs.page ?? null;\r\nconst aggregate = Inputs.aggregate ?? null;\r\nconst groupBy = Inputs.groupBy ?? null;\r\nconst deep = Inputs.deep ?? null;\r\nconst alias = Inputs.alias ?? null;\r\n\r\nconst query = {};\r\n\r\nif (limit) query.limit = limit;\r\nif (filter) query.filter = filter;\r\nif (search) query.search = search;\r\nif (fields) query.fields = fields;\r\nif (sort) query.sort = sort;\r\nif (offset) query.offset = offset;\r\nif (page) query.page = page;\r\nif (aggregate) query.aggregate = aggregate;\r\nif (groupBy) query.groupBy = groupBy;\r\nif (deep) query.deep = deep;\r\nif (alias) query.alias = alias;\r\n\r\nOutputs.query = query;\r\nOutputs.Done();"},"ports":[],"dynamicports":[{"name":"in-limit","displayName":"limit","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-fields","displayName":"fields","plug":"input","type":"*","group":"Inputs","index":5},{"name":"in-filter","displayName":"filter","plug":"input","type":"*","group":"Inputs","index":6},{"name":"in-search","displayName":"search","plug":"input","type":"*","group":"Inputs","index":7},{"name":"in-sort","displayName":"sort","plug":"input","type":"*","group":"Inputs","index":8},{"name":"in-offset","displayName":"offset","plug":"input","type":"*","group":"Inputs","index":9},{"name":"in-page","displayName":"page","plug":"input","type":"*","group":"Inputs","index":10},{"name":"in-aggregate","displayName":"aggregate","plug":"input","type":"*","group":"Inputs","index":11},{"name":"in-groupBy","displayName":"groupBy","plug":"input","type":"*","group":"Inputs","index":12},{"name":"in-deep","displayName":"deep","plug":"input","type":"*","group":"Inputs","index":13},{"name":"in-alias","displayName":"alias","plug":"input","type":"*","group":"Inputs","index":14},{"name":"out-Done","displayName":"Done","plug":"output","type":"signal","group":"Outputs","index":15},{"name":"out-query","displayName":"query","plug":"output","type":"*","group":"Outputs","index":16}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"125b15f1-9122-4f6e-19c4-8b3e51cb96ae","type":"Component Outputs","x":1138.2849626492932,"y":602.439768508006,"parameters":{},"ports":[{"name":"query","plug":"input","type":{"name":"*"},"index":1},{"name":"operation","plug":"input","type":{"name":"*"},"index":2},{"name":"itemID","plug":"input","type":{"name":"*"},"index":3}],"dynamicports":[],"children":[]},{"id":"a184788e-0920-52bf-7103-8397dc65d146","type":"JavaScriptFunction","x":325,"y":599,"parameters":{"functionScript":"Outputs.result = (Inputs.get_all_fields ?? true) ? '*' : (Inputs.fields || '*');"},"ports":[],"dynamicports":[{"name":"in-get_all_fields","displayName":"get_all_fields","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-fields","displayName":"fields","plug":"input","type":"*","group":"Inputs","index":5},{"name":"out-result","displayName":"result","plug":"output","type":"*","group":"Outputs","index":6}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}}],"visualRoots":[]}},{"name":"/#Directus/Directus Prefab/Components/Utils - Query Parameters/Directus - Query parameters (for Update)","id":"781c2b79-36fc-afcb-6890-4d3f020e772f","graph":{"connections":[{"fromId":"51fbbada-799c-d98b-ea1e-7b1239f208f1","fromProperty":"Search","toId":"629eefb2-ca41-2abb-4945-f25a183293d8","toProperty":"value"},{"fromId":"51fbbada-799c-d98b-ea1e-7b1239f208f1","fromProperty":"filter","toId":"7c880755-4a88-9613-1810-e28b72056f83","toProperty":"in-filter"},{"fromId":"51fbbada-799c-d98b-ea1e-7b1239f208f1","fromProperty":"aggregate","toId":"7c880755-4a88-9613-1810-e28b72056f83","toProperty":"in-aggregate"},{"fromId":"51fbbada-799c-d98b-ea1e-7b1239f208f1","fromProperty":"alias","toId":"7c880755-4a88-9613-1810-e28b72056f83","toProperty":"in-alias"},{"fromId":"51fbbada-799c-d98b-ea1e-7b1239f208f1","fromProperty":"deep","toId":"7c880755-4a88-9613-1810-e28b72056f83","toProperty":"in-deep"},{"fromId":"51fbbada-799c-d98b-ea1e-7b1239f208f1","fromProperty":"groupBy","toId":"7c880755-4a88-9613-1810-e28b72056f83","toProperty":"in-groupBy"},{"fromId":"51fbbada-799c-d98b-ea1e-7b1239f208f1","fromProperty":"Page","toId":"284676ca-b0b5-a98f-ada6-80781673dfa2","toProperty":"value"},{"fromId":"51fbbada-799c-d98b-ea1e-7b1239f208f1","fromProperty":"Offset","toId":"ec4fc63a-b9bf-f3bf-0334-81865ef9aed7","toProperty":"value"},{"fromId":"51fbbada-799c-d98b-ea1e-7b1239f208f1","fromProperty":"Sort","toId":"d6c3c00b-a512-9f5d-cbad-612beefc26ca","toProperty":"value"},{"fromId":"51fbbada-799c-d98b-ea1e-7b1239f208f1","fromProperty":"Fields","toId":"609d07a1-514c-0217-4f67-072e65b25ddc","toProperty":"value"},{"fromId":"51fbbada-799c-d98b-ea1e-7b1239f208f1","fromProperty":"Get all fields","toId":"0bb38286-2ae3-ce28-b7db-2957495534fb","toProperty":"value"},{"fromId":"51fbbada-799c-d98b-ea1e-7b1239f208f1","fromProperty":"Limit","toId":"bb4b5fca-b272-3d2d-687b-f8218558db0c","toProperty":"value"},{"fromId":"7c880755-4a88-9613-1810-e28b72056f83","fromProperty":"out-filter","toId":"47e3c55e-f0c0-f812-c00c-31fdb2f46884","toProperty":"in-filter"},{"fromId":"7c880755-4a88-9613-1810-e28b72056f83","fromProperty":"out-aggregate","toId":"47e3c55e-f0c0-f812-c00c-31fdb2f46884","toProperty":"in-aggregate"},{"fromId":"7c880755-4a88-9613-1810-e28b72056f83","fromProperty":"out-groupBy","toId":"47e3c55e-f0c0-f812-c00c-31fdb2f46884","toProperty":"in-groupBy"},{"fromId":"7c880755-4a88-9613-1810-e28b72056f83","fromProperty":"out-deep","toId":"47e3c55e-f0c0-f812-c00c-31fdb2f46884","toProperty":"in-deep"},{"fromId":"7c880755-4a88-9613-1810-e28b72056f83","fromProperty":"out-alias","toId":"47e3c55e-f0c0-f812-c00c-31fdb2f46884","toProperty":"in-alias"},{"fromId":"d6c3c00b-a512-9f5d-cbad-612beefc26ca","fromProperty":"savedValue","toId":"47e3c55e-f0c0-f812-c00c-31fdb2f46884","toProperty":"in-sort"},{"fromId":"ec4fc63a-b9bf-f3bf-0334-81865ef9aed7","fromProperty":"savedValue","toId":"47e3c55e-f0c0-f812-c00c-31fdb2f46884","toProperty":"in-offset"},{"fromId":"284676ca-b0b5-a98f-ada6-80781673dfa2","fromProperty":"savedValue","toId":"47e3c55e-f0c0-f812-c00c-31fdb2f46884","toProperty":"in-page"},{"fromId":"629eefb2-ca41-2abb-4945-f25a183293d8","fromProperty":"savedValue","toId":"47e3c55e-f0c0-f812-c00c-31fdb2f46884","toProperty":"in-search"},{"fromId":"47e3c55e-f0c0-f812-c00c-31fdb2f46884","fromProperty":"out-query","toId":"94f52f5f-45af-97b4-2116-351f6c967cfc","toProperty":"query"},{"fromId":"bb4b5fca-b272-3d2d-687b-f8218558db0c","fromProperty":"savedValue","toId":"1d34bfb3-70a1-7e49-e872-a30eb405d5e5","toProperty":"in-limit_raw"},{"fromId":"51fbbada-799c-d98b-ea1e-7b1239f208f1","fromProperty":"Set","toId":"1d34bfb3-70a1-7e49-e872-a30eb405d5e5","toProperty":"run"},{"fromId":"51fbbada-799c-d98b-ea1e-7b1239f208f1","fromProperty":"Update Type","toId":"1d34bfb3-70a1-7e49-e872-a30eb405d5e5","toProperty":"in-update_type"},{"fromId":"1d34bfb3-70a1-7e49-e872-a30eb405d5e5","fromProperty":"out-limit","toId":"47e3c55e-f0c0-f812-c00c-31fdb2f46884","toProperty":"in-limit"},{"fromId":"1d34bfb3-70a1-7e49-e872-a30eb405d5e5","fromProperty":"out-operation","toId":"94f52f5f-45af-97b4-2116-351f6c967cfc","toProperty":"operation"},{"fromId":"51fbbada-799c-d98b-ea1e-7b1239f208f1","fromProperty":"Item ID","toId":"1d34bfb3-70a1-7e49-e872-a30eb405d5e5","toProperty":"in-item_id"},{"fromId":"1d34bfb3-70a1-7e49-e872-a30eb405d5e5","fromProperty":"out-itemID","toId":"94f52f5f-45af-97b4-2116-351f6c967cfc","toProperty":"itemID"},{"fromId":"0bb38286-2ae3-ce28-b7db-2957495534fb","fromProperty":"savedValue","toId":"42be0f06-b5f6-5fdb-dceb-0426623c9b59","toProperty":"in-get_all_fields"},{"fromId":"609d07a1-514c-0217-4f67-072e65b25ddc","fromProperty":"savedValue","toId":"42be0f06-b5f6-5fdb-dceb-0426623c9b59","toProperty":"in-fields"},{"fromId":"42be0f06-b5f6-5fdb-dceb-0426623c9b59","fromProperty":"out-result","toId":"47e3c55e-f0c0-f812-c00c-31fdb2f46884","toProperty":"in-fields"},{"fromId":"51fbbada-799c-d98b-ea1e-7b1239f208f1","fromProperty":"Item IDs Array","toId":"1d34bfb3-70a1-7e49-e872-a30eb405d5e5","toProperty":"in-item_id_array"},{"fromId":"1d34bfb3-70a1-7e49-e872-a30eb405d5e5","fromProperty":"out-itemIDArray","toId":"94f52f5f-45af-97b4-2116-351f6c967cfc","toProperty":"itemIDArray"}],"roots":[{"id":"629eefb2-ca41-2abb-4945-f25a183293d8","type":"String","label":"Search","x":2,"y":1054,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"7c880755-4a88-9613-1810-e28b72056f83","type":"JavaScriptFunction","x":0,"y":1155,"parameters":{"functionScript":"const aggregate = Inputs.aggregate || null;\r\nconst groupBy = Inputs.groupBy || null;\r\nconst filter = Inputs.filter || null;\r\nconst deep = Inputs.deep || null;\r\nconst alias = Inputs.alias || null;\r\n\r\nif (aggregate) {\r\n    if (typeof (aggregate == \"object\")) {\r\n        Outputs.aggregate = aggregate;\r\n    } else {\r\n        throw new Error(\"Data provided for 'aggregate' needs to be of 'Object' type!\")\r\n    }\r\n}\r\n\r\nif (groupBy) {\r\n    if (typeof (groupBy == \"object\") && Array.isArray(groupBy)) {\r\n        Outputs.groupBy = groupBy;\r\n    } else {\r\n        throw new Error(\"Data provided for 'groupBy' needs to be of 'Array' type!\")\r\n    }\r\n}\r\n\r\nif (filter) {\r\n    if (typeof (filter == \"object\")) {\r\n        Outputs.filter = filter;\r\n    } else {\r\n        throw new Error(\"Data provided for 'filter' needs to be of 'Object' type!\")\r\n    }\r\n}\r\n\r\nif (deep) {\r\n    if (typeof (deep == \"object\")) {\r\n        Outputs.deep = deep;\r\n    } else {\r\n        throw new Error(\"Data provided for 'deep' needs to be of 'Object' type!\")\r\n    }\r\n}\r\n\r\nif (alias) {\r\n    if (typeof (alias == \"object\")) {\r\n        Outputs.alias = alias;\r\n    } else {\r\n        throw new Error(\"Data provided for 'alias' needs to be of 'Object' type!\")\r\n    }\r\n}"},"ports":[],"dynamicports":[{"name":"in-aggregate","displayName":"aggregate","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-groupBy","displayName":"groupBy","plug":"input","type":"*","group":"Inputs","index":5},{"name":"in-filter","displayName":"filter","plug":"input","type":"*","group":"Inputs","index":6},{"name":"in-deep","displayName":"deep","plug":"input","type":"*","group":"Inputs","index":7},{"name":"in-alias","displayName":"alias","plug":"input","type":"*","group":"Inputs","index":8},{"name":"out-aggregate","displayName":"aggregate","plug":"output","type":"*","group":"Outputs","index":9},{"name":"out-groupBy","displayName":"groupBy","plug":"output","type":"*","group":"Outputs","index":10},{"name":"out-filter","displayName":"filter","plug":"output","type":"*","group":"Outputs","index":11},{"name":"out-deep","displayName":"deep","plug":"output","type":"*","group":"Outputs","index":12},{"name":"out-alias","displayName":"alias","plug":"output","type":"*","group":"Outputs","index":13}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"284676ca-b0b5-a98f-ada6-80781673dfa2","type":"Number","label":"Page","x":3,"y":953,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"ec4fc63a-b9bf-f3bf-0334-81865ef9aed7","type":"Number","label":"Offset","x":4,"y":853,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"d6c3c00b-a512-9f5d-cbad-612beefc26ca","type":"String","label":"Sort","x":4,"y":756,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"609d07a1-514c-0217-4f67-072e65b25ddc","type":"String","label":"Fields","x":5,"y":658,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"0bb38286-2ae3-ce28-b7db-2957495534fb","type":"Boolean","label":"Get all fields","x":5,"y":563,"parameters":{"value":true},"ports":[],"dynamicports":[],"children":[]},{"id":"bb4b5fca-b272-3d2d-687b-f8218558db0c","type":"Number","label":"Limit","x":8,"y":446,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"51fbbada-799c-d98b-ea1e-7b1239f208f1","type":"Component Inputs","x":-518.6642597892896,"y":351.3553739167942,"parameters":{},"ports":[{"name":"Search","plug":"output","type":{"name":"*"},"index":10},{"name":"filter","plug":"output","type":{"name":"*"},"index":13},{"name":"aggregate","plug":"output","type":{"name":"*"},"index":11},{"name":"alias","plug":"output","type":{"name":"*"},"index":15},{"name":"deep","plug":"output","type":{"name":"*"},"index":14},{"name":"groupBy","plug":"output","type":{"name":"*"},"index":12},{"name":"Page","plug":"output","type":{"name":"*"},"index":9},{"name":"Offset","plug":"output","type":{"name":"*"},"index":8},{"name":"Sort","plug":"output","type":{"name":"*"},"index":7},{"name":"Fields","plug":"output","type":{"name":"*"},"index":6},{"name":"Get all fields","plug":"output","type":{"name":"*"},"index":5},{"name":"Limit","plug":"output","type":{"name":"*"},"index":4},{"name":"Set","plug":"output","type":{"name":"*"},"index":0},{"name":"Update Type","plug":"output","type":{"name":"*"},"index":1},{"name":"Item ID","plug":"output","type":{"name":"*"},"index":2},{"name":"Item IDs Array","plug":"output","type":{"name":"*"},"index":3}],"dynamicports":[],"children":[]},{"id":"47e3c55e-f0c0-f812-c00c-31fdb2f46884","type":"JavaScriptFunction","x":726.2412815279195,"y":684.314172687856,"parameters":{"functionScript":"const limit = Inputs.limit;\r\nconst fields = Inputs.fields;\r\nconst filter = Inputs.filter ?? null;\r\nconst search = Inputs.search ?? null;\r\nconst sort = Inputs.sort ?? null;\r\nconst offset = Inputs.offset ?? null;\r\nconst page = Inputs.page ?? null;\r\nconst aggregate = Inputs.aggregate ?? null;\r\nconst groupBy = Inputs.groupBy ?? null;\r\nconst deep = Inputs.deep ?? null;\r\nconst alias = Inputs.alias ?? null;\r\n\r\nconst query = {};\r\n\r\nif (limit) query.limit = limit;\r\nif (filter) query.filter = filter;\r\nif (search) query.search = search;\r\nif (fields) query.fields = fields;\r\nif (sort) query.sort = sort;\r\nif (offset) query.offset = offset;\r\nif (page) query.page = page;\r\nif (aggregate) query.aggregate = aggregate;\r\nif (groupBy) query.groupBy = groupBy;\r\nif (deep) query.deep = deep;\r\nif (alias) query.alias = alias;\r\n\r\nOutputs.query = query;\r\nOutputs.Done();"},"ports":[],"dynamicports":[{"name":"in-limit","displayName":"limit","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-fields","displayName":"fields","plug":"input","type":"*","group":"Inputs","index":5},{"name":"in-filter","displayName":"filter","plug":"input","type":"*","group":"Inputs","index":6},{"name":"in-search","displayName":"search","plug":"input","type":"*","group":"Inputs","index":7},{"name":"in-sort","displayName":"sort","plug":"input","type":"*","group":"Inputs","index":8},{"name":"in-offset","displayName":"offset","plug":"input","type":"*","group":"Inputs","index":9},{"name":"in-page","displayName":"page","plug":"input","type":"*","group":"Inputs","index":10},{"name":"in-aggregate","displayName":"aggregate","plug":"input","type":"*","group":"Inputs","index":11},{"name":"in-groupBy","displayName":"groupBy","plug":"input","type":"*","group":"Inputs","index":12},{"name":"in-deep","displayName":"deep","plug":"input","type":"*","group":"Inputs","index":13},{"name":"in-alias","displayName":"alias","plug":"input","type":"*","group":"Inputs","index":14},{"name":"out-Done","displayName":"Done","plug":"output","type":"signal","group":"Outputs","index":15},{"name":"out-query","displayName":"query","plug":"output","type":"*","group":"Outputs","index":16}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"94f52f5f-45af-97b4-2116-351f6c967cfc","type":"Component Outputs","x":982.2849626492933,"y":505.43976850800595,"parameters":{},"ports":[{"name":"query","plug":"input","type":{"name":"*"},"index":1},{"name":"operation","plug":"input","type":{"name":"*"},"index":2},{"name":"itemID","plug":"input","type":{"name":"*"},"index":3},{"name":"itemIDArray","plug":"input","type":{"name":"*"},"index":4}],"dynamicports":[],"children":[]},{"id":"1d34bfb3-70a1-7e49-e872-a30eb405d5e5","type":"JavaScriptFunction","x":363,"y":347,"parameters":{"functionScript":"const update_type = Inputs.update_type ?? null;\r\nconst item_id = Inputs.item_id ?? null;\r\nconst item_ids = Inputs.item_id_array ?? null;\r\nconst limit_raw = Inputs.limit_raw ?? null;\r\n\r\nlet operation = null;\r\nlet limit = null;\r\nlet itemID = null;\r\nlet itemIDArray = null;\r\n\r\n///////////////////////////////////\r\n\r\nif (update_type) {\r\n    if (update_type == \"Update Single by ID\") {\r\n        if (item_id) {\r\n            operation = \"single\";\r\n            itemID = item_id;\r\n        } else {\r\n            throw new Error(\"Provide valid Item ID\");\r\n        }\r\n    } else if (update_type == \"Update Multiple by IDs\") {\r\n        if(!item_ids || !Array.isArray(item_ids) || (item_ids || []).length <= 0 ) throw new Error(\"Provide valid array of Item IDs!\");\r\n        operation = \"multipleByIDs\";\r\n        itemIDArray = [].concat(item_ids);\r\n    } else if (update_type == \"Update Multiple by Filter\") {\r\n        if(limit_raw){\r\n            if(limit_raw <= 0){\r\n                limit = 1\r\n            } else {\r\n                limit = limit_raw;\r\n            }\r\n        }\r\n        operation = \"multiple\";\r\n\r\n    } else if (update_type == \"Update All\") {\r\n\r\n        limit = -1;\r\n        operation = \"all\";\r\n\r\n    } else if (update_type == \"Update Singleton\") {\r\n        operation = \"singleton\";\r\n    } else {\r\n        operation = null;\r\n    }\r\n    \r\n    Outputs.operation = operation;\r\n    Outputs.limit = limit;\r\n    if(itemID) Outputs.itemID = itemID;\r\n    if(itemIDArray) Outputs.itemIDArray = itemIDArray;\r\n}\r\n"},"ports":[],"dynamicports":[{"name":"in-update_type","displayName":"update_type","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-item_id","displayName":"item_id","plug":"input","type":"*","group":"Inputs","index":5},{"name":"in-item_id_array","displayName":"item_id_array","plug":"input","type":"*","group":"Inputs","index":6},{"name":"in-limit_raw","displayName":"limit_raw","plug":"input","type":"*","group":"Inputs","index":7},{"name":"out-operation","displayName":"operation","plug":"output","type":"*","group":"Outputs","index":8},{"name":"out-limit","displayName":"limit","plug":"output","type":"*","group":"Outputs","index":9},{"name":"out-itemID","displayName":"itemID","plug":"output","type":"*","group":"Outputs","index":10},{"name":"out-itemIDArray","displayName":"itemIDArray","plug":"output","type":"*","group":"Outputs","index":11}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"42be0f06-b5f6-5fdb-dceb-0426623c9b59","type":"JavaScriptFunction","x":362,"y":621,"parameters":{"functionScript":"Outputs.result = (Inputs.get_all_fields ?? true) ? '*' : (Inputs.fields || '*');"},"ports":[],"dynamicports":[{"name":"in-get_all_fields","displayName":"get_all_fields","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-fields","displayName":"fields","plug":"input","type":"*","group":"Inputs","index":5},{"name":"out-result","displayName":"result","plug":"output","type":"*","group":"Outputs","index":6}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}}],"visualRoots":[]}},{"name":"/#Directus/Directus Prefab/Components/Utils/Check Refresh Process status","id":"fb189488-2155-2922-1aab-44b5809ab734","graph":{"connections":[{"fromId":"2e96ed5f-de03-0d2a-e6ba-964c0e2d3275","fromProperty":"value","toId":"8023cc20-1ed2-b92c-abb9-27881e57857e","toProperty":"condition"},{"fromId":"2e96ed5f-de03-0d2a-e6ba-964c0e2d3275","fromProperty":"fetched","toId":"8023cc20-1ed2-b92c-abb9-27881e57857e","toProperty":"eval"},{"fromId":"8023cc20-1ed2-b92c-abb9-27881e57857e","fromProperty":"ontrue","toId":"ccfb80f7-c50e-d441-5258-4da1820e5f33","toProperty":"start"},{"fromId":"ccfb80f7-c50e-d441-5258-4da1820e5f33","fromProperty":"timerFinished","toId":"2e96ed5f-de03-0d2a-e6ba-964c0e2d3275","toProperty":"fetch"},{"fromId":"f99349de-911c-fb2d-e7ef-b5377a7029ce","fromProperty":"Fetch","toId":"2e96ed5f-de03-0d2a-e6ba-964c0e2d3275","toProperty":"fetch"},{"fromId":"8023cc20-1ed2-b92c-abb9-27881e57857e","fromProperty":"onfalse","toId":"5df4ffd3-25e8-28f0-0439-a55c7407dbe5","toProperty":"Done"}],"roots":[{"id":"ccfb80f7-c50e-d441-5258-4da1820e5f33","type":"Timer","x":237,"y":285,"parameters":{"duration":100},"ports":[],"dynamicports":[],"children":[]},{"id":"2e96ed5f-de03-0d2a-e6ba-964c0e2d3275","type":"Variable2","x":0,"y":90,"parameters":{"name":"Token Refresh Process"},"ports":[],"dynamicports":[],"children":[]},{"id":"8023cc20-1ed2-b92c-abb9-27881e57857e","type":"Condition","x":489,"y":134,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"f99349de-911c-fb2d-e7ef-b5377a7029ce","type":"Component Inputs","x":-260,"y":119,"parameters":{},"ports":[{"name":"Fetch","plug":"output","type":{"name":"*"},"index":0}],"dynamicports":[],"children":[]},{"id":"5df4ffd3-25e8-28f0-0439-a55c7407dbe5","type":"Component Outputs","x":699,"y":133,"parameters":{},"ports":[{"name":"Done","plug":"input","type":{"name":"*"},"index":0}],"dynamicports":[],"children":[]}],"visualRoots":[]}},{"name":"/#Directus/Directus Prefab/Components/Utils/Delay with retry limit","id":"d4dac649-072c-0978-4d5d-66c10b164599","graph":{"connections":[{"fromId":"e0928c6c-c277-e0d3-b1eb-dad0ff68bef2","fromProperty":"savedValue","toId":"dd8c39b1-1c17-db5d-5bd1-1beffbdec427","toProperty":"limitsMax"},{"fromId":"dd8c39b1-1c17-db5d-5bd1-1beffbdec427","fromProperty":"countChanged","toId":"f9617aa4-8812-8efb-a78f-019e99035df5","toProperty":"restart"},{"fromId":"dd8c39b1-1c17-db5d-5bd1-1beffbdec427","fromProperty":"countChanged","toId":"17d082e4-e5fa-df5d-7e24-5a3ca4645338","toProperty":"run"},{"fromId":"e0928c6c-c277-e0d3-b1eb-dad0ff68bef2","fromProperty":"savedValue","toId":"17d082e4-e5fa-df5d-7e24-5a3ca4645338","toProperty":"in-max_count"},{"fromId":"dd8c39b1-1c17-db5d-5bd1-1beffbdec427","fromProperty":"currentCount","toId":"17d082e4-e5fa-df5d-7e24-5a3ca4645338","toProperty":"in-current_count"},{"fromId":"cd257d40-b4ed-92d2-3344-eac5cfc61819","fromProperty":"Start","toId":"f9617aa4-8812-8efb-a78f-019e99035df5","toProperty":"start"},{"fromId":"cd257d40-b4ed-92d2-3344-eac5cfc61819","fromProperty":"Restart","toId":"dd8c39b1-1c17-db5d-5bd1-1beffbdec427","toProperty":"increase"},{"fromId":"f9617aa4-8812-8efb-a78f-019e99035df5","fromProperty":"timerFinished","toId":"8e8e0082-aa33-8f16-7c16-e9cf95fc9cb3","toProperty":"Finished"},{"fromId":"cd257d40-b4ed-92d2-3344-eac5cfc61819","fromProperty":"Max. Retries","toId":"e0928c6c-c277-e0d3-b1eb-dad0ff68bef2","toProperty":"value"},{"fromId":"cd257d40-b4ed-92d2-3344-eac5cfc61819","fromProperty":"Error Message","toId":"ee762883-d2ab-fb34-bcf1-08d08b7aba11","toProperty":"value"},{"fromId":"ee762883-d2ab-fb34-bcf1-08d08b7aba11","fromProperty":"savedValue","toId":"17d082e4-e5fa-df5d-7e24-5a3ca4645338","toProperty":"in-error_message"},{"fromId":"cd257d40-b4ed-92d2-3344-eac5cfc61819","fromProperty":"Delay Duration","toId":"f9617aa4-8812-8efb-a78f-019e99035df5","toProperty":"duration"}],"roots":[{"id":"f9617aa4-8812-8efb-a78f-019e99035df5","type":"Timer","x":-2185,"y":-222,"parameters":{"duration":100},"ports":[],"dynamicports":[],"children":[]},{"id":"dd8c39b1-1c17-db5d-5bd1-1beffbdec427","type":"Counter","x":-1882,"y":-418,"parameters":{"limitsEnabled":true},"ports":[],"dynamicports":[],"children":[]},{"id":"e0928c6c-c277-e0d3-b1eb-dad0ff68bef2","type":"Number","label":"Max Retries","x":-2173,"y":-506,"parameters":{"value":10},"ports":[],"dynamicports":[],"children":[]},{"id":"17d082e4-e5fa-df5d-7e24-5a3ca4645338","type":"JavaScriptFunction","x":-1607,"y":-508,"parameters":{"functionScript":"const max_count = Inputs.max_count\r\nconst current_count = Inputs.current_count\r\n\r\nconst error_message = Inputs.error_message || \"Directus Site Client has not yet been set up!\";\r\n\r\nif(current_count >= max_count){\r\n    throw new Error(error_message)\r\n}"},"ports":[],"dynamicports":[{"name":"in-max_count","displayName":"max_count","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-current_count","displayName":"current_count","plug":"input","type":"*","group":"Inputs","index":5},{"name":"in-error_message","displayName":"error_message","plug":"input","type":"*","group":"Inputs","index":6}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"cd257d40-b4ed-92d2-3344-eac5cfc61819","type":"Component Inputs","x":-2476,"y":-368,"parameters":{},"ports":[{"name":"Start","plug":"output","type":{"name":"*"},"index":0},{"name":"Restart","plug":"output","type":{"name":"*"},"index":2},{"name":"Max. Retries","plug":"output","type":{"name":"*"},"index":3},{"name":"Error Message","plug":"output","type":{"name":"*"},"index":4},{"name":"Delay Duration","plug":"output","type":{"name":"*"},"index":1}],"dynamicports":[],"children":[]},{"id":"8e8e0082-aa33-8f16-7c16-e9cf95fc9cb3","type":"Component Outputs","x":-1870,"y":-204,"parameters":{},"ports":[{"name":"Finished","plug":"input","type":{"name":"*"},"index":0}],"dynamicports":[],"children":[]},{"id":"ee762883-d2ab-fb34-bcf1-08d08b7aba11","type":"String","label":"Error Message","x":-1597,"y":-304,"parameters":{},"ports":[],"dynamicports":[],"children":[]}],"visualRoots":[]}},{"name":"/#Directus/Directus Prefab/Components/Utils/Get a SDK client","id":"15083968-3183-2653-02b7-4e0885dee843","graph":{"connections":[{"fromId":"9799fc23-706e-6678-92b0-c399aaa5e7ee","fromProperty":"Do","toId":"6fbcceeb-8fa1-a33b-4410-848159dc0d2b","toProperty":"run"},{"fromId":"6fbcceeb-8fa1-a33b-4410-848159dc0d2b","fromProperty":"out-Done","toId":"af8c460f-8269-ba9d-9ec4-20512735e2f1","toProperty":"Done"},{"fromId":"6fbcceeb-8fa1-a33b-4410-848159dc0d2b","fromProperty":"out-client","toId":"af8c460f-8269-ba9d-9ec4-20512735e2f1","toProperty":"client"}],"roots":[{"id":"6fbcceeb-8fa1-a33b-4410-848159dc0d2b","type":"JavaScriptFunction","x":0,"y":0,"parameters":{"functionScript":"const client = (!!Noodl.Objects.DirectusSDK?.SiteClient?.url?.href || false) ? Noodl.Objects.DirectusSDK?.SiteClient : Noodl.Objects.DirectusSDK?.Client;\r\n\r\nif(client){\r\n    Outputs.client = client;\r\n    Outputs.Done();\r\n} else {\r\n    throw new Error(\"No SDK Client found!\");\r\n}"},"ports":[],"dynamicports":[{"name":"out-Done","displayName":"Done","plug":"output","type":"signal","group":"Outputs","index":4},{"name":"out-client","displayName":"client","plug":"output","type":"*","group":"Outputs","index":5}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"9799fc23-706e-6678-92b0-c399aaa5e7ee","type":"Component Inputs","x":-238.4000000000001,"y":2.4000015258789062,"parameters":{},"ports":[{"name":"Do","plug":"output","type":{"name":"*"},"index":1}],"dynamicports":[],"children":[]},{"id":"af8c460f-8269-ba9d-9ec4-20512735e2f1","type":"Component Outputs","x":257.5999999999999,"y":1.4000015258789062,"parameters":{},"ports":[{"name":"Done","plug":"input","type":{"name":"*"},"index":1},{"name":"client","plug":"input","type":{"name":"*"},"index":2}],"dynamicports":[],"children":[]}],"visualRoots":[],"comments":[{"text":"This Utility component tries to first retrieve the Site SDK Client, if installed, and if not, the User SDK Client then.\nOutputs the retrieved Client.\n\nIf none is available, throws an error.","width":597,"height":172,"fill":"transparent","x":-208,"y":-272,"id":"01845ccf-3293-0062-9cb2-a095e886616d","largeFont":true,"color":"notice"}]}},{"name":"/#Directus/Directus Prefab/Components/Utils/SDK Client Check","id":"1382f9d7-83e9-1522-7c78-baa608f6f03c","graph":{"connections":[{"fromId":"b01bae57-2e70-2c8e-b5cc-88189de02870","fromProperty":"currentState","toId":"6b606d0f-7fef-b616-1350-c6d1dde40d41","toProperty":"in-SDKClient"},{"fromId":"68db7ad4-af59-b833-b128-a2acba4a06fb","fromProperty":"State","toId":"b01bae57-2e70-2c8e-b5cc-88189de02870","toProperty":"currentState"},{"fromId":"6b606d0f-7fef-b616-1350-c6d1dde40d41","fromProperty":"out-Done","toId":"32c2abb3-bdec-8a4c-6725-c193bb9ea9ac","toProperty":"Success"},{"fromId":"68db7ad4-af59-b833-b128-a2acba4a06fb","fromProperty":"Do","toId":"f1d53a05-a6a0-028a-1004-81eb11d6e6d2","toProperty":"Start"},{"fromId":"f1d53a05-a6a0-028a-1004-81eb11d6e6d2","fromProperty":"Finished","toId":"6b606d0f-7fef-b616-1350-c6d1dde40d41","toProperty":"run"},{"fromId":"6b606d0f-7fef-b616-1350-c6d1dde40d41","fromProperty":"out-Failure","toId":"f1d53a05-a6a0-028a-1004-81eb11d6e6d2","toProperty":"Restart"}],"roots":[{"id":"6b606d0f-7fef-b616-1350-c6d1dde40d41","type":"JavaScriptFunction","x":380,"y":150,"parameters":{"functionScript":"const state = Inputs.SDKClient ?? null;\r\n\r\nlet res = true;\r\n\r\nif(state == \"Site SDK Client\"){\r\n    const client = Noodl.Objects.DirectusSDK.SiteClient || null;\r\n    if(!client){\r\n        res = false;\r\n        Outputs.Failure();\r\n    }\r\n}\r\n\r\nif(state == \"User SDK Client\"){\r\n    const client = Noodl.Objects.DirectusSDK.Client || null;\r\n    if(!client){ \r\n        res = false;\r\n        Outputs.Failure();\r\n    }\r\n}\r\n\r\nif(res){\r\n    Outputs.Done();\r\n}"},"ports":[],"dynamicports":[{"name":"in-SDKClient","displayName":"SDKClient","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-Failure","displayName":"Failure","plug":"output","type":"signal","group":"Outputs","index":5},{"name":"out-Done","displayName":"Done","plug":"output","type":"signal","group":"Outputs","index":6}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"b01bae57-2e70-2c8e-b5cc-88189de02870","type":"States","label":"Client type","x":142,"y":209,"parameters":{"states":"User SDK Client,Site SDK Client","useTransitions":false},"ports":[],"dynamicports":[{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To User SDK Client","name":"to-User SDK Client","group":"Go to state","index":6},{"plug":"output","type":"boolean","displayName":"At User SDK Client","name":"at-User SDK Client","group":"Current state","index":7},{"plug":"output","type":"signal","displayName":"Has Reached User SDK Client","name":"reached-User SDK Client","group":"Current state","index":8},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To Site SDK Client","name":"to-Site SDK Client","group":"Go to state","index":9},{"plug":"output","type":"boolean","displayName":"At Site SDK Client","name":"at-Site SDK Client","group":"Current state","index":10},{"plug":"output","type":"signal","displayName":"Has Reached Site SDK Client","name":"reached-Site SDK Client","group":"Current state","index":11},{"plug":"input","type":{"name":"enum","enums":["User SDK Client","Site SDK Client"]},"group":"States","displayName":"State","name":"currentState","default":"User SDK Client","index":12}],"children":[]},{"id":"68db7ad4-af59-b833-b128-a2acba4a06fb","type":"Component Inputs","x":-125,"y":149,"parameters":{},"ports":[{"name":"Do","plug":"output","type":{"name":"*"},"index":0},{"name":"State","plug":"output","type":{"name":"*"},"index":1}],"dynamicports":[],"children":[]},{"id":"32c2abb3-bdec-8a4c-6725-c193bb9ea9ac","type":"Component Outputs","x":624,"y":150,"parameters":{},"ports":[{"name":"Success","plug":"input","type":{"name":"*"},"index":0}],"dynamicports":[],"children":[]},{"id":"f1d53a05-a6a0-028a-1004-81eb11d6e6d2","type":"/#Directus/Directus Prefab/Components/Utils/Delay with retry limit","x":142,"y":92,"parameters":{"Delay Duration":100,"Max. Retries":25},"ports":[],"dynamicports":[],"children":[]}],"visualRoots":[],"comments":[{"text":"This component is used to make sure that the SDK Client is properly available.","width":614,"height":118,"fill":"transparent","x":-57,"y":-87,"id":"fa5846ad-3a58-1ccc-444b-daa0c1ba3e5c","color":"notice","largeFont":true}]}},{"name":"/#Directus/Directus Prefab/Initial Set Up/Set up Directus - Option 1 (env)","id":"86e9e3a5-f7c6-b210-9715-fae53951195c","graph":{"connections":[{"fromId":"7b71aa55-e231-2640-8a2d-a1eccd9b18fc","fromProperty":"prop-url","toId":"ee2aa9f7-36a9-f130-9239-986038692749","toProperty":"directusURL"},{"fromId":"7b71aa55-e231-2640-8a2d-a1eccd9b18fc","fromProperty":"prop-url","toId":"a882aec0-e2c5-f0f8-9f55-ac9480db053e","toProperty":"directusURL"},{"fromId":"ee2aa9f7-36a9-f130-9239-986038692749","fromProperty":"Success","toId":"8455b8c2-1df6-17ea-e01b-735e0048ca23","toProperty":"Do"},{"fromId":"7b71aa55-e231-2640-8a2d-a1eccd9b18fc","fromProperty":"prop-static_token","toId":"a882aec0-e2c5-f0f8-9f55-ac9480db053e","toProperty":"static_token"},{"fromId":"4a29d0d6-7ef8-dae0-cac0-14978f900edf","fromProperty":"Done","toId":"7b71aa55-e231-2640-8a2d-a1eccd9b18fc","toProperty":"fetch"},{"fromId":"7b71aa55-e231-2640-8a2d-a1eccd9b18fc","fromProperty":"fetched","toId":"ee2aa9f7-36a9-f130-9239-986038692749","toProperty":"Do"},{"fromId":"7b71aa55-e231-2640-8a2d-a1eccd9b18fc","fromProperty":"fetched","toId":"a882aec0-e2c5-f0f8-9f55-ac9480db053e","toProperty":"Do"},{"fromId":"dbe24c51-56f9-e76a-94a8-762da2d13c6e","fromProperty":"state","toId":"182b20d1-6f25-2a3e-7a04-413879a3b4e4","toProperty":"input 0"},{"fromId":"6d13891c-4b0a-8751-bbfe-61d844489377","fromProperty":"state","toId":"182b20d1-6f25-2a3e-7a04-413879a3b4e4","toProperty":"input 1"},{"fromId":"182b20d1-6f25-2a3e-7a04-413879a3b4e4","fromProperty":"result","toId":"0b928ec1-e709-f9f5-820f-a2f2728ee0f6","toProperty":"Mounted"},{"fromId":"ee2aa9f7-36a9-f130-9239-986038692749","fromProperty":"Success","toId":"dbe24c51-56f9-e76a-94a8-762da2d13c6e","toProperty":"on"},{"fromId":"a882aec0-e2c5-f0f8-9f55-ac9480db053e","fromProperty":"Success","toId":"6d13891c-4b0a-8751-bbfe-61d844489377","toProperty":"on"},{"fromId":"2095b477-6a81-0774-9c72-cf524973d7a4","fromProperty":"timerFinished","toId":"8686bb5c-a556-83ee-e0a2-85faf218504d","toProperty":"run"},{"fromId":"8686bb5c-a556-83ee-e0a2-85faf218504d","fromProperty":"out-Failure","toId":"946a8cf3-7136-180f-bb41-1ff8f4b105e5","toProperty":"increase"},{"fromId":"946a8cf3-7136-180f-bb41-1ff8f4b105e5","fromProperty":"currentCount","toId":"5d4d625f-bc53-e9b6-2d3e-2d46b6669362","toProperty":"in-count"},{"fromId":"5d4d625f-bc53-e9b6-2d3e-2d46b6669362","fromProperty":"out-Done","toId":"2095b477-6a81-0774-9c72-cf524973d7a4","toProperty":"restart"},{"fromId":"946a8cf3-7136-180f-bb41-1ff8f4b105e5","fromProperty":"countChanged","toId":"5d4d625f-bc53-e9b6-2d3e-2d46b6669362","toProperty":"run"},{"fromId":"fafe717f-76ef-9b6d-f9af-cf1346a14314","fromProperty":"Do","toId":"8686bb5c-a556-83ee-e0a2-85faf218504d","toProperty":"run"},{"fromId":"8686bb5c-a556-83ee-e0a2-85faf218504d","fromProperty":"out-Success","toId":"4a29d0d6-7ef8-dae0-cac0-14978f900edf","toProperty":"Do"}],"roots":[{"id":"ee2aa9f7-36a9-f130-9239-986038692749","type":"/#Directus/Directus Prefab/Components/Config/Directus - Initialize User Client","label":"Directus - Initialize","x":304,"y":211,"parameters":{"Enable Cross-Domain cookies":true},"ports":[],"dynamicports":[],"children":[]},{"id":"4a29d0d6-7ef8-dae0-cac0-14978f900edf","type":"Javascript2","label":"env.json","x":-232,"y":285,"parameters":{"code":"Script.Signals.Do = async function(){\r\n    const file = await fetch(\"./env.json\");\r\n    const env = await file.json() ?? {};\r\n    for(const key in env){\r\n        Noodl.Objects.env[key] = env[key];\r\n    }\r\n    if(env?.url) Script.Outputs.Done();\r\n}"},"ports":[],"dynamicports":[{"name":"Do","plug":"input","type":{"name":"signal"},"group":"Inputs","index":5},{"name":"Done","displayName":"Done","plug":"output","type":"signal","group":"Outputs","index":6}],"children":[],"metadata":{"merge":{"soureCodePorts":["code"]}}},{"id":"7b71aa55-e231-2640-8a2d-a1eccd9b18fc","type":"Model2","x":21,"y":285,"parameters":{"modelId":"env","properties":"url,static_token"},"ports":[],"dynamicports":[{"type":{"name":"*","allowConnectionsOnly":true},"plug":"input/output","group":"Properties","name":"prop-url","displayName":"url","index":7},{"type":"signal","plug":"output","group":"Changed Events","displayName":"url Changed","name":"changed-url","index":8},{"type":{"name":"*","allowConnectionsOnly":true},"plug":"input/output","group":"Properties","name":"prop-static_token","displayName":"static_token","index":9},{"type":"signal","plug":"output","group":"Changed Events","displayName":"static_token Changed","name":"changed-static_token","index":10}],"children":[]},{"id":"a882aec0-e2c5-f0f8-9f55-ac9480db053e","type":"/#Directus/Directus Prefab/Components/Config/Directus - Initialize Site Client","label":"Directus - Initialize Site Client","x":304,"y":349,"parameters":{"Enable Cross-Domain cookies":true},"ports":[],"dynamicports":[],"children":[]},{"id":"8455b8c2-1df6-17ea-e01b-735e0048ca23","type":"/#Directus/Directus Prefab/Components/Auth/Directus - Refresh Token","x":609,"y":75,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"fafe717f-76ef-9b6d-f9af-cf1346a14314","type":"Component Inputs","x":-748,"y":282,"parameters":{},"ports":[{"name":"Do","plug":"output","type":{"name":"*"},"index":0}],"dynamicports":[],"children":[]},{"id":"0b928ec1-e709-f9f5-820f-a2f2728ee0f6","type":"Component Outputs","x":1058,"y":316,"parameters":{},"ports":[{"name":"Mounted","plug":"input","type":{"name":"*"},"index":0}],"dynamicports":[],"children":[]},{"id":"dbe24c51-56f9-e76a-94a8-762da2d13c6e","type":"Switch","x":617,"y":246,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"6d13891c-4b0a-8751-bbfe-61d844489377","type":"Switch","x":614,"y":371,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"182b20d1-6f25-2a3e-7a04-413879a3b4e4","type":"Or","x":840,"y":313,"parameters":{},"ports":[],"dynamicports":[{"name":"input 0","displayName":"Input 0","type":"boolean","plug":"input","index":1},{"name":"input 1","displayName":"Input 1","type":"boolean","plug":"input","index":2},{"name":"input 2","displayName":"Input 2","type":"boolean","plug":"input","index":3}],"children":[]},{"id":"8686bb5c-a556-83ee-e0a2-85faf218504d","type":"JavaScriptFunction","x":-507,"y":451.00000000000006,"parameters":{"functionScript":"const sdk_installed = window.Directus ?? null;\r\nif(sdk_installed){\r\n    Outputs.Success();\r\n} else {\r\n    Outputs.Failure();\r\n}"},"ports":[],"dynamicports":[{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":4},{"name":"out-Failure","displayName":"Failure","plug":"output","type":"signal","group":"Outputs","index":5}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"2095b477-6a81-0774-9c72-cf524973d7a4","type":"Timer","x":-504,"y":672,"parameters":{"duration":100},"ports":[],"dynamicports":[],"children":[]},{"id":"946a8cf3-7136-180f-bb41-1ff8f4b105e5","type":"Counter","x":-505,"y":551,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"5d4d625f-bc53-e9b6-2d3e-2d46b6669362","type":"JavaScriptFunction","x":-309,"y":594,"parameters":{"functionScript":"const result = (Inputs.count || 0) >= 5 ? true: false;\r\n\r\nif(result){\r\n    location.reload()\r\n} else {\r\n    Outputs.Done();\r\n}"},"ports":[],"dynamicports":[{"name":"in-count","displayName":"count","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-Done","displayName":"Done","plug":"output","type":"signal","group":"Outputs","index":5}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}}],"visualRoots":[],"comments":[{"text":"Make sure to have \"env.json\" set up properly","width":200,"height":186,"fill":"transparent","x":-256,"y":218,"id":"eb362f50-a4f1-a2c0-7f23-6435a0fd1b88"},{"text":"There are 2 options to include the URL of your Directus project's URL (and optionally, Static Token):\n\n1. Using an environment file (env.json) [For ease of management, and not security]\n2. Directly setting the URL\n\nPS: Choose only 1 and remove the other!","width":521,"height":257,"fill":"transparent","x":-202,"y":-337,"id":"67992a7a-e7db-1fc9-d681-2e7bc129d67e","largeFont":true},{"text":"This is Option 1 :\n\n- Use env.json","width":279,"height":119,"fill":"no-fill","x":-94,"y":-29,"id":"833cf90e-3c64-d0c2-f519-433ff33dbb96","largeFont":true,"color":"success"},{"text":"Is the SDK installed and ready to use?","width":416,"height":367,"fill":"transparent","x":-539,"y":406,"id":"09315472-e17b-88c3-b3b8-c63c419d53d3","color":"notice","largeFont":true}]}},{"name":"/#Directus/Directus Prefab/Initial Set Up/Set up Directus - Option 2 (manual)","id":"08392fc9-0461-d569-555e-5d26c3c6ade1","graph":{"connections":[{"fromId":"d0442fe1-e2ab-3e4a-53dd-89303edc7f04","fromProperty":"Success","toId":"30aaa0b7-c3a5-34c2-45c5-e23f20bcffa5","toProperty":"Do"},{"fromId":"62034dab-d0f8-2685-7e7c-d8aa1717b5a5","fromProperty":"Do","toId":"2c1f2ada-c670-5056-e7bc-d113b4eceee3","toProperty":"saveValue"},{"fromId":"62034dab-d0f8-2685-7e7c-d8aa1717b5a5","fromProperty":"Do","toId":"0736c54f-c0bb-e0e6-a08e-a7301df9cad4","toProperty":"saveValue"},{"fromId":"2c1f2ada-c670-5056-e7bc-d113b4eceee3","fromProperty":"stored","toId":"d0442fe1-e2ab-3e4a-53dd-89303edc7f04","toProperty":"Do"},{"fromId":"2c1f2ada-c670-5056-e7bc-d113b4eceee3","fromProperty":"savedValue","toId":"d0442fe1-e2ab-3e4a-53dd-89303edc7f04","toProperty":"directusURL"},{"fromId":"0736c54f-c0bb-e0e6-a08e-a7301df9cad4","fromProperty":"stored","toId":"4dadea68-118d-ba40-69fa-ee37b3b9744e","toProperty":"Do"},{"fromId":"0736c54f-c0bb-e0e6-a08e-a7301df9cad4","fromProperty":"savedValue","toId":"4dadea68-118d-ba40-69fa-ee37b3b9744e","toProperty":"static_token"},{"fromId":"2c1f2ada-c670-5056-e7bc-d113b4eceee3","fromProperty":"savedValue","toId":"4dadea68-118d-ba40-69fa-ee37b3b9744e","toProperty":"directusURL"},{"fromId":"b314b3dc-1003-8094-3d6a-064012a256d5","fromProperty":"savedValue","toId":"4dadea68-118d-ba40-69fa-ee37b3b9744e","toProperty":"Enable Cross-Domain cookies"},{"fromId":"62034dab-d0f8-2685-7e7c-d8aa1717b5a5","fromProperty":"Do","toId":"b314b3dc-1003-8094-3d6a-064012a256d5","toProperty":"saveValue"},{"fromId":"7d340018-6158-b9d6-64ed-445e5e53bbaa","fromProperty":"state","toId":"a526dff8-c23b-0c64-008e-e72a27600455","toProperty":"input 0"},{"fromId":"6bc10e3a-b03f-544a-42a1-23e38e5d6f56","fromProperty":"state","toId":"a526dff8-c23b-0c64-008e-e72a27600455","toProperty":"input 1"},{"fromId":"a526dff8-c23b-0c64-008e-e72a27600455","fromProperty":"result","toId":"6b31a8eb-f12b-edf4-b898-de01953e6c8d","toProperty":"Mounted"},{"fromId":"d0442fe1-e2ab-3e4a-53dd-89303edc7f04","fromProperty":"Success","toId":"7d340018-6158-b9d6-64ed-445e5e53bbaa","toProperty":"on"},{"fromId":"4dadea68-118d-ba40-69fa-ee37b3b9744e","fromProperty":"Success","toId":"6bc10e3a-b03f-544a-42a1-23e38e5d6f56","toProperty":"on"}],"roots":[{"id":"d0442fe1-e2ab-3e4a-53dd-89303edc7f04","type":"/#Directus/Directus Prefab/Components/Config/Directus - Initialize User Client","label":"Directus - Initialize","x":245,"y":152,"parameters":{"Enable Cross-Domain cookies":true},"ports":[],"dynamicports":[],"children":[]},{"id":"4dadea68-118d-ba40-69fa-ee37b3b9744e","type":"/#Directus/Directus Prefab/Components/Config/Directus - Initialize Site Client","label":"Directus - Initialize Site Client","x":249,"y":345,"parameters":{"Enable Cross-Domain cookies":true},"ports":[],"dynamicports":[],"children":[]},{"id":"30aaa0b7-c3a5-34c2-45c5-e23f20bcffa5","type":"/#Directus/Directus Prefab/Components/Auth/Directus - Refresh Token","x":563,"y":52,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"62034dab-d0f8-2685-7e7c-d8aa1717b5a5","type":"Component Inputs","x":-302,"y":294,"parameters":{},"ports":[{"name":"Do","plug":"output","type":{"name":"*"},"index":0}],"dynamicports":[],"children":[]},{"id":"2c1f2ada-c670-5056-e7bc-d113b4eceee3","type":"String","label":"Directus URL","x":-42,"y":200.99999999999994,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"0736c54f-c0bb-e0e6-a08e-a7301df9cad4","type":"String","label":"Static Token","x":-34,"y":344.99999999999994,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"b314b3dc-1003-8094-3d6a-064012a256d5","type":"Boolean","label":"Cross-Domain cookies","x":-36.5,"y":473.10000152587895,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"6b31a8eb-f12b-edf4-b898-de01953e6c8d","type":"Component Outputs","x":1007,"y":273,"parameters":{},"ports":[{"name":"Mounted","plug":"input","type":{"name":"*"},"index":0}],"dynamicports":[],"children":[]},{"id":"7d340018-6158-b9d6-64ed-445e5e53bbaa","type":"Switch","x":566,"y":203,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"6bc10e3a-b03f-544a-42a1-23e38e5d6f56","type":"Switch","x":565,"y":344,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"a526dff8-c23b-0c64-008e-e72a27600455","type":"Or","x":789,"y":270,"parameters":{},"ports":[],"dynamicports":[{"name":"input 0","displayName":"Input 0","type":"boolean","plug":"input","index":1},{"name":"input 1","displayName":"Input 1","type":"boolean","plug":"input","index":2},{"name":"input 2","displayName":"Input 2","type":"boolean","plug":"input","index":3}],"children":[]}],"visualRoots":[],"comments":[{"text":"There are 2 options to include the URL of your Directus project's URL (and optionally, Static Token):\n\n1. Using an environment file (env.json) [For ease of management, and not security]\n2. Directly setting the URL\n\nPS: Choose only 1 and remove the other!","width":521,"height":257,"fill":"transparent","x":-154,"y":-354,"id":"3b74179e-8b5c-f4bf-be00-1c9df8f7f0f0","largeFont":true},{"text":"This is Option 2 :\n\n- Provide env values directly in Noodl","width":277,"height":150,"fill":"no-fill","x":-26,"y":-69,"id":"78e1c2d4-2fe7-b114-400e-bff9f7632ca4","largeFont":true,"color":"success"}]}},{"name":"/App","id":"e13b87b2-f252-1f4a-46e7-6bd652be7588","graph":{"connections":[{"fromId":"b0beb511-d597-bda5-2006-ca7f73c5610d","fromProperty":"didMount","toId":"5f0e72ed-31eb-342e-e08c-4d5e96915de2","toProperty":"Do"},{"fromId":"5f0e72ed-31eb-342e-e08c-4d5e96915de2","fromProperty":"Mounted","toId":"c15254b5-6e34-5eee-8d91-b54c62f885ec","toProperty":"mounted"},{"fromId":"bc6bac58-de9d-b925-bb6b-4feffd6fb976","fromProperty":"Mounted","toId":"c15254b5-6e34-5eee-8d91-b54c62f885ec","toProperty":"mounted"}],"roots":[{"id":"b0beb511-d597-bda5-2006-ca7f73c5610d","type":"Group","label":"Group","x":-351.97281148029947,"y":666.4453376820682,"parameters":{"backgroundColor":"#F8F8F8"},"ports":[],"dynamicports":[],"children":[{"id":"c15254b5-6e34-5eee-8d91-b54c62f885ec","type":"Router","label":"","parameters":{"pages":{"routes":["/App/Component Testing","/Start Page"],"startPage":"/Start Page"},"backgroundColor":"Indigo","mounted":false,"name":"Main"},"ports":[],"dynamicports":[],"children":[]}]},{"id":"5f0e72ed-31eb-342e-e08c-4d5e96915de2","type":"/#Directus/Directus Prefab/Initial Set Up/Set up Directus - Option 1 (env)","label":"Set up Directus - Option 1","x":-669.3267003691883,"y":691.6453403523562,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"bc6bac58-de9d-b925-bb6b-4feffd6fb976","type":"/#Directus/Directus Prefab/Initial Set Up/Set up Directus - Option 2 (manual)","x":1.4502440752562507,"y":729.4453405430911,"parameters":{},"ports":[],"dynamicports":[],"children":[]}],"visualRoots":["b0beb511-d597-bda5-2006-ca7f73c5610d"],"comments":[{"text":"There are 2 options to include the URL of your Directus project's URL:\n\n1. Using an environment file (env.json) [For ease of management, and not security]\n2. Directly setting the URL\n\nPS: Choose only 1 and remove the other!","width":521,"height":233,"fill":"transparent","x":-545,"y":219,"id":"b5b361a0-38b6-68f8-17dc-81834d469ce4","largeFont":true},{"text":"Option 1 :\n\n- Using env.json","width":279,"height":285,"fill":"no-fill","x":-726,"y":574,"id":"6ac2441c-38d8-dac9-8ab5-6471be4aeb09","largeFont":true,"color":"success"},{"text":"Option 2 :\n\n- Providing env values directly in Noodl","width":283,"height":297,"fill":"no-fill","x":-60,"y":546,"id":"6a51e223-2047-563e-21e9-fa633c2c6f21","largeFont":true,"color":"success"}]},"metadata":{"canvasSize":{"width":"699px","height":"615px"},"canvasPos":{"x":-5008.30678103713,"y":-203.37860534466842}}},{"name":"/App/Component Testing","id":"3edcf6d2-b394-151b-bf2d-d68a07a2894d","graph":{"connections":[{"fromId":"c112a06f-b777-fd93-cef3-35a364031081","fromProperty":"onClick","toId":"da61432d-eb88-7b1c-46bc-f885a2faaf11","toProperty":"Do"},{"fromId":"5e4690cb-8c7d-923d-e759-b82765bbd464","fromProperty":"onClick","toId":"039ca2d5-271b-adb3-9bdc-fa791890b09f","toProperty":"Do"},{"fromId":"2c446b0d-e220-5d1b-369d-354094d68b74","fromProperty":"onClick","toId":"bf4fd365-abbf-316e-2b7b-66ea7ae7c217","toProperty":"Do"},{"fromId":"53018c4e-5055-9749-55f3-943809773e08","fromProperty":"onClick","toId":"935fe323-1340-1dc3-8833-d655832255f3","toProperty":"Do"},{"fromId":"7ba52e63-5b96-451c-837e-0167246f9e7b","fromProperty":"onClick","toId":"a9f5469c-e61b-8193-b84c-5aace52b0af9","toProperty":"Do"},{"fromId":"9249dece-52af-8492-5db0-982103541cfa","fromProperty":"onClick","toId":"87a270b5-2950-109b-5be3-1aaaf9b102e7","toProperty":"Do"},{"fromId":"8255c770-2b66-1492-bbcb-1d39cb40b38e","fromProperty":"onClick","toId":"2677b99d-9fac-ccdb-532d-b9385fe1a40c","toProperty":"Do"},{"fromId":"ca3b64ff-d8c5-155f-606a-5cd57f3414df","fromProperty":"onClick","toId":"f561194b-b9c3-32d3-050d-3b891adf2def","toProperty":"Do"},{"fromId":"ec96a1a2-0961-03c0-830a-039962568906","fromProperty":"onClick","toId":"014a7a71-984f-e15d-13b9-0e949f6a738c","toProperty":"Do"},{"fromId":"480f51bb-32e6-4a24-a924-8aa8a5b1d1c7","fromProperty":"onClick","toId":"20edd86c-1692-14fb-f7a5-345ecfb19b5f","toProperty":"Do"},{"fromId":"24b71c61-1928-750f-a3b0-ac308b27cb07","fromProperty":"onClick","toId":"ac634a30-7ec2-1ce5-cc28-28885fadc6a6","toProperty":"Do"},{"fromId":"a53527eb-f4de-07d7-2930-a974c3842805","fromProperty":"out-email","toId":"ac634a30-7ec2-1ce5-cc28-28885fadc6a6","toProperty":"email"},{"fromId":"a53527eb-f4de-07d7-2930-a974c3842805","fromProperty":"out-password","toId":"ac634a30-7ec2-1ce5-cc28-28885fadc6a6","toProperty":"password"},{"fromId":"a254ad2e-bf0f-8c25-f6a7-5c24cca7dee7","fromProperty":"onClick","toId":"30d09e01-9420-f29d-759e-94cb500a726a","toProperty":"Do"},{"fromId":"5a38b9ad-a410-cb31-80e3-eb90e92d0cac","fromProperty":"onClick","toId":"2773329b-e954-00c5-acf8-7c2b1a53b8e0","toProperty":"Do"},{"fromId":"f0feee26-ee0c-f2ba-790d-e424bc99b7f6","fromProperty":"onClick","toId":"164914b4-7d60-bacb-78e3-51070d4755b7","toProperty":"Do"},{"fromId":"d2e47107-dbec-45cf-a810-1dea5854d66d","fromProperty":"onClick","toId":"eacb3c9c-f618-6b5a-462e-92014772a59f","toProperty":"open"},{"fromId":"eacb3c9c-f618-6b5a-462e-92014772a59f","fromProperty":"file","toId":"5d126de0-de9e-78be-7712-7498d998badd","toProperty":"file"},{"fromId":"eacb3c9c-f618-6b5a-462e-92014772a59f","fromProperty":"success","toId":"5d126de0-de9e-78be-7712-7498d998badd","toProperty":"Do"},{"fromId":"4d33db3e-156d-053c-a720-57af41b0f41d","fromProperty":"onClick","toId":"94940513-cd20-c7cd-2008-104845fd955a","toProperty":"Do"},{"fromId":"a53527eb-f4de-07d7-2930-a974c3842805","fromProperty":"out-file_url","toId":"94940513-cd20-c7cd-2008-104845fd955a","toProperty":"file url"},{"fromId":"057a9695-feb4-b6b7-ea8e-afe1699c1d23","fromProperty":"onClick","toId":"417b7cfc-a5c9-1b50-6a54-277b8a672993","toProperty":"Do"},{"fromId":"6714aef8-67a5-df3c-3a5d-fa7e64134239","fromProperty":"onClick","toId":"fdb208a9-54e5-16aa-9798-ef4d2eec62ac","toProperty":"Do"},{"fromId":"a53527eb-f4de-07d7-2930-a974c3842805","fromProperty":"out-payload_data","toId":"fdb208a9-54e5-16aa-9798-ef4d2eec62ac","toProperty":"payload_data"}],"roots":[{"id":"86479d7d-7fd7-97b6-a1ad-296eda8a4b13","type":"Page","x":-32,"y":-192,"parameters":{},"ports":[],"dynamicports":[{"name":"title","displayName":"Title","type":"string","group":"General","plug":"input","default":"Component Testing","index":31},{"name":"urlPath","displayName":"Url Path","type":"string","group":"General","plug":"input","default":"component-testing","index":32}],"children":[{"id":"6b1500ea-e9bc-61ce-2d8a-1d118b35167e","type":"Group","parameters":{"sizeMode":"explicit","height":{"value":300,"unit":"px"}},"ports":[],"dynamicports":[],"children":[{"id":"9721cdc7-4005-6e84-2d36-7b30738aefec","type":"Group","parameters":{"height":{"value":200,"unit":"px"},"flexDirection":"row","alignItems":"center","flexWrap":"wrap","alignContent":"space-evenly","columnGap":{"value":20,"unit":"px"},"marginLeft":{"value":20,"unit":"px"},"marginRight":{"value":0,"unit":"px"},"marginBottom":{"value":20,"unit":"px"},"marginTop":{"value":20,"unit":"px"},"sizeMode":"contentHeight","rowGap":{"value":20,"unit":"px"}},"ports":[],"dynamicports":[],"children":[{"id":"24b71c61-1928-750f-a3b0-ac308b27cb07","type":"net.noodl.controls.button","label":"User Signup","parameters":{"label":"User Signup"},"ports":[],"dynamicports":[],"children":[]},{"id":"a254ad2e-bf0f-8c25-f6a7-5c24cca7dee7","type":"net.noodl.controls.button","label":"User Login","parameters":{"label":"User Login"},"ports":[],"dynamicports":[],"children":[]},{"id":"5a38b9ad-a410-cb31-80e3-eb90e92d0cac","type":"net.noodl.controls.button","label":"User Logout","parameters":{"label":"User Logout"},"ports":[],"dynamicports":[],"children":[]},{"id":"f0feee26-ee0c-f2ba-790d-e424bc99b7f6","type":"net.noodl.controls.button","label":"Get Current User","parameters":{"label":"Get Current User"},"ports":[],"dynamicports":[],"children":[]},{"id":"c112a06f-b777-fd93-cef3-35a364031081","type":"net.noodl.controls.button","parameters":{"label":"Create Data"},"ports":[],"dynamicports":[],"children":[]},{"id":"5e4690cb-8c7d-923d-e759-b82765bbd464","type":"net.noodl.controls.button","parameters":{"label":"Read Data"},"ports":[],"dynamicports":[],"children":[]},{"id":"2c446b0d-e220-5d1b-369d-354094d68b74","type":"net.noodl.controls.button","parameters":{"label":"Update Data"},"ports":[],"dynamicports":[],"children":[]},{"id":"53018c4e-5055-9749-55f3-943809773e08","type":"net.noodl.controls.button","parameters":{"label":"Delete Data"},"ports":[],"dynamicports":[],"children":[]},{"id":"7ba52e63-5b96-451c-837e-0167246f9e7b","type":"net.noodl.controls.button","label":"Get Collections","parameters":{"label":"Get Collections"},"ports":[],"dynamicports":[],"children":[]},{"id":"9249dece-52af-8492-5db0-982103541cfa","type":"net.noodl.controls.button","label":"Get Fields","parameters":{"label":"Get Fields"},"ports":[],"dynamicports":[],"children":[]},{"id":"8255c770-2b66-1492-bbcb-1d39cb40b38e","type":"net.noodl.controls.button","label":"Get Folders","parameters":{"label":"Get Folders"},"ports":[],"dynamicports":[],"children":[]},{"id":"ca3b64ff-d8c5-155f-606a-5cd57f3414df","type":"net.noodl.controls.button","label":"Get Files","parameters":{"label":"Get Files"},"ports":[],"dynamicports":[],"children":[]},{"id":"ec96a1a2-0961-03c0-830a-039962568906","type":"net.noodl.controls.button","label":"Download File","parameters":{"label":"Download File"},"ports":[],"dynamicports":[],"children":[]},{"id":"d2e47107-dbec-45cf-a810-1dea5854d66d","type":"net.noodl.controls.button","label":"Upload File","parameters":{"label":"Upload File"},"ports":[],"dynamicports":[],"children":[]},{"id":"4d33db3e-156d-053c-a720-57af41b0f41d","type":"net.noodl.controls.button","label":"Import File","parameters":{"label":"Import File"},"ports":[],"dynamicports":[],"children":[]},{"id":"480f51bb-32e6-4a24-a924-8aa8a5b1d1c7","type":"net.noodl.controls.button","label":"Get File URL","parameters":{"label":"Get File URL"},"ports":[],"dynamicports":[],"children":[]},{"id":"057a9695-feb4-b6b7-ea8e-afe1699c1d23","type":"net.noodl.controls.button","label":"List Flows","parameters":{"label":"List Flows"},"ports":[],"dynamicports":[],"children":[]},{"id":"6714aef8-67a5-df3c-3a5d-fa7e64134239","type":"net.noodl.controls.button","label":"Run Flow","parameters":{"label":"Run Flow"},"ports":[],"dynamicports":[],"children":[]}]}]}]},{"id":"935fe323-1340-1dc3-8833-d655832255f3","type":"/#Directus/Directus Prefab/Components/Data/Directus - Delete Data","x":323,"y":625,"parameters":{"collection":"temp","SDK Client to use":"Site SDK Client","Delete Single or Multiple":"multiple","Delete Type":"Delete All"},"ports":[],"dynamicports":[],"children":[]},{"id":"bf4fd365-abbf-316e-2b7b-66ea7ae7c217","type":"/#Directus/Directus Prefab/Components/Data/Directus - Update Data","x":324,"y":530,"parameters":{"SDK Client to use":"Site SDK Client","collection":"temp","Update Type":"Update Multiple by Filter"},"ports":[],"dynamicports":[],"children":[]},{"id":"039ca2d5-271b-adb3-9bdc-fa791890b09f","type":"/#Directus/Directus Prefab/Components/Data/Directus - Get Data","x":326,"y":433,"parameters":{"Items Qty mode":"multiple","SDK Client to use":"Site SDK Client","collection":"temp","Item Get type":"Get All"},"ports":[],"dynamicports":[],"children":[]},{"id":"da61432d-eb88-7b1c-46bc-f885a2faaf11","type":"/#Directus/Directus Prefab/Components/Data/Directus - Create Data","x":327,"y":339,"parameters":{"collection":"temp","SDK Client to use":"Site SDK Client"},"ports":[],"dynamicports":[],"children":[]},{"id":"a9f5469c-e61b-8193-b84c-5aace52b0af9","type":"/#Directus/Directus Prefab/Components/Admin/Directus - Get Collections","x":320.7952380952381,"y":722.0285731724331,"parameters":{"SDK Client to use":"Site SDK Client"},"ports":[],"dynamicports":[],"children":[]},{"id":"87a270b5-2950-109b-5be3-1aaaf9b102e7","type":"/#Directus/Directus Prefab/Components/Admin/Directus - Get Fields","x":320.24523809523816,"y":814.953573363168,"parameters":{"SDK Client to use":"Site SDK Client","Collection":"temp","Collections to get":"Single","Field":"string"},"ports":[],"dynamicports":[],"children":[]},{"id":"a53527eb-f4de-07d7-2930-a974c3842805","type":"JavaScriptFunction","x":752,"y":649,"parameters":{"functionScript":"Outputs.ID = 83\r\nOutputs.IDs = [71,72,73,74,75]\r\nOutputs.data = {\r\n    string: \"148nhg\"\r\n}\r\nOutputs.filter = {\r\n    id : {\r\n        _in: [85]\r\n    }\r\n}\r\nOutputs.email = \"abc@example.com\"\r\nOutputs.password = \"FC45trh$%hyvgk\"\r\n\r\nOutputs.file_url = \"https://picsum.photos/200/300\"\r\n//Outputs.file_url = \"https://fastly.picsum.photos/id/500/200/300.jpg?hmac=RZ1lWx9cRF6wDuYKRS4PAb721Vriq5q5iBxlTaQujQw\"\r\n\r\nOutputs.payload_data = {a:1,b:{c:3},d:[{e:{f:5}}]}"},"ports":[],"dynamicports":[{"name":"out-ID","displayName":"ID","plug":"output","type":"*","group":"Outputs","index":4},{"name":"out-IDs","displayName":"IDs","plug":"output","type":"*","group":"Outputs","index":5},{"name":"out-data","displayName":"data","plug":"output","type":"*","group":"Outputs","index":6},{"name":"out-filter","displayName":"filter","plug":"output","type":"*","group":"Outputs","index":7},{"name":"out-email","displayName":"email","plug":"output","type":"*","group":"Outputs","index":8},{"name":"out-password","displayName":"password","plug":"output","type":"*","group":"Outputs","index":9},{"name":"out-file_url","displayName":"file_url","plug":"output","type":"*","group":"Outputs","index":10},{"name":"out-payload_data","displayName":"payload_data","plug":"output","type":"*","group":"Outputs","index":11}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"2677b99d-9fac-ccdb-532d-b9385fe1a40c","type":"/#Directus/Directus Prefab/Components/Files/Directus - Get Folders","x":319.27116402116405,"y":914.7313511409457,"parameters":{"Item Get type":"Get All","SDK Client to use":"Site SDK Client"},"ports":[],"dynamicports":[],"children":[]},{"id":"f561194b-b9c3-32d3-050d-3b891adf2def","type":"/#Directus/Directus Prefab/Components/Files/Directus - Get Files","x":319.8311640211641,"y":1009.4713512935336,"parameters":{"File Get type":"Get All"},"ports":[],"dynamicports":[],"children":[]},{"id":"014a7a71-984f-e15d-13b9-0e949f6a738c","type":"/#Directus/Directus Prefab/Components/Files/Directus - Download File","x":319.26752765752764,"y":1104.4168059777044,"parameters":{"File ID":"d4fd6edc-4cc5-48c1-8bc7-e646924bbdca"},"ports":[],"dynamicports":[],"children":[]},{"id":"20edd86c-1692-14fb-f7a5-345ecfb19b5f","type":"/#Directus/Directus Prefab/Components/Files/Directus - Create File Download URL","x":315.26752765752764,"y":1407.4168059777044,"parameters":{"file id":"d4fd6edc-4cc5-48c1-8bc7-e646924bbdca","download as user":true,"SDK Client to use":"Public"},"ports":[],"dynamicports":[],"children":[]},{"id":"ac634a30-7ec2-1ce5-cc28-28885fadc6a6","type":"/#Directus/Directus Prefab/Components/Auth/Directus - Signup","x":320.98982162898824,"y":-42.43179339699708,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"30d09e01-9420-f29d-759e-94cb500a726a","type":"/#Directus/Directus Prefab/Components/Auth/Directus - Login","x":323.2667447059114,"y":56.75282210499364,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"2773329b-e954-00c5-acf8-7c2b1a53b8e0","type":"/#Directus/Directus Prefab/Components/Auth/Directus - Logout","x":322.2667447059114,"y":152.75282210499364,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"164914b4-7d60-bacb-78e3-51070d4755b7","type":"/#Directus/Directus Prefab/Components/User/Directus - Get Current User","x":324.3467447059113,"y":240.47282230844405,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"5d126de0-de9e-78be-7712-7498d998badd","type":"/#Directus/Directus Prefab/Components/Files/Directus - Upload File","x":618.3842447059112,"y":1182.1228224038116,"parameters":{"SDK Client to use":"Site SDK Client"},"ports":[],"dynamicports":[],"children":[]},{"id":"eacb3c9c-f618-6b5a-462e-92014772a59f","type":"Open File Picker","x":314.3842447059112,"y":1201.1228224038116,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"94940513-cd20-c7cd-2008-104845fd955a","type":"/#Directus/Directus Prefab/Components/Files/Directus - Import File","x":313.11757803924456,"y":1305.2783781289093,"parameters":{"SDK Client to use":"Site SDK Client"},"ports":[],"dynamicports":[],"children":[]},{"id":"417b7cfc-a5c9-1b50-6a54-277b8a672993","type":"/#Directus/Directus Prefab/Components/Flows/Directus - List Flows","x":320.9386306708236,"y":1502.931009788166,"parameters":{"SDK Client to use":"Site SDK Client","Flow Get Type":"Get Single by ID"},"ports":[],"dynamicports":[],"children":[]},{"id":"fdb208a9-54e5-16aa-9798-ef4d2eec62ac","type":"/#Directus/Directus Prefab/Components/Flows/Directus - Run Flow","x":318.9386306708236,"y":1600.931009788166,"parameters":{"SDK Client to use":"Site SDK Client","flow ID":"9c151c07-9798-404b-9fdc-8b9344921d5d"},"ports":[],"dynamicports":[],"children":[]}],"visualRoots":["86479d7d-7fd7-97b6-a1ad-296eda8a4b13"]}},{"name":"/Start Page","id":"5035f46c-1888-609d-4b87-25cbcbee0426","graph":{"connections":[],"roots":[{"id":"99a4d5ba-d009-dd11-04e9-af0701954cdd","type":"Page","x":0,"y":0,"parameters":{},"ports":[],"dynamicports":[{"name":"title","displayName":"Title","type":"string","group":"General","plug":"input","default":"Start Page","index":31},{"name":"urlPath","displayName":"Url Path","type":"string","group":"General","plug":"input","default":"start-page","index":32}],"children":[]},{"id":"0124e6bd-297b-2179-4166-18e8dbeb1fd1","type":"PageInputs","x":-100,"y":-50,"parameters":{},"ports":[],"dynamicports":[],"children":[]}],"visualRoots":["99a4d5ba-d009-dd11-04e9-af0701954cdd"]}}],"settings":{"navigationPathType":"path","headCode":"<script type=\"module\">\r\n  import * as Directus from \"https://esm.sh/@directus/sdk\";\r\n  window.Directus = Directus;\r\n</script>\r\n","htmlTitle":"Directus Prefab Reference","baseUrl":"./","deployEnvDate":true,"sitemap.enabled":true},"rootNodeId":"b0beb511-d597-bda5-2006-ca7f73c5610d","version":"4","metadata":{"styles":{"text":{"Body Text":{"fontFamily":"fonts/Roboto/Roboto-Regular.ttf","fontSize":{"value":"16","unit":"px"},"color":"#000000"},"Button Label":{"fontFamily":"fonts/Roboto/Roboto-Regular.ttf","fontSize":{"value":"16","unit":"px"},"color":"#000000"},"Label Text":{"fontFamily":"fonts/Roboto/Roboto-Regular.ttf","fontSize":{"value":"14","unit":"px"},"color":"#000000"},"Title":{"fontFamily":"fonts/Roboto/Roboto-Regular.ttf","fontSize":{"value":32,"unit":"px"},"color":"#FFFFFF","letterSpacing":"Auto","lineHeight":"Auto","textTransform":"none"}},"colors":{"Dark":"#1F1F1F","Dark Gray":"#434B53","Light Gray":"#C6C6C6","Primary":"#5836F5","Primary Dark":"#3F22B8","Primary Light":"#C9BFFC","Indigo":"#241A46","Lighter Red":"#EE6363","Light Red":"#C75B5B","Purple Taupe":"#433D58"}},"cloudservices":{"instanceId":"a7e0a9ae427ab853","workspaceId":"arl-test-01","endpoint":"https://backend.noodl.cloud/arl-test-01/a7e0a9ae427ab853","appId":"a7e0a9ae427ab853"}},"variants":[{"typename":"net.noodl.controls.button","parameters":{"height":{"value":40,"unit":"px"},"sizeMode":"contentWidth","backgroundColor":"Primary","iconIconSource":{"class":"material-icons","code":"home"},"iconSize":{"value":22,"unit":"px"},"iconSpacing":{"value":6,"unit":"px"},"borderRadius":{"value":4,"unit":"px"},"textStyle":"Button Label","paddingTop":{"value":5,"unit":"px"},"paddingLeft":{"value":24,"unit":"px"},"paddingRight":{"value":24,"unit":"px"},"paddingBottom":{"value":4,"unit":"px"},"color":"#FFFFFF","fontFamily":"fonts/Roboto/Roboto-Medium.ttf"},"stateParamaters":{"hover":{"backgroundColor":"Primary Dark"},"pressed":{"backgroundColor":"Primary Light","color":"Primary Dark"},"disabled":{"backgroundColor":"Light Gray"}},"stateTransitions":{},"defaultStateTransitions":{"neutral":{"curve":[0,0,0.58,1],"dur":300,"delay":0},"hover":{"curve":[0,0,0.58,1],"dur":300,"delay":0},"pressed":{"curve":[0,0,0.58,1],"dur":300,"delay":0}}},{"typename":"net.noodl.controls.radiobutton","parameters":{"width":{"value":24,"unit":"px"},"height":{"value":24,"unit":"px"},"useLabel":true,"labeltextStyle":"Label Text","borderWidth":{"value":2,"unit":"px"},"value":"0","useIcon":false,"fillColor":"transparent","borderColor":"#1F1F1F7F","labelfontSize":{"value":16,"unit":"px"}},"stateParamaters":{"checked":{"fillColor":"Primary","borderColor":"Primary","borderWidth":{"value":2,"unit":"px"},"backgroundColor":"#FFFFFF","width":{"value":24,"unit":"px"},"height":{"value":24,"unit":"px"}},"hover":{"backgroundColor":"transparent","borderColor":"Primary","width":{"value":24,"unit":"px"},"height":{"value":24,"unit":"px"}}},"stateTransitions":{},"defaultStateTransitions":{"neutral":{"curve":[0,0,0.58,1],"dur":300,"delay":0},"hover":{"curve":[0,0,0.58,1],"dur":300,"delay":0},"checked":{"curve":[0,0,0.58,1],"dur":300,"delay":0}}},{"typename":"Text","parameters":{"textStyle":"Body Text"},"stateParamaters":{},"stateTransitions":{}},{"typename":"net.noodl.controls.range","parameters":{"thumbColor":"Primary","thumbBorderRadius":{"value":100,"unit":"%"},"trackHeight":{"value":4,"unit":"px"},"trackActiveColor":"Primary","trackColor":"Primary Light","width":{"value":100,"unit":"%"}},"stateParamaters":{},"stateTransitions":{}},{"typename":"net.noodl.controls.checkbox","parameters":{"width":{"value":24,"unit":"px"},"height":{"value":24,"unit":"px"},"useIcon":false,"borderWidth":{"value":2,"unit":"px"},"useLabel":true,"labeltextStyle":"Label Text","borderRadius":{"value":2,"unit":"px"},"borderColor":"#0000007F","labelfontSize":{"value":16,"unit":"px"},"labelcolor":"Dark"},"stateParamaters":{"checked":{"useIcon":true,"iconIconSource":{"class":"material-icons","code":"check"},"backgroundColor":"Primary","borderColor":"Primary","iconSize":{"value":16,"unit":"px"}},"disabled":{"opacity":0.5},"hover":{"borderColor":"Primary"},"pressed":{}},"stateTransitions":{},"defaultStateTransitions":{"neutral":{"curve":[0,0,0.58,1],"dur":300,"delay":0},"hover":{"curve":[0,0,0.58,1],"dur":300,"delay":0},"checked":{"curve":[0,0,0.58,1],"dur":300,"delay":0}}},{"typename":"net.noodl.controls.textinput","parameters":{"useLabel":true,"sizeMode":"explicit","height":{"value":40,"unit":"px"},"textStyle":"Body Text","borderStyle":"solid","borderRadius":{"value":4,"unit":"px"},"borderWidth":{"value":2,"unit":"px"},"borderColor":"#1F1F1F7F","labeltextStyle":"Label Text","paddingLeft":{"value":8,"unit":"px"},"paddingRight":{"value":8,"unit":"px"},"labelSpacing":{"value":4,"unit":"px"},"placeholder":"Type here","labelcolor":"#1F1F1F7F","labeltextTransform":"uppercase","labelfontSize":{"value":12,"unit":"px"},"labelfontFamily":"fonts/Roboto/Roboto-Medium.ttf"},"stateParamaters":{"hover":{"labelcolor":"#000000","borderColor":"Dark","borderStyle":"solid"},"focused":{"borderColor":"Primary","labelcolor":"Primary","borderWidth":{"value":2,"unit":"px"},"boxShadowEnabled":false,"boxShadowColor":"Primary","borderStyle":"solid"},"disabled":{"labelcolor":"Light Gray","backgroundColor":"Light Gray","borderWidth":{"value":1,"unit":"px"},"borderColor":"Light Gray"}},"stateTransitions":{},"defaultStateTransitions":{"neutral":{"curve":[0,0,0.58,1],"dur":300,"delay":0},"focused":{"curve":[0,0,0.58,1],"dur":300,"delay":0}}},{"typename":"net.noodl.controls.options","parameters":{"sizeMode":"explicit","height":{"value":40,"unit":"px"},"borderWidth":{"value":2,"unit":"px"},"borderRadius":{"value":4,"unit":"px"},"borderColor":"#1F1F1F7F","boxShadowColor":"Dark Gray","useIcon":true,"iconIconSource":{"class":"material-icons","code":"expand_more"},"iconPlacement":"right","iconSize":{"value":24,"unit":"px"},"paddingRight":{"value":8,"unit":"px"},"textStyle":"Body Text","paddingLeft":{"value":8,"unit":"px"},"marginTop":{"value":24,"unit":"px"},"width":{"value":75,"unit":"%"},"iconColor":"#1F1F1F7F"},"stateParamaters":{"hover":{"borderColor":"Dark","borderRadius":{"value":4,"unit":"px"},"iconColor":"Dark","iconSize":{"value":24,"unit":"px"},"iconPlacement":"right"},"focused":{"borderColor":"Primary","boxShadowColor":"Primary","borderRadius":{"value":4,"unit":"px"},"useIcon":true,"iconColor":"Primary","iconIconSource":{"class":"material-icons","code":"keyboard_arrow_up"},"iconSize":{"value":24,"unit":"px"},"iconPlacement":"right"},"pressed":{"borderRadius":{"value":4,"unit":"px"}}},"stateTransitions":{},"defaultStateTransitions":{"neutral":{"curve":[0,0,0.58,1],"dur":300,"delay":0},"focused":{"curve":[0,0,0.58,1],"dur":300,"delay":0}}},{"name":"Red Button","typename":"net.noodl.controls.button","parameters":{"height":{"value":40,"unit":"px"},"sizeMode":"explicit","iconIconSource":{"class":"material-icons","code":"home"},"iconSize":{"value":22,"unit":"px"},"iconSpacing":{"value":6,"unit":"px"},"borderRadius":{"value":4,"unit":"px"},"textStyle":"Button Label","paddingTop":{"value":5,"unit":"px"},"paddingLeft":{"value":24,"unit":"px"},"paddingRight":{"value":24,"unit":"px"},"paddingBottom":{"value":4,"unit":"px"},"color":"#FFFFFF","fontFamily":"fonts/Roboto/Roboto-Medium.ttf","backgroundColor":"Lighter Red","marginBottom":{"value":16,"unit":"px"}},"stateParamaters":{"hover":{"backgroundColor":"Light Red"},"pressed":{"backgroundColor":"Purple Taupe","color":"#FFFFFF"},"disabled":{"backgroundColor":"Light Gray"}},"stateTransitions":{},"defaultStateTransitions":{"neutral":{"curve":[0,0,0.58,1],"dur":300,"delay":0},"hover":{"curve":[0,0,0.58,1],"dur":300,"delay":0},"pressed":{"curve":[0,0,0.58,1],"dur":300,"delay":0}}},{"name":"Text Link","typename":"Text","parameters":{"textStyle":"Body Text","text":"Log in","textAlignX":"center","sizeMode":"contentSize","styleCss":"/* background-color: red; */\ncursor: pointer;","color":"Lighter Red"},"stateParamaters":{"hover":{"color":"Light Red"}},"stateTransitions":{}},{"name":"Text Input Field","typename":"net.noodl.controls.textinput","parameters":{"useLabel":true,"sizeMode":"explicit","height":{"value":40,"unit":"px"},"textStyle":"Body Text","borderRadius":{"value":4,"unit":"px"},"borderWidth":{"value":2,"unit":"px"},"borderColor":"Indigo","labeltextStyle":"Label Text","paddingLeft":{"value":8,"unit":"px"},"paddingRight":{"value":8,"unit":"px"},"labelSpacing":{"value":4,"unit":"px"},"placeholder":"","labelcolor":"#FFFFFF","labeltextTransform":"uppercase","labelfontSize":{"value":12,"unit":"px"},"labelfontFamily":"fonts/Roboto/Roboto-Medium.ttf","width":{"value":100,"unit":"%"},"type":"text","label":"First Name","backgroundColor":"#FFFFFF","marginTop":{"value":24,"unit":"px"},"borderStyle":"solid"},"stateParamaters":{"hover":{"borderColor":"Lighter Red"},"focused":{"borderColor":"Lighter Red","labelcolor":"#FFFFFF","borderWidth":{"value":2,"unit":"px"},"boxShadowEnabled":false,"boxShadowColor":"Primary","borderStyle":"solid"},"disabled":{"labelcolor":"Light Gray","backgroundColor":"Light Gray","borderWidth":{"value":1,"unit":"px"},"borderColor":"Light Gray"}},"stateTransitions":{},"defaultStateTransitions":{"neutral":{"curve":[0,0,0.58,1],"dur":300,"delay":0},"focused":{"curve":[0,0,0.58,1],"dur":300,"delay":0}}}]}